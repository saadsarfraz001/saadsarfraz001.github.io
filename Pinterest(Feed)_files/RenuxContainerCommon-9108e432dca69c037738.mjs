(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["RenuxContainerCommon","AuthHandshakeCommon"],{"0Bqi":function(e,t,n){n.d(t,"a",(function(){return m}));var r=n("q1tI"),o=n.n(r),a=n("q23S"),i=n("Ye/N"),s=n("KNE1"),c=n("28DW"),l=n("n6mq");const u="\n.AccountSwitcherModal {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n}\n",d={mask:{backgroundColor:"rgba(0, 0, 0, 0.6)",opacity:1,position:"fixed",top:"0px",bottom:"0px",left:"0px",right:"0px",zIndex:1e3},scroller:{WebkitOverflowScrolling:"touch",overflowY:"scroll",bottom:"0px",left:"0px",right:"0px",top:"0px",position:"fixed",WebkitBoxOrient:"vertical",WebkitBoxDirection:"normal",WebkitFlexDirection:"column",msFlexDirection:"column",flexDirection:"column",WebkitJustifyContent:"space-around",msFlexPack:"distribute",justifyContent:"space-around"},modalContainer:{display:"flex",minHeight:"0px",position:"relative",opacity:1,borderRadius:"6px",margin:"0 auto"},closeButton:{backgroundColor:"Transparent",backgroundRepeat:"no-repeat",border:"none",outline:"none",overflow:"hidden",padding:"10px",position:"fixed",right:"24px",top:"24px"}};function p(e){const t=e=>{Object(c.a)(`unauth.account_switcher_modal.${e}`)},{renderContent:n}=e;return o.a.createElement("div",{style:d.mask},o.a.createElement(s.a,{unsafeCSS:u}),o.a.createElement("div",{className:"AccountSwitcherModal",onClick:()=>{t("empty_space_click");const{onCloseClick:n}=e;n()},role:"dialog",style:d.scroller},o.a.createElement("div",{onClick:e=>{e.stopPropagation()},role:"dialog",style:d.modalContainer},n(),o.a.createElement("button",{"aria-label":i.a._("close","accessible label for close button","accessible label for close button"),onClick:()=>{t("close_button_click");const{onCloseClick:n}=e;n()},style:d.closeButton},o.a.createElement(l.s,{accessibilityLabel:i.a._("close","accessible label for close button","accessible label for close button"),color:"white",icon:"cancel",inline:!0})))))}var h=n("3fKP");function m(e){return o.a.createElement(p,{onCloseClick:()=>{e.onClose&&e.onClose()},renderContent:()=>o.a.createElement(l.d,{display:"flex",justifyContent:"center",flex:"grow","data-test-id":"account-switcher-modal"},o.a.createElement(a.a,{container:e.container,email:e.email,isAccountSwitch:!0,isModal:!0,hideAccountSwitchValueProp:e.hideAccountSwitchValueProp,type:h.b.login,signupSource:h.b.login,customLoginTagline:e.customTaglineText||i.a._("Add account","Short text on the button that allows a user to log in to another Pinterest account","Short text on the button that allows a user to log in to another Pinterest account")}))})}},"3fKP":function(e,t,n){n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return a}));const r={login:"login",loginMfa:"loginMfa",signup:"signup",personalizedLogin:"personalizedLogin",socialSignupWithAge:"socialSignupWithAge",FBEmailRerequest:"FBEmailRerequest",FBEmailCollection:"FBEmailCollection",emailConfirmation:"emailConfirmation",magicLinkConfirmation:"magicLinkConfirmation",FBEmailAlreadyExist:"FBEmailAlreadyExist"},o={login:"login",loginMfa:"loginMfa",signup:"signup",signupOrPersonalizedLogin:"signupOrPersonalizedLogin",socialSignupWithAge:"socialSignupWithAge",FBEmailRerequest:"FBEmailRerequest",emailConfirmation:"emailConfirmation",magicLinkConfirmation:"magicLinkConfirmation",FBEmailAlreadyExist:"FBEmailAlreadyExist",FBEmailCollection:"FBEmailCollection",respondMessage:"respondMessage"},a={boardPage:"boardPage",boardInvite:"boardInvite",defaultSource:"defaultSource",homePage:"homePage",mwebDefaultSource:"mwebDefaultSource",invite:"invite",login:"login",userFollow:"userFollow",userProfilePage:"userProfilePage",saveButton:"saveButton",actionButton:"actionButton",signupButton:"signupButton",personalizedFlyout:"personalizedFlyout",navigateBoard:"navigateBoard",navigatePin:"navigatePin",navigateInterest:"navigateInterest",unauthHeader:"unauthHeader",unauthBanner:"unauthBanner",visualSearch:"unauthVisualSearch",giftWrap:"giftWrap",loginMfa:"loginMfa",search:"searchSource"}},"4O/9":function(e,t,n){var r=n("Sxd8"),o="Expected a function";e.exports=function(e,t){var n;if("function"!=typeof t)throw new TypeError(o);return e=r(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}},"573u":function(e,t,n){n.d(t,"a",(function(){return o}));const r=!("undefined"==typeof window||!window.performance||!window.performance.now);function o(e,t,n){this.category=e,this.variable=t,this.label=n,this.startTime,this.elapsedTime}function a(){return r?window.performance.now():Date.now()}function i(){this.timers={}}o.prototype.start=function(){return this.startTime=a(),this},o.prototype.end=function(){return this.elapsedTime=Math.round(a()-this.startTime),this.startTime=r?Math.round(this.startTime):null,this},o.prototype.getCompletedTime=function(){return this.elapsedTime},o.prototype.send=function(){if(this.elapsedTime>0&&this.elapsedTime<6e5){const{category:e,variable:t,label:r,elapsedTime:o}=this;(()=>Promise.resolve().then(n.bind(null,"rh3l")))().then(({default:n})=>{n.logToServer(n.SERVER_LOG_TYPE.INTERACTION_TIMING,n.HTTP_METHOD.POST,{category:e,variable:t,label:r,time:o})})}return this},i.prototype.start=function(e,t,n,...r){const a=Array.prototype.slice.call([e,t,n,...r],0,2).join(":"),i=new o(e,t,n).start();this.timers[a]=i},i.prototype.end=function(e,t,n){const r=e+":"+t,o=this.timers[r];return o&&(o.end(),n&&o.send(),delete this.timers[r]),o};new i},CzMn:function(e,t,n){n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}));var r=n("QLqj");function o(e){const t={};return e.forEach(e=>{const n=r.b.localStorage.getItem(e);n&&("signupInterestsPickerStartTime"===e?t.signupInterestsPickerTimeSpent=Date.now()-n:t[e]=n)}),JSON.stringify(t)}function a(){return o(["signupInterestsPickerScrollDown","signupInterestsPickerStartTime"])}function i(){return o(["signupTriedSkipInputName","signupTriedSkipGender","unauthTopicsFollowed"])}},HZII:function(e,t,n){var r=n("4O/9");e.exports=function(e){return r(2,e)}},ItC7:function(e,t,n){n.r(t),n.d(t,"isRenuxBestPinsFallBack",(function(){return b})),n.d(t,"RenuxContainer",(function(){return w}));var r=n("q1tI"),o=n.n(r),a=n("/MKj"),i=n("QbJe"),s=n("NdXn"),c=n("MKmU"),l=n("joD6"),u=n("ANjH"),d=n("gC5q"),p=n("Wer7"),h=n("0/lc"),m=n("U4JR"),g=n("zXAL"),f=n("5239");function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const b=e=>e&&e.display_data&&e.display_data.refresh_homefeed_background;class w extends r.Component{constructor(...e){super(...e),_(this,"inRenuxExperience",()=>{const{experience:e}=this.props;return e&&500278===e.experience_id}),_(this,"handleDismiss",()=>{const{dismissCallback:e,experience:t,experienceClient:n,fetchUserHomefeedResource:r,viewer:o}=this.props;Object(m.a)(101,{component:17,element:1150,view:213}),this.inRenuxExperience()&&n.dismissExperience(11,500278),b(t)&&r(o),e&&e()}),_(this,"handleComplete",()=>{const{completeCallback:e,completeRenuxAction:t,experienceClient:n,fetchUserHomefeedResource:r,setRenuxUserState:o,viewer:a}=this.props;Object(m.a)(101,{component:17,element:96,view:213}),this.inRenuxExperience()&&n.completeExperience(11,500278),o(parseInt((new Date).getTime()/1e3,10)),t(),r(a),e&&e()})}componentDidMount(){const{experienceClient:e}=this.props;this.inRenuxExperience()&&e.viewExperience(11,500278)}render(){const{experience:e,isSimpleRenux:t}=this.props;if(t||this.inRenuxExperience()){const n=e&&e.display_data||{},r=t?f.y:n;return o.a.createElement(i.a,Object.assign({},Object(d.a)(s.a,!0)(r),{handleComplete:this.handleComplete,handleDismiss:this.handleDismiss},this.props))}return null}}t.default=Object(u.compose)(Object(a.connect)(null,e=>({completeRenuxAction:()=>e({type:"COMPLETE_RENUX"}),fetchUserHomefeedResource:t=>e(Object(p.a)("UserHomefeedResource",Object(c.a)({inNux:!0,staticFeed:!1,viewerIsPartner:t.isPartner}))),setRenuxUserState:t=>e(Object(h.a)(f.v,t))})),g.a,l.a)(w)},L2Gz:function(e,t,n){n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return c})),n.d(t,"c",(function(){return u}));var r=n("QLqj");function o(e,t){return e.some(e=>e.id===t.id)}function a(e){const t=[];if(e){const n=72e5,r=Date.now()-n;for(const o of e)o.ts>=r&&("string"==typeof o.image_signature&&t.push(o.image_signature),"string"==typeof o.first_pin_image_signature&&t.push(o.first_pin_image_signature))}return t}function i(){return{plpImages:a(r.b.localStorage.getItem("visitedPinLandingPagesBeforeLogin")||[]),blpImages:a(r.b.localStorage.getItem("visitedBoardLandingPagesBeforeLogin")||[])}}function s(e){return e.url.split("/").pop().replace(/(--.*|\.jpg)$/g,"")}function c(e){const t=e.log_data;return t&&JSON.parse(t).source||""}const l=5e-4;function u(e,t=l){const n=e=>{const t=e.toString(16);return 1===t.length?"0"+t:t},r=(e,t,r)=>"#"+n(e)+n(t)+n(r),o=(e=>{const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t&&[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]})(e);if(!o)return e;const[a,i,s]=o;if(a/255**2.2*.2126+i/255**2.2*.7151+s/255**2.2*.0721<=t)return r(a,i,s);const c=(t/(a/255**2.2*.2126+i/255**2.2*.7151+s/255**2.2*.0721))**(1/2.2);return r(Math.floor(c*a),Math.floor(c*i),Math.floor(c*s))}},QbJe:function(e,t,n){var r=n("q1tI"),o=n.n(r),a=n("/MKj"),i=n("xdpg"),s=n("L2Gz"),c=n("Ye/N"),l=n("EgnG"),u=n("n6mq");const d=2640,p=500,h=4e3,m=d+40,g=3,f=["blue","eggplant","green","maroon","midnight","navy","olive","orange","orchid","pine","purple","watermelon"],_=168,b=112,w=[10,-10,0];var E=o.a.memo((function(){const e=Object(r.createRef)();return Object(r.useEffect)(()=>{Object(l.a)({targets:e.current,translateY:["20%","-20%"],opacity:{value:0,delay:m,duration:p},duration:h,easing:"cubicBezier(.35, 0, .7, .7)",fillMode:"forwards"})},[]),o.a.createElement(u.d,{width:"100%",ref:e,dangerouslySetInlineStyle:{__style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",columnGap:"8px"}}},function(){const e=[];let t,n=0;for(let r=0;r<g;r+=1){e.push([]),t=[];for(let e=0;e<f.length;e+=1){const a=f[n];t.push(o.a.createElement(u.d,{color:a,height:_,key:e,marginTop:2,rounding:4,width:b})),(n+=3)>=f.length&&(n=r)}e[r].push(o.a.createElement(u.d,{key:r,marginTop:w[r]},t))}return e}())}));const x=800,S=d+1e3,y=236,C=354;var O=o.a.memo((function({selectedInterest:e}){const t=Object(r.createRef)(),n=Object(r.createRef)(),a=Object(r.createRef)(),i=(e,t)=>Object(l.a)({targets:n.current,opacity:[0,1],delay:S,duration:p,fillMode:"forwards"});Object(r.useEffect)(()=>{Object(l.a)({targets:t.current,scale:[.5,1],translateY:[448,0],opacity:[{value:0,duration:0},{value:1,duration:0}],delay:d,duration:x,easing:"linear",fillMode:"forwards"}),i(n.current),i(a.current)},[]);const s={label:c.a._("Food and Drink","Title for topic","Title for topic"),images:{"400x":{height:561,url:"https://i.pinimg.com/400x/10/31/0a/10310a3d860e8f7f2a5753612a870f5a.jpg",width:400}}},{label:h,name:m,images:g}=e||s,{"400x":{url:f,height:_,width:b}}=g,w=(h||m||"").trim().toLowerCase().replace(/\s/g,"").concat(".com");return o.a.createElement(u.d,{ref:t,height:C,width:y,position:"absolute",marginTop:"auto",marginBottom:"auto",top:!0,bottom:!0,dangerouslySetInlineStyle:{__style:{right:"96px"}}},o.a.createElement(u.z,{height:C,rounding:4,width:y},o.a.createElement(u.u,{alt:c.a._("Pin image","Pin image for nux loading step","Pin image for nux loading step"),color:"darkGray",fit:"cover",naturalHeight:_,naturalWidth:b,src:f})),o.a.createElement(u.d,{ref:n,margin:3,position:"absolute",right:!0,top:!0},o.a.createElement(u.e,{accessibilityLabel:c.a._("Save button"),color:"red",size:"lg",text:c.a._("Save","save button for nux loading step","save button for nux loading step")})),o.a.createElement(u.d,{ref:a,color:"lightGray",margin:3,paddingX:3,paddingY:1,rounding:"pill",position:"absolute",bottom:!0,left:!0,maxWidth:"90%",display:"flex",alignItems:"center",justifyContent:"between"},o.a.createElement(u.d,{alignItems:"center"},o.a.createElement(u.s,{accessibilityLabel:c.a._("link","Pin website url link for nux loading step","Pin website url link for nux loading step"),color:"darkGray",icon:"arrow-up-right",size:12})),o.a.createElement(u.d,{flex:"grow",height:18,marginStart:2,overflow:"hidden"},o.a.createElement(u.T,{size:"sm",truncate:!0,weight:"bold"},w))))}));const k={backgroundColor:"#efefef"},T={transition:"width .4s ease-out"};function I(e,t){return Object.assign({},k,{height:e+"px",borderRadius:t})}function N(e,t){return Object.assign({},T,{width:e+"%",borderRadius:t})}var v=({color:e="darkGray",height:t=8,progress:n=0,outerBorderRadius:r="10px",innerBorderRadius:a="inherit"})=>o.a.createElement(u.d,{width:"100%",overflow:"hidden",dangerouslySetInlineStyle:{__style:I(t,r)}},o.a.createElement(u.d,{height:"inherit",color:e,dangerouslySetInlineStyle:{__style:N(n,a)}})),P=n("eOdZ"),R=n("joD6"),A=n("U4JR"),L=n("vVbV"),j=n("5239"),U=n("ANjH");function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const G=300,B=5100,M=1e3,F=230;var H=Object(U.compose)(Object(a.connect)(null,e=>({dispatchSetNuxStepProgress:t=>e(Object(L.a)(t))})),R.a)(class extends r.PureComponent{constructor(...e){super(...e),D(this,"state",{progressPercent:0}),D(this,"gridCopyRef",Object(r.createRef)()),D(this,"pinCopyRef",Object(r.createRef)()),D(this,"incrementStepAndCompleteLoading",()=>{const{incrementNuxStep:e,isRenux:t}=this.props;if(Object(A.a)(8900,{view:t?213:24,viewParameter:261}),e(),!t){P.a.create("UserStateResource",{state:j.m,value:j.a}).callCreate()}})}componentDidMount(){const{dispatchSetNuxStepProgress:e,isRenux:t}=this.props;if(!t){P.a.create("UserStateResource",{state:j.m,value:j.w}).callCreate()}e("loader"),Object(A.a)(13,{view:t?213:24,viewParameter:261}),this.intervalId=setInterval(()=>this.setState(e=>({progressPercent:Math.min(e.progressPercent+100/(B/G),100)})),G),Object(l.a)({targets:this.gridCopyRef.current,opacity:[1,0],delay:d,duration:p,easing:"linear",fillMode:"forwards"}),Object(l.a)({targets:this.pinCopyRef.current,opacity:[0,1],delay:d+p,duration:p,easing:"linear",fillMode:"forwards"})}componentDidUpdate(e,t){const{progressPercent:n}=t,{progressPercent:r}=this.state;n!==r&&r>=100&&(clearInterval(this.intervalId),setTimeout(this.incrementStepAndCompleteLoading,M))}componentWillUnmount(){clearInterval(this.intervalId)}render(){const{isRenux:e,selectedInterests:t,showProgressBar:n}=this.props,{progressPercent:r}=this.state,a=e?c.a._("We're refreshing your home feed with lots of new Pins...","Details for ReNUX loading step","Details for ReNUX loading step"):c.a._("We're building your home feed with lots of Pins...","Details for nux loading step","Details for nux loading step"),i=c.a._("They are links saved from around the web","Pin education on NUX loading step","Pin education on NUX loading step"),s=o.a.createElement(v,{height:10,innerBorderRadius:"0 32px 32px 0",outerBorderRadius:"32px 32px 0 0",progress:r});return o.a.createElement(u.d,{display:"flex",direction:"column",height:"100%",overflow:"hidden","data-test-id":"nux-complete-loader"},o.a.createElement(u.d,{alignItems:"center",direction:"row",display:"flex",height:"100%",justifyContent:"between",overflow:"hidden",paddingX:12,width:"100%"},o.a.createElement(u.d,{marginStart:12,position:"relative",width:F},o.a.createElement(u.d,{ref:this.gridCopyRef},o.a.createElement(u.r,{size:"md"},c.a._("All set!","Title for nux loading step","Title for nux loading step")),o.a.createElement(u.d,{marginTop:4},o.a.createElement(u.T,null,a))),o.a.createElement(u.d,{ref:this.pinCopyRef,position:"absolute",top:!0},o.a.createElement(u.r,{size:"md"},c.a._("Pins are ideas","Pin education on NUX loading step","Pin education on NUX loading step")),o.a.createElement(u.d,{marginTop:4},o.a.createElement(u.T,null,i)))),o.a.createElement(u.d,{marginEnd:2},o.a.createElement(E,null)),o.a.createElement(O,{selectedInterest:t[0]})),!n&&o.a.createElement(u.d,{height:10,position:"absolute",top:!0,width:"100%"},o.a.createElement(u.d,{height:65,overflow:"hidden",paddingX:2,rounding:8},s)))}}),z=n("IZzd"),W=n("028R"),Y=n("0/lc");function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var X=Object(a.connect)(null,(e,t)=>({setNuxUpsellProgress:t=>e(Object(Y.a)(j.j,t)),dispatchSetNuxStepProgress:t=>e(Object(L.a)(t))}))(class extends r.Component{constructor(...e){super(...e),$(this,"onInstallButtonClicked",()=>{const{isRenux:e}=this.props;z.a.handleExtensionInstall(this.incrementStepAndCompleteLoading),Object(A.a)(101,{component:17,element:280,view:e?213:24,viewParameter:260})}),$(this,"onSkipButtonClick",()=>{const{isRenux:e}=this.props;Object(A.a)(101,{component:17,element:1150,view:e?213:24,viewParameter:260}),this.incrementStepAndCompleteLoading()}),$(this,"incrementStepAndCompleteLoading",()=>{const{incrementNuxStep:e,isRenux:t,setNuxUpsellProgress:n}=this.props;t||n(j.a),e()})}componentDidMount(){const{dispatchSetNuxStepProgress:e,isRenux:t,setNuxUpsellProgress:n}=this.props;t||n(j.w),e("extension"),Object(A.a)(13,{view:t?213:24,viewParameter:260})}render(){const{personalizationCopy:{headerText:e,subHeaderText:t}}=this.props;return o.a.createElement(W.a,{header:e,installClick:this.onInstallButtonClicked,skipClick:this.onSkipButtonClick,subheader:t})}}),V=n("7pfs");function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const K=({isChecked:e,label:t,selectGender:n,value:r})=>o.a.createElement(V.a,null,({hovered:a,onMouseEnter:i,onMouseLeave:s})=>o.a.createElement(u.d,{"data-test-id":`nux-gender-${t}-label`,onMouseEnter:i,onMouseLeave:s,rounding:a?2:0,color:a?"lightGray":"transparent"},o.a.createElement(u.v,{htmlFor:t},o.a.createElement(u.d,{alignItems:"center",display:"flex",flex:"none",height:60,paddingX:8},o.a.createElement(u.G,{checked:e,id:t,name:"genderOptions",onChange:n,size:"md",value:t}),o.a.createElement(u.d,{display:"flex",flex:"grow",marginStart:6},r))))),J=({children:e})=>o.a.createElement(u.r,{size:"sm"},e);var Q=Object(a.connect)(({viewer:e})=>({gender:e.gender?e.gender:"",customGender:e.customGender?e.customGender:""}),(e,t)=>({dispatchSetNuxStepProgress:t=>e(Object(L.a)(t)),setNuxGenderProgress:t=>e(Object(Y.a)(j.l,t)),updateGenderInfo:t=>e(Object(Y.e)({updateUserData:t}))}))(class extends r.PureComponent{constructor(...e){super(...e),q(this,"state",{customGender:this.props.customGender,gender:this.props.gender,showCustomGenderTextfield:this.props.gender===j.z&&this.props.customGender.length>0,showNextButton:[j.h,j.g].includes(this.props.gender)||this.props.customGender.length>0,showCustomGenderDoneButton:this.props.gender===j.z&&this.props.customGender.length>0}),q(this,"setCustomGender",e=>{e.target instanceof HTMLInputElement&&e.target.value.trim().length>0?this.setState({customGender:e.target.value,showCustomGenderDoneButton:!0}):this.state.showNextButton&&e.target instanceof HTMLInputElement?this.setState({customGender:e.target.value,showCustomGenderDoneButton:!1}):this.setState({customGender:"",showCustomGenderDoneButton:!1})}),q(this,"updateGenderCompleteStep",()=>{const{incrementNuxStep:e,isRenux:t,updateGenderInfo:n}=this.props,{customGender:r,gender:o}=this.state;n(o===j.z?{gender:j.z,custom_gender:r.slice(0,30)}:{gender:o}).then(()=>{this.setUserStateCompletedGenderStep(),Object(A.a)(8900,{view:t?213:24,viewParameter:3120}),e()})}),q(this,"logButtonClick",e=>{let t;switch(e){case"genderButton":t=241;break;case"nextButton":t=96;break;case"submitButton":t=11906}t&&Object(A.a)(101,{component:17,element:t,view:this.props.isRenux?213:24,viewParameter:3120})})}componentDidMount(){const{dispatchSetNuxStepProgress:e,isRenux:t,setNuxGenderProgress:n}=this.props;e("gender"),t||n(j.w),Object(A.a)(13,{view:t?213:24,viewParameter:3120})}onSelectGender(e){const{showCustomGenderTextfield:t,showNextButton:n}=this.state;n?this.setState({gender:e,showCustomGenderTextfield:e===j.z},()=>this.logButtonClick("genderButton")):e===j.z||t?this.setState({gender:j.z,customGender:"",showCustomGenderTextfield:!t,showCustomGenderDoneButton:!1},()=>this.logButtonClick("genderButton")):this.setState({gender:e},()=>{this.logButtonClick("genderButton"),this.updateGenderCompleteStep()})}setUserStateCompletedGenderStep(){const{isRenux:e,setNuxGenderProgress:t}=this.props;e||t(j.a)}render(){const{isRenux:e,personalizationCopy:{headerText:t,subHeaderText:n}}=this.props,{customGender:a,showCustomGenderDoneButton:i,showCustomGenderTextfield:s,showNextButton:l}=this.state,d=c.a._("Female","nux.gender.femaleButton","Option for select female gender"),p=c.a._("Male","nux.gender.maleButton","Option for select male gender"),h=c.a._("Specify another","nux.gender.specifyButton","Option for gender besides male and female"),m=c.a._("Enter preferred gender","nux.gender.customGenderPlaceholder","placeholder text for custom gender text field"),g=c.a._("Submit","nux.gender.submitCustomGender","button text for submitting a custom gender type"),f=s?o.a.createElement(r.Fragment,null,o.a.createElement(u.d,{"data-test-id":"nux-gender-unspecified-input",display:"flex",flex:"grow",marginEnd:!l&&i?3:0},o.a.createElement(u.d,{alignItems:"center",width:"100%"},o.a.createElement(u.V,{id:"customGender",onChange:({event:e})=>this.setCustomGender(e),placeholder:a||m,size:"lg"}))),!l&&i&&o.a.createElement(u.d,{"data-test-id":"nux-gender-unspecified-done-btn"},o.a.createElement(u.e,{color:"red",inline:!0,onClick:()=>{this.logButtonClick("submitButton"),this.updateGenderCompleteStep()},size:"lg",text:g}))):o.a.createElement(J,null,h);return o.a.createElement(u.d,{direction:"column",display:"flex",height:"100%",justifyContent:"start",paddingY:8,width:"100%"},o.a.createElement(u.d,{direction:"column",display:"flex",marginTop:11,paddingX:8,paddingY:8},e?o.a.createElement(u.d,{marginTop:8,paddingY:4},o.a.createElement(u.r,{align:"center",size:"md"},t),o.a.createElement(u.d,{marginTop:3},o.a.createElement(u.T,{align:"center"},n))):o.a.createElement(u.r,{align:"center",size:"lg"},t)),o.a.createElement(u.d,{paddingY:8},o.a.createElement(K,{isChecked:!s&&this.state.gender.toLowerCase()===j.g,label:j.g,selectGender:()=>this.onSelectGender(j.g),value:o.a.createElement(J,null,d)}),o.a.createElement(K,{isChecked:!s&&this.state.gender.toLowerCase()===j.h,label:j.h,selectGender:()=>this.onSelectGender(j.h),value:o.a.createElement(J,null,p)}),o.a.createElement(K,{isChecked:s,label:j.z,selectGender:()=>this.onSelectGender(j.z),value:f})),l&&o.a.createElement(u.d,{"data-test-id":"nux_gender_next_btn",marginEnd:8,marginStart:8,marginTop:"auto"},o.a.createElement(u.e,{accessibilityLabel:c.a._("Next","go to next nux step","go to next nux step"),color:"red",disabled:s&&0===this.state.customGender.length,onClick:()=>{this.logButtonClick("nextButton"),this.updateGenderCompleteStep()},size:"lg",text:c.a._("Next","next nux step button","next nux step button"),type:"button"})))}}),Z=n("xAAE"),ee=n("w70y");var te=e=>{const{defaultOptions:t,id:n,items:r,name:a,onChange:i,value:s}=e,c=(r.data||t||[]).sort((e,t)=>e.name.localeCompare(t.name)).map(({name:e,key:t})=>({label:e.toString(),value:t}));return o.a.createElement(u.L,{id:n,name:a,onChange:i,options:c,size:"lg",value:s})};function ne(e){const t=Object(ee.a)({name:"CountriesResource"});return o.a.createElement(te,Object.assign({items:t},e))}function re(e){const t=Object(ee.a)({name:"LocalesResource"});return o.a.createElement(te,Object.assign({items:t},e))}var oe=n("QLqj"),ae=n("pLLR");function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const se="Country";var ce=Object(U.compose)(Object(a.connect)(({viewer:e})=>({reduxCountry:e.country?e.country:"",reduxLocale:e.locale?e.locale:""}),(e,t)=>({updateUserInfo:t=>e(Object(Y.e)(t)),setNuxLocaleProgress:t=>e(Object(Y.a)(j.k,t)),dispatchSetNuxStepProgress:t=>e(Object(L.a)(t))})),ae.e)(class extends r.PureComponent{constructor(...e){super(...e),ie(this,"state",{locale:this.props.reduxLocale||(this.props.requestContext||{}).locale||j.c,country:this.props.reduxCountry||(this.props.requestContext||{}).country||j.b,swappingLanguage:!1}),ie(this,"onNextButtonClick",()=>{const{incrementNuxStep:e,isRenux:t,updateUserInfo:n,setNuxLocaleProgress:r}=this.props,{country:o,locale:a}=this.state;n({updateUserData:{country:o,locale:a}}).then(()=>{t||r(j.a),Object(A.a)(101,{component:17,element:96,view:24,viewParameter:3139}),Object(A.a)(8900,{view:24,viewParameter:3139}),e()})}),ie(this,"updateLocale",({value:e})=>this.setState({locale:e})),ie(this,"updateCountry",({value:e})=>this.setState({country:e}))}componentDidMount(){const{dispatchSetNuxStepProgress:e,isRenux:t,setNuxLocaleProgress:n}=this.props;t||n(j.w),e("country"),oe.b.localStorage.getItem("signupUserLocale")||oe.b.localStorage.getItem("signupUserCountry")||Object(A.a)(13,{view:24,viewParameter:3139})}componentDidUpdate(e,t){const{toggleLoadingIndicator:n,isBizNux:r,updateUserInfo:o}=this.props,{country:a,locale:i}=t,{country:s,locale:c}=this.state,l=a!==s,u=i!==c;(l||u)&&o({updateUserData:{country:s,locale:c}}).then(()=>{l&&oe.b.localStorage.setItem("signupUserCountry",s),u&&(oe.b.localStorage.setItem("signupUserLocale",c),r?this.setState({swappingLanguage:!0}):n(!0),Object(Z.a)("/"))})}render(){const{personalizationCopy:{headerText:e}}=this.props,{country:t,locale:n,swappingLanguage:r}=this.state;return o.a.createElement(u.d,{direction:"column",display:"flex",height:"100%",padding:8,width:"100%"},o.a.createElement(u.d,{alignItems:"center",direction:"column",display:"flex",flex:"grow",justifyContent:"start",marginBottom:7},o.a.createElement(u.d,{marginTop:10,paddingY:5,width:"100%"},o.a.createElement(u.r,{align:"center",size:"md"},e)),o.a.createElement(u.d,{marginTop:12,paddingY:5,width:"100%"},o.a.createElement(u.d,{"data-test-id":"nux-locale-select"},o.a.createElement(re,{id:"newUserLanguage",name:"locale",onChange:this.updateLocale,value:n})),o.a.createElement(u.d,{"data-test-id":"nux-country-select",marginTop:4},o.a.createElement(ne,{id:"newUserCountry",name:"country",onChange:this.updateCountry,value:t})))),o.a.createElement(u.d,{bottom:!0,"data-test-id":"nux-locale-country-next-btn"},o.a.createElement(u.e,{color:"red",disabled:r||t===se,onClick:this.onNextButtonClick,size:"lg",text:c.a._("Next","go to next step","go to next step"),type:"submit"})))}}),le=n("D2p8"),ue=n("shJ5"),de=n("TiQD"),pe=n("0SCs");const he=600,me=640,ge=520,fe=816,_e=40,be=40,we=16,Ee="6px",xe="10px",Se=["NuxDismissableWelcome","NuxWelcomeNameStep","NuxAboutYouStep","NuxGenderStep","NuxLocaleCountryStep"],ye=e=>Se.includes(e);var Ce=Object(r.memo)((function({children:e,currentIndex:t,hideDots:n,inUsecaseQuiz:a,isLoading:i,numSteps:s,onClose:d,onPrevStepClick:p,stepName:h}){const{anyEnabled:m}=Object(pe.a)("web_nux_modal_gestalt"),{isRTL:g}=Object(ae.d)(),f=Object(r.useRef)(),_=Object(r.useRef)(),b=Object(r.useRef)(ye(h)),w=Object(r.useRef)(h);Object(r.useEffect)(()=>(m||(document.body&&(document.body.style.overflow="hidden"),le.c.pause()),()=>{m||(document.body&&(document.body.style.overflow=""),le.c.resume())}),[]),Object(r.useEffect)(()=>{m&&(ye(w.current)!==ye(h)&&(()=>{if(!f.current||!_.current)return;const e=!ye(h);Object(l.a)({targets:f.current,duration:e?500:0,width:e?[ge,fe]:[fe,ge],easing:"linear",fillMode:"forwards"}),Object(l.a)({targets:_.current,duration:e?500:0,height:e?[he,me]:[me,he],easing:"linear",fillMode:"forwards"})})(),w.current=h)},[h]);const E=o.a.createElement(o.a.Fragment,null,i&&o.a.createElement(ue.a,null),!!p&&(()=>o.a.createElement(u.d,{left:!g,right:g,marginStart:5,marginTop:5,minHeight:_e,position:"absolute",top:!0},o.a.createElement(u.t,{accessibilityLabel:c.a._("Go back to previous step","Accessibility label on NUX back button","Accessibility label on NUX back button"),icon:"directional-arrow-left",iconColor:"darkGray",onClick:p,size:"md"})))(),!n&&(()=>o.a.createElement(u.d,{alignItems:"center",alignSelf:"center",display:"flex",height:we,justifyContent:"evenly",marginBottom:4,marginEnd:4,marginStart:4,marginTop:8,minHeight:we,width:be*s},[...Array(s).keys()].map(e=>{const n=e>t,r=n?Ee:xe;return o.a.createElement(u.d,{color:n?"gray":"darkGray","data-test-id":"nux-toc-dot",height:r,key:e,rounding:"circle",width:r})})))(),!!d&&(()=>o.a.createElement(u.d,{dangerouslySetInlineStyle:{__style:a?{zIndex:1}:{}},marginEnd:6,marginTop:6,minHeight:_e,position:"absolute",right:!0,top:!0},o.a.createElement(u.t,{accessibilityLabel:c.a._("cancel","close nux modal","close nux modal"),icon:"cancel",iconColor:"darkGray",onClick:d,size:"sm"})))(),o.a.createElement(u.d,{flex:"grow",height:"100%",width:"100%"},e));return m?o.a.createElement(de.b,{accessibilityModalLabel:"nux",closeOnOutsideClick:!1,onDismiss:()=>{},modalRef:f,size:b.current?ge:fe},o.a.createElement(u.d,{direction:"column",display:"flex",height:b.current?he:me,position:"relative",ref:_},E)):o.a.createElement(u.w,null,o.a.createElement(u.d,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0, 0, 0, .5)",zIndex:"999"}},display:"flex",height:"100vh",justifyContent:"center",overflow:"scroll",position:"fixed",top:!0,width:"100vw"},o.a.createElement(u.d,{color:"white",dangerouslySetInlineStyle:{__style:(e=>({transition:ye(e)?"":"width 0.5s, height 0.5s",borderRadius:"32px"}))(h)},direction:"column",display:"flex",height:ye(h)?he:me,position:"relative",rounding:2,width:ye(h)?ge:fe},E)))})),Oe=n("Cufx");function ke({account:e,large:t,viewerId:n}){const{email:r,fullName:a,id:i,imageMediumUrl:s,username:c}=e;if(n===i)return null;const l=!(null==s?void 0:s.includes("static/images/user/default"));return o.a.createElement(u.d,{alignItems:"center",direction:"row",display:"flex",height:"100%",width:"100%"},o.a.createElement(u.d,{paddingX:1},o.a.createElement(Oe.a,{accessibilityLabel:"",name:null!=a?a:c,src:l?s:"",size:t?"lg":"md"})),o.a.createElement(u.d,{marginStart:3,flex:"grow"},o.a.createElement(u.T,{color:"darkGray",truncate:!0,weight:"bold"},a||c),r&&o.a.createElement(u.T,{color:"darkGray",truncate:!0},r)))}var Te=n("0Bqi");var Ie=e=>{const t=Object.keys(e.accounts).length;return o.a.createElement(u.d,{position:"relative"},o.a.createElement(u.d,{color:"lightGray",height:20*t*4,position:"absolute",width:1,dangerouslySetInlineStyle:{__style:{bottom:48,left:52}}}),o.a.createElement("ul",null,Object.keys(e.accounts).map(t=>{const n=e.accounts[t];return o.a.createElement("li",{key:t},o.a.createElement(u.S,{onTap:()=>e.onClick(n)},o.a.createElement("div",{className:"AccountSwitcherListItem",style:{padding:"8px 16px 8px 28px"}},o.a.createElement(ke,{account:n}))))})))},Ne=n("iFas"),ve=n("h4v/"),Pe=n("x/Ro"),Re=n("3gA6"),Ae=n("NdXn"),Le=n("gC5q"),je=n("zLLH"),Ue=n("liz/");function De(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ge=Object(U.compose)(ae.e,Object(je.c)({key:"businessUser",name:"UserResource",options:({viewer:e})=>({field_set_key:"linked_partner",user_id:e.id})}))(class extends r.Component{constructor(...e){super(...e),De(this,"state",{failedAccount:null,showLoginModal:!1,isLoading:!1}),De(this,"handleAddAccount",()=>{Object(Ue.k)("add_account_click",null,this.props.container),this.props.container===Ne.a.ACCOUNT_SWITCHER_MODAL&&this.props.showLogin?this.props.showLogin():this.setState({showLoginModal:!0})}),De(this,"trackProfileNavigateClick",e=>{Object(Ue.k)(`current_profile_${e}_click`,null,this.props.container)}),De(this,"handleSwitch",e=>{const{container:t}=this.props;this.setState({isLoading:!0}),Object(A.a)(101,{component:13369,element:11196}),Object(Ue.k)("switch_account_click",{destination_user_id:e.id},t);const n={get_user:!0,switch_account:e.id};ve.a.getInstance().pauseImpressionsAndFlush(),Object(Pe.a)(n,{container:"account_switcher"},null,!0).then((n={})=>{if(n.resource_response&&n.resource_response.data&&n.resource_response.data.success){const n=`/${e.username}`;Object(Ue.g)(n,e.id,t)}else Object(Ue.f)(e.id,t),this.setState({failedAccount:e,isLoading:!1})},n=>{throw Object(Ue.f)(e.id,t),this.setState({isLoading:!1}),n})}),De(this,"handleLinkedAccountSwitch",e=>{const{container:t,viewer:n}=this.props;if(this.setState({isLoading:!0}),Object(A.a)(101,{component:13369,element:e.partner&&e.partner.isLinkedBusiness?11195:11194}),ve.a.getInstance().pauseImpressionsAndFlush(),e.partner&&e.partner.isLinkedBusiness){const n={business_id:e.id,get_user:!0};Object(Pe.a)(n,{container:"account_switcher"},null,!0).then((n={})=>{Object(Ue.g)("/",e.id,t)},n=>{throw Object(Ue.f)(e.id,t),this.setState({isLoading:!1}),n})}else P.a.create("UserSessionResource",{disable_auth_failure_redirect:!0}).callDelete().then(()=>{Object(Ue.j)(n.id),Object(Ue.g)(`/${e.username}`,n.id,t)},e=>{throw Object(Ue.f)(n.id,t),this.setState({isLoading:!1}),e})}),De(this,"handleCloseModal",()=>this.setState({showLoginModal:!1})),De(this,"handleReauthAccount",()=>{Object(Ue.k)("switch_failure_prompt.login_click",null,this.props.container),this.setState({failedAccount:null,showLoginModal:!0})}),De(this,"handleRemoveUnauthAccount",e=>{Object(Ue.k)("switch_failure_prompt.account_removed",{removed_user_id:e},this.props.container),Object(Ue.j)(e),this.setState({failedAccount:null})}),De(this,"getBusinessAccounts",()=>{const{businessUser:e,viewer:{partner:t}}=this.props;return e.data?(t&&t.is_linked_business?e.data.owners:e.data.businesses).reduce((e,t)=>(e[t.id]=Object(Le.a)(Ae.a,!0)(t),t.partner&&t.partner.is_linked_business&&(e[t.id].email=t.partner.biz_ownership_email),e),{}):null}),De(this,"renderAccounts",e=>Object.keys(e).map((t,n)=>o.a.createElement("li",{key:n},o.a.createElement(u.S,{onTap:()=>{this.handleSwitch(e[t])}},o.a.createElement("div",{className:"AccountSwitcherListItem",style:{height:"auto"}},o.a.createElement(ke,{large:!0,account:e[t],viewerId:this.props.viewer.id}))),n!==Ue.a-2&&o.a.createElement(u.n,null)))),De(this,"renderPinnerButtons",e=>{const{onNavigateButtonClick:t}=this.props;return o.a.createElement(Re.b,{className:"dangerouslyDisableFocusStyle",focusOnBody:!0,to:`/${e}/`},o.a.createElement(u.e,{text:c.a._("View profile","Visit a user profile from account switcher","Visit a user profile from account switcher"),accessibilityLabel:c.a._("Go to current profile","Visit a current user profile from account switcher","Visit a current user profile from account switcher"),size:"sm",color:"red",onClick:()=>{this.trackProfileNavigateClick("button"),t&&t()}}))}),De(this,"renderBusinessButtons",e=>{const{onNavigateButtonClick:t}=this.props;return o.a.createElement(u.d,{display:"flex"},o.a.createElement(u.d,{marginEnd:2},o.a.createElement(Re.b,{to:"/business/hub/",onClick:()=>{Object(A.a)(101,{element:11236}),t&&t()}},o.a.createElement(u.e,{key:"biz-hub-button",text:c.a._("Business hub","Link to Business hub from account switcher","Link to Business hub from account switcher"),accessibilityLabel:c.a._("Go to Business hub","Visit the Business hub for the current business user","Visit the Business hub for the current business user"),size:"sm",color:"red"}))),o.a.createElement(Re.b,{className:"dangerouslyDisableFocusStyle",focusOnBody:!0,to:`/${e}/`},o.a.createElement(u.e,{text:c.a._("Profile","Visit a user profile from account switcher","Visit a user profile from account switcher"),accessibilityLabel:c.a._("Go to current user profile","Visit a current user profile from account switcher","Visit a current user profile from account switcher"),size:"sm",onClick:()=>{this.trackProfileNavigateClick("button"),t&&t()}})))})}componentDidMount(){this.props.container===Ne.a.ACCOUNT_SWITCHER_MODAL&&Object(Ue.k)("modal.shown")}componentWillUnmount(){this.props.container===Ne.a.ACCOUNT_SWITCHER_MODAL&&Object(Ue.k)("modal.dismiss")}renderLoadingIndicator(){return this.state.isLoading?o.a.createElement(ue.a,null):null}render(){const{viewer:{partner:e}}=this.props,{failedAccount:t,isLoading:n,showLoginModal:r}=this.state,a=Object(Ue.e)(),i=this.getBusinessAccounts(),s=Object.keys(a).length,l=a[this.props.viewer.id];delete a[l.id];const d=l.imageLargeUrl&&!l.imageLargeUrl.includes("static/images/user/default");return o.a.createElement(u.d,{flex:"grow"},r&&o.a.createElement(Te.a,{container:this.props.container,onClose:this.handleCloseModal,email:t?t.email:""}),t?o.a.createElement(u.d,{paddingX:4,paddingY:4,flex:"grow"},o.a.createElement(u.d,{marginBottom:3},o.a.createElement(u.T,null,c.a._("Oh no! You're no longer logged into","Full sentence: \"Oh no! You're no longer logged into <user's account>\". Text telling user that they are no longer logged into an account after trying to switch to it","Full sentence: \"Oh no! You're no longer logged into <user's account>\". Text telling user that they are no longer logged into an account after trying to switch to it"))),o.a.createElement(ke,{viewerId:l.id,account:t}),o.a.createElement(u.d,{marginTop:4},o.a.createElement(u.e,{text:c.a._("Log in again","Text on button allowing user to log into an account after failing to switch to that account","Text on button allowing user to log into an account after failing to switch to that account"),color:"red",onClick:this.handleReauthAccount})),o.a.createElement(u.d,{marginTop:3},o.a.createElement(u.e,{text:c.a._("Remove account","Text on button allowing user to remove an account from their account switcher after failing to switch to it","Text on button allowing user to remove an account from their account switcher after failing to switch to it"),onClick:()=>this.handleRemoveUnauthAccount(t.id)}))):o.a.createElement(u.d,null,n&&this.renderLoadingIndicator(),o.a.createElement(u.d,null,o.a.createElement(u.d,{alignItems:"center",direction:"row",display:"flex",marginTop:1,padding:4,position:"relative",dangerouslySetInlineStyle:{__style:{zIndex:1}}},o.a.createElement(u.d,{marginEnd:4},o.a.createElement(Re.b,{className:"dangerouslyDisableFocusStyle",focusOnBody:!0,to:`/${l.username}/`},o.a.createElement(u.S,{onTap:()=>this.trackProfileNavigateClick("avatar")},o.a.createElement(Oe.a,{name:l.fullName||l.username,size:"lg",src:d?l.imageLargeUrl:""})))),o.a.createElement(u.d,{flex:"grow"},o.a.createElement(u.d,{marginBottom:2},o.a.createElement(u.T,{color:"darkGray",truncate:!0,weight:"bold"},l.fullName||l.username),l.email&&o.a.createElement(u.T,{color:"darkGray",truncate:!0},l.email)),e?this.renderBusinessButtons(l.username):this.renderPinnerButtons(l.username))),i?o.a.createElement(Ie,{accounts:i,onClick:this.handleLinkedAccountSwitch}):null,o.a.createElement(u.n,null),e&&e.is_linked_business?null:o.a.createElement(u.d,null,o.a.createElement("ul",null,this.renderAccounts(a)))),s<Ue.a&&!(e&&e.is_linked_business)&&o.a.createElement(u.d,{paddingX:4,paddingY:3},o.a.createElement(u.e,{text:c.a._("Add account","Short text on the button that allows a user to log in to another Pinterest account","Short text on the button that allows a user to log in to another Pinterest account"),onClick:()=>this.handleAddAccount()}))))}});function Be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Me=Object(U.compose)(R.a,Object(je.c)({name:"UserResource",key:"businessUser",options:({viewer:e})=>({username:e.username,field_set_key:"linked_partner"})}))(class extends r.Component{constructor(e){super(e),Be(this,"componentDidMount",()=>{Object(Ue.i)(this.props.viewer,this.props.businessUser.data)}),Be(this,"showLogin",()=>this.setState({showLoginModal:!0})),Be(this,"hideLogin",()=>this.setState({showLoginModal:!1}));const{showAddAccount:t}=this.props;this.state={showLoginModal:!!t}}render(){const{customTaglineText:e,hideAccountSwitchValueProp:t,onDismiss:n,showAddAccount:r,viewer:a}=this.props;return this.state.showLoginModal?o.a.createElement(Te.a,{container:Ne.a.ACCOUNT_SWITCHER_MODAL,onClose:r?n:this.hideLogin,customTaglineText:e,hideAccountSwitchValueProp:t}):o.a.createElement(u.d,{position:"relative"},o.a.createElement(de.b,{accessibilityModalLabel:c.a._("View, add, and switch logged in users","modal which allows user to add and switch multiple accounts","modal which allows user to add and switch multiple accounts"),size:"sm",heading:c.a._("Switch accounts","Short title on modal that allows a user to switch between different Pinterest accounts","Short title on modal that allows a user to switch between different Pinterest accounts"),onDismiss:n},o.a.createElement(Ge,{container:Ne.a.ACCOUNT_SWITCHER_MODAL,onNavigateButtonClick:()=>n(),showLogin:this.showLogin,viewer:a})))}}),Fe=n("KNE1"),He=n("V08O");const ze={yellow:"#FAB904",orange:"#FF6400",green:"#0FA573",blue:"#0074e8",purple:"#B469EB"},We="DelightfulBubbles__",Ye=[`${We}fadeIn {\n  to {\n    opacity: 1;\n  }\n}\n`,`${We}growShrink {\n  0% {\n    transform: scale(0);\n  }\n  50% {\n    transform: scale(1);\n  }\n  100% {\n    transform: scale(0);\n  }\n}\n`,`${We}swirl {\n  0% {\n    transform: rotate(0deg) translateX(-50%);\n  }\n  100% {\n    transform: rotate(-360deg) translateX(-50%);\n  }\n}\n`,...Object.keys(ze).map(e=>{const t=((e,t)=>{const n=e.length,r=e.indexOf(t)+1>=n?0:e.indexOf(t)+1;return e[r]})(Object.keys(ze),e);return`${We}colorChange_${e} {\n      0% {\n        background-color: ${ze[e]};\n      }\n      50% {\n        background-color: ${ze[t]};\n      }\n    }\n    `})],$e=Object(He.a)(Ye);function Xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ve=e=>{const{delay:t,diameter:n,height:r,initialColor:a,width:i,xOffset:s,yOffset:c}=e,l=((e,t,n,r,o,a,i,s)=>({bubblePositionStyles:{position:"absolute",marginLeft:`${a/2-o}px`,marginTop:`${n/2-o}px`,left:`${i}px`,top:`${s}px`},bubbleSwirlStyles:{animation:`${We}swirl 6s ease-in-out ${e}s infinite forwards`,WebkitAnimation:`${We}swirl 6s ease-in-out ${e}s infinite forwards`},bubbleGrowShrinkStyles:{transform:"scale(0)",WebkitTransform:"scale(0)",animation:`${We}growShrink 6s ease-in-out ${e}s infinite alternate`,WebkitAnimation:`${We}growShrink 6s ease-in-out ${e}s infinite alternate`},bubbleShapeStyles:{height:`${t}px`,width:`${t}px`,borderRadius:"50%",backgroundColor:ze[r],opacity:0,animation:`${We}colorChange_${r} 12s steps(1, start) ${e}s infinite forwards,\n      ${We}fadeIn 3s linear ${e}s 1 forwards`,WebkitAnimation:`${We}colorChange_${r} 12s steps(1, start) ${e}s infinite forwards,\n      ${We}fadeIn 3s linear ${e}s 1 forwards`}}))(t,n,r,a,Math.floor(n/2),i,s,c);return o.a.createElement(u.d,{dangerouslySetInlineStyle:{__style:l.bubblePositionStyles}},o.a.createElement(u.d,{dangerouslySetInlineStyle:{__style:l.bubbleSwirlStyles}},o.a.createElement(u.d,{dangerouslySetInlineStyle:{__style:l.bubbleGrowShrinkStyles}},o.a.createElement(u.d,{dangerouslySetInlineStyle:{__style:l.bubbleShapeStyles}}))))};class qe extends r.Component{constructor(...e){super(...e),Xe(this,"state",{isInitialized:!1})}componentDidMount(){this.requestAnimationFrameId=window.requestAnimationFrame(()=>{this.setState({isInitialized:!0})})}shouldComponentUpdate(e,t){return!e.numBubbles===this.props.numBubbles||!t.isInitialized===this.state.isInitialized}getSize(){const{width:e,height:t}=this.props;return void 0!==e&&void 0!==t?{width:e,height:t}:this.containerElement?{height:this.containerElement.offsetHeight,width:this.containerElement.offsetWidth}:{height:void 0,width:void 0}}createBubbles(e,t){const{bubbleSize:n,delayFactor:r,delayOffset:a,numBubbles:i,xRadiusAdjustment:s,yRadiusAdjustment:c}=this.props,l=e+2*c,u=t+2*s,d=[],p=Object.keys(ze);for(let h=0;h<i;h+=1){const i=n+Object(He.c)(-4,4),s=p[h%p.length],{x:c,y:m}=Object(He.b)(l,u);d.push(o.a.createElement(Ve,{delay:h*r+a,diameter:i,initialColor:s,xOffset:c,yOffset:m,height:e,width:t,key:h}))}return d}render(){const{height:e,width:t}=this.getSize();return o.a.createElement(u.d,{height:e,width:t,position:"relative"},o.a.createElement(Fe.a,{unsafeCSS:$e}),o.a.createElement(u.d,{ref:e=>this.containerElement=e},this.state.isInitialized&&this.createBubbles(e||0,t||0),o.a.createElement(u.d,{position:"relative"},this.props.children)))}}Xe(qe,"defaultProps",{bubbleSize:16,numBubbles:10,xRadiusAdjustment:0,yRadiusAdjustment:0,delayFactor:1,delayOffset:0});var Ke=qe,Je=n("28DW"),Qe=n("0S8y");function Ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const et=120,tt=44,nt=80;var rt=Object(a.connect)(({viewer:e})=>({firstName:e.firstName?e.firstName:"",userEmail:e.isAuth?e.email:""}),e=>({dispatchSetNuxStepProgress:t=>e(Object(L.a)(t)),updateNameInfo:t=>e(Object(Y.e)({updateUserData:t})),setNuxNameProgress:()=>e(Object(Y.a)(j.r,j.a))}))(class extends r.PureComponent{constructor(...e){super(...e),Ze(this,"state",{name:this.props.firstName,showAccountSwitchModal:!1,showNameInput:!1,showNoNameError:!1,showNameLengthError:!1}),Ze(this,"onNameChange",({value:e})=>{this.setState({name:e||"",showNoNameError:!e||i.h(e),showNameLengthError:!!e&&e.length>30})}),Ze(this,"toggleNameInput",()=>{this.setState(({showNameLengthError:e,showNoNameError:t,showNameInput:n})=>({showNameInput:e||t||!n})),Object(A.a)(101,{element:136,view:24,viewParameter:259})}),Ze(this,"continueAndSave",()=>{const{firstName:e,incrementNuxStep:t,setNuxNameProgress:n,updateNameInfo:r}=this.props,{name:o}=this.state;r(Object(Qe.a)(o)).then(()=>{n(),Object(A.a)(101,{element:96,view:24,viewParameter:259,did_edit_name:e!==o}),Object(A.a)(8900,{view:24,viewParameter:259}),t()})}),Ze(this,"getError",()=>{const{showNameLengthError:e,showNoNameError:t}=this.state;let n="";return t?n=c.a._("And your name is...?","Error flyout when user doesn't input name","Error flyout when user doesn't input name"):e&&(n=c.a._("Hmm, that's too long. Try a nickname instead?","nux.welcomeStep.nameLengthError","Name exceeds 30 character maximum error")),n}),Ze(this,"handleHideAccountSwitcher",()=>this.setState({showAccountSwitchModal:!1})),Ze(this,"handleNotYouClick",e=>{e.event.preventDefault(),Object(Je.a)("web.nux.click_login"),this.setState({showAccountSwitchModal:!0})})}componentDidMount(){this.props.dispatchSetNuxStepProgress("welcome"),Object(A.a)(13,{view:24,viewParameter:259})}render(){const{personalizationCopy:{headerText:e,subHeaderText:t},userEmail:n}=this.props,{name:a,showAccountSwitchModal:s,showNameInput:l}=this.state,d=t.indexOf(" ",Math.round(t.length/2)),p=i.c(c.a._("{{ titleText }} {{ name }}!","nux.welcomeStep.greetingHeader","Greeting with inferred name."),{titleText:e,name:a}).replace(",",""),h=p.indexOf(a)-1,m=this.getError(),g=o.a.createElement(u.d,{dangerouslySetInlineStyle:{__style:{textAlign:"center"}},direction:"column",display:"flex",overflow:"hidden",width:"100%"},o.a.createElement(u.v,{htmlFor:"name"},o.a.createElement(u.d,{marginEnd:-1,marginStart:-1,marginTop:4},l?o.a.createElement(u.r,{align:"center",size:"md"},e):o.a.createElement(r.Fragment,null,o.a.createElement(u.r,{align:"center",size:"md"},p.substring(0,h)),o.a.createElement(u.d,{alignItems:"center",display:"flex",height:tt,justifyContent:"center",marginTop:4,paddingY:1},o.a.createElement(u.d,{maxWidth:`calc(100% - ${nt}px)`,marginStart:10},o.a.createElement(u.r,{align:"center",size:"md",truncate:!0},p.substring(h+1))),o.a.createElement(u.d,{"data-test-id":"nux-edit-name-btn",paddingX:1},o.a.createElement(u.t,{accessibilityLabel:c.a._("Edit Name","Botton that allows editing the user's name","Botton that allows editing the user's name"),bgColor:"transparent",icon:"edit",iconColor:"darkGray",onClick:this.toggleNameInput,size:"sm"})))))),l&&o.a.createElement(u.d,{alignItems:"start","data-test-id":"nux-edit-name-input",display:"flex",justifyContent:"center",marginTop:1,paddingY:1},o.a.createElement(u.d,{width:"69%"},o.a.createElement(u.V,{errorMessage:m,id:"name",onChange:this.onNameChange,placeholder:c.a._("name"),size:"lg",type:"text",value:a})),o.a.createElement(u.d,{"data-test-id":"nux-update-name-btn",marginStart:2},o.a.createElement(u.e,{accessibilityLabel:c.a._("Submit","Button that stores the name of the updated user","Button that stores the name of the updated user"),color:"gray",inline:!0,onClick:this.toggleNameInput,size:"lg",text:c.a._("Submit","Button that stores the name of the updated user","Button that stores the name of the updated user")}))));return o.a.createElement(r.Fragment,null,s&&o.a.createElement(Me,{customTaglineText:c.a._("Log in","Title on modal for users to log in to an existing account after they accidentally created a new account","Title on modal for users to log in to an existing account after they accidentally created a new account"),hideAccountSwitchValueProp:!0,onDismiss:this.handleHideAccountSwitcher,showAddAccount:!0}),o.a.createElement(u.d,{direction:"column",display:"flex",height:"100%",minWidth:"100%",paddingX:8,paddingY:8},o.a.createElement(u.d,{alignItems:"center",direction:"column",display:"flex",flex:"shrink",justifyContent:"start",width:"100%"},o.a.createElement(Ke,{delayOffset:-5,xRadiusAdjustment:40},o.a.createElement(u.d,{height:et,width:et},o.a.createElement(Oe.a,{name:a}))),o.a.createElement(u.d,{alignItems:"center",marginTop:6,width:"100%"},o.a.createElement(u.T,{align:"center",size:"lg",truncate:!0},n)),o.a.createElement(u.d,{alignItems:"end",display:"flex",marginTop:2,width:"100%"},g),o.a.createElement(u.d,{marginTop:m?0:6,width:"100%"},t.length>120?o.a.createElement(u.T,{align:"center"},t):o.a.createElement(r.Fragment,null,o.a.createElement(u.T,{align:"center"},t.substring(0,d)),o.a.createElement(u.T,{align:"center"},t.substring(d))))),o.a.createElement(u.d,{"data-test-id":"nux_name_done_btn",marginTop:8},o.a.createElement(u.e,{accessibilityLabel:c.a._("Next","go to next nux step","go to next nux step"),color:"red",disabled:!!m,onClick:this.continueAndSave,size:"lg",text:c.a._("Next","next nux step button","next nux step button"),type:"button"})),o.a.createElement(u.d,{marginBottom:5,marginTop:5},o.a.createElement(u.S,{fullWidth:!1,onTap:this.handleNotYouClick},o.a.createElement(u.T,{align:"center",size:"sm"},c.a._("Already have a Pinterest account?","subtitle to ask users who create a new account if they meant to log in to an existing account","subtitle to ask users who create a new account if they meant to log in to an existing account")),o.a.createElement(u.T,{align:"center",size:"sm",weight:"bold"},o.a.createElement(u.y,{href:"#"},c.a._("Log in instead","Link allowing users who just created a new account the option to log in instead into an existing account","Link allowing users who just created a new account the option to log in instead into an existing account")))))))}}),ot=n("CzMn"),at=n("TSYQ"),it=n.n(at),st=n("1inl"),ct=n("rh3l"),lt=n("lUXN"),ut=n("N0Eu"),dt=n("rgAY");var pt=function({clickHandler:e,interest:t,isSelected:n,text:a}){const[i,c]=Object(r.useState)(!1);let l="transparent";const d=!n&&!i;let p={};if(n&&t&&t.background_color){p={backgroundColor:Object(s.c)(t.background_color,5e-4)}}else n?l="darkGray":i&&(l="lightGray");const h=t&&"string"==typeof t.label?t.label:"",m=t?h||t.name:a||"";return o.a.createElement(u.S,{onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),onTap:e,rounding:"pill"},o.a.createElement(u.d,{borderSize:d?"lg":"none",color:l,dangerouslySetInlineStyle:{__style:{...p,borderStyle:d?"solid":"unset",padding:d?"2px":"4px"}},"data-test-id":"nux-picker-topic",direction:"row",display:"flex",height:48,rounding:"pill"},t&&(()=>{if(!t)return null;const{background_color:e,cycling_images:n,images:r}=t,a=r["400x"],s=n?n.map(e=>e["400x"]):[];return o.a.createElement(u.d,{marginEnd:1},o.a.createElement(u.z,{width:40,height:40,rounding:"circle"},s.length>0&&i?o.a.createElement(dt.a,{backgroundColor:e,cyclingImages:s,imageHeight:40,imageWidth:40,imgLabel:m}):o.a.createElement(u.u,{alt:m,color:e,fit:"cover",naturalHeight:a.height,naturalWidth:a.width,src:a.url})))})(),o.a.createElement(u.d,{alignItems:"center","data-test-id":"nux-picker-topic-label",display:"flex",justifyContent:"center",marginEnd:4,marginStart:t?2:4},o.a.createElement(u.T,{color:n?"white":"darkGray",size:"lg",weight:"bold"},m))))},ht=n("HZII");function mt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const gt=n.n(ht)()(()=>{oe.b.localStorage.setItem("signupInterestsPickerScrollDown",!0)});var ft=Object(U.compose)(Object(a.connect)(({viewer:e})=>({reduxCountry:e.country?e.country:"",reduxLocale:e.locale?e.locale:""}),()=>({})),ae.e)(class extends o.a.PureComponent{constructor(...e){super(...e),mt(this,"state",{hoverSection:null,userExpandedSections:[]}),mt(this,"gridContainer",o.a.createRef()),mt(this,"scrollContainer",o.a.createRef()),mt(this,"handleScroll",()=>{const e=this.scrollContainer.current,t=this.gridContainer.current;if(e&&t){gt();const n=e.scrollTop+e.offsetHeight>=t.clientHeight;this.props.handleBottomScroll(n)}}),mt(this,"onHoverSection",e=>{this.setState({hoverSection:e})}),mt(this,"onHoverLeaveSection",()=>{this.setState({hoverSection:null})}),mt(this,"onExpandSectionToggle",(e,t)=>{const{isRenux:n}=this.props,{userExpandedSections:r}=this.state;Object(A.a)(101,{component:36,element:t?11870:11871,view:n?213:24,viewParameter:172}),this.setState({userExpandedSections:t?r.concat(e):r.filter(t=>t!==e)})}),mt(this,"renderCategories",e=>{const{interests:t}=this.props,{userExpandedSections:n,hoverSection:r}=this.state,a=new Map;t.forEach(e=>{if(e.category_title){const t=e.category_title,n=a.get(t)||[];n.push(e),a.set(t,n)}});const i=[],s=e?7:5;for(const[l,d]of a.entries()){const t=a.size>2&&d.length>s,p=n.includes(l),h=t&&!p?d.slice(0,s):d,m=!e&&r===l&&t,g=c.a._("See less","nux.topicPicker.see_less","Text on button to show fewer topics"),f=o.a.createElement(u.d,{marginBottom:8},o.a.createElement(u.d,{display:"flex",justifyContent:e?"center":"between",alignItems:"center",padding:1,marginStart:5,marginEnd:5,marginBottom:2},o.a.createElement(u.r,{size:"sm"},l),m&&o.a.createElement(u.S,{fullWidth:!1,onTap:()=>this.onExpandSectionToggle(l,!p)},o.a.createElement(u.T,{size:"sm",weight:"bold"},p?g:c.a._("See all","nux.topicPicker.see_all","Text on button to expand the number of topics shown")))),this.renderInterests(h,e,e&&t?o.a.createElement(pt,{clickHandler:()=>this.onExpandSectionToggle(l,!p),isSelected:!1,text:p?g:c.a._("See more","nux.topicPicker.see_more","Text on button to expand the number of topics shown")}):void 0));e?i.push(o.a.createElement(u.d,{key:l},f)):i.push(o.a.createElement(u.S,{key:l,onMouseEnter:()=>this.onHoverSection(l),onMouseLeave:this.onHoverLeaveSection,onTap:()=>{}},f))}return o.a.createElement(o.a.Fragment,null,i)}),mt(this,"renderInterests",(e,t,n)=>{const{handleInterestClickFn:r,pickerType:a}=this.props;let i="xl_144";return a===j.s.CATEGORY_PICKER&&(i="lg_181_120"),[j.s.REFINED_CATEGORIZED_TOPIC_PICKER,j.s.CATEGORIZED_TOPIC_PICKER].includes(a)&&(i="lg_144_88"),o.a.createElement(u.d,{display:"flex",marginStart:t?0:5,marginTop:-1,justifyContent:t?"center":"start",wrap:!0},e.map((e,n)=>o.a.createElement(u.d,{key:n,padding:1},t?o.a.createElement(pt,{key:e.id,clickHandler:r(e),interest:e,isSelected:e.is_followed}):o.a.createElement(ut.a,{key:e.id,clickHandler:r(e),interest:e,isSelected:e.is_followed,size:i}))),n&&o.a.createElement(u.d,{padding:1},n))})}componentDidMount(){this.scrollContainer.current&&this.scrollContainer.current.addEventListener("scroll",this.handleScroll)}componentWillUnmount(){this.scrollContainer.current&&this.scrollContainer.current.removeEventListener("scroll",this.handleScroll)}render(){const{disableScroll:e,interests:t,isNarrow:n,pickerType:r}=this.props,a=r===j.s.CATEGORY_PICKER?{}:{paddingBottom:"40px"},i=r===j.s.REFINED_CATEGORIZED_PILLS_TOPIC_PICKER;return t.length>0&&oe.b.localStorage.setItem("signupInterestsPickerStartTime",Date.now()),o.a.createElement(u.d,{ref:this.scrollContainer,dangerouslySetInlineStyle:{__style:a},flex:n?"shrink":"grow",height:"100%",overflow:e?"visible":"scrollY",paddingX:n?0:2,width:n?"65%":"100%"},t.length>0?o.a.createElement(u.d,{ref:this.gridContainer},j.o.has(r)?this.renderCategories(i):o.a.createElement(lt.a,{name:"web_nux_topic_pills",isEligible:r!==j.s.CATEGORY_PICKER},({anyEnabled:e})=>this.renderInterests(t,e))):o.a.createElement(u.M,{accessibilityLabel:c.a._("Loading default interests"),show:!0}))}}),_t=n("zwad"),bt=n("573u");function wt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Et=Object(a.connect)(({mostRecentPin:e})=>({mostRecentPinImages:e&&e.plp_image_signatures?e.plp_image_signatures:[]}),()=>({}))(class extends r.PureComponent{constructor(...e){super(...e),wt(this,"state",{currentCategory:null,hoverCategory:null,defaultInterests:[],defaultInterestsSet:new Set,addedContextualTopics:new Set,numTopicsToShow:null}),wt(this,"handleInterestClickFn",e=>()=>{const{selectedInterests:t,onSelectedInterestsChange:n}=this.props,r=!Object(s.b)(t,e);n([e],r),this.logInterestClick(r),this.contextualUpdateInterests(new Set([e.id]))}),wt(this,"logInterestClick",e=>{const{isRenux:t}=this.props,n=e?1030:1151;Object(A.a)(101,{component:36,element:n,view:t?213:24,viewParameter:172})}),wt(this,"componentName",j.n),wt(this,"recordRenderLogToServer",()=>{const e=this.renderTimers.pop();e.end(),ct.default.logToServer(ct.default.SERVER_LOG_TYPE.RENDER_TIME,ct.default.HTTP_METHOD.POST,{timing:e.getCompletedTime(),component:this.componentName})}),wt(this,"renderTimers",[]),wt(this,"onClickCategory",e=>{const{isRenux:t}=this.props;Object(A.a)(101,{component:36,element:11870,view:t?213:24,viewParameter:172}),this.setState({currentCategory:e})}),wt(this,"hoverCategory",(e,t)=>{this.setState({hoverCategory:e?t:null})})}getExtraImageSignal(){const{plpImages:e,blpImages:t}=Object(s.a)(),{mostRecentPinImages:n}=this.props,r=e.concat(t);return n.concat(r)}componentDidMount(){const{hideFollowedInterests:e,isRenux:t,pickerType:n,selectedCategories:r,selectedInterests:o}=this.props;let a,i=!1;n===j.s.CATEGORY_PICKER?a=P.a.create("NuxInterestsCategoriesResource",{urlParams:_t.a.getQueryStringParams()}):j.p.has(n)||j.o.has(n)||n===j.s.SIDEBAR_TOPIC_PICKER?(a=P.a.create("NuxInterestsRefinedResource",{extraImageSignal:this.getExtraImageSignal(),labelPfy:j.o.has(n),urlParams:_t.a.getQueryStringParams(),refineWithInterestIds:r.map(e=>e.id),returnCategorized:j.o.has(n)||n===j.s.SIDEBAR_TOPIC_PICKER}),i=t):a=P.a.create("NuxInterestsResource",{is_renux:t,logNetworkTimer:!0,loggerComponentName:j.n,extraImageSignal:this.getExtraImageSignal(),hideFollowedInterests:e,urlParams:_t.a.getQueryStringParams()}),a.callGet({showError:!1},{retries:1}).then(e=>{const t=e.resource_response&&e.resource_response.data;if(t){this.logSignupTiming();const e=t.filter(e=>!i||!e.is_followed),n=this.mapInterestsForDisplay(o,e),r=this.state.defaultInterests;this.setState({defaultInterests:n},()=>{r!==n&&this.renderTimers.unshift((new bt.a).start())});const a=new Set;n.forEach(e=>{!0===e.is_followed&&a.add(e.id)}),Object.keys(a).length>0&&this.contextualUpdateInterests(a)}}).catch(e=>{st.a&&st.a.showError(e.message||c.a._("Unable to load topics","Error message when failed to load topics.","Error message when failed to load topics."))})}componentDidUpdate(e,t){const{defaultInterests:n}=this.state;n!==t.defaultInterests&&this.renderTimers.length&&this.recordRenderLogToServer(),n.length>0&&0===t.defaultInterests.length&&this.props.preselect&&this.preselectInterests()}getInterestsWithUpdatedIsFollowed(){const{selectedInterests:e}=this.props,{defaultInterests:t}=this.state,n=t.map(t=>(t.is_followed=Object(s.b)(e,t),t)),r=[...e.filter(e=>"type_ahead_search"===Object(s.e)(e))];return n.concat(...r)}logSignupTiming(){const e=oe.b.localStorage.getItem("signupTime");if(e){const t=Date.now()-e;t<j.x&&ct.default.logToServer(ct.default.SERVER_LOG_TYPE.SIGNUP_LOAD,ct.default.HTTP_METHOD.POST,{timing:t,component:"nux"}),oe.b.localStorage.removeItem("signupTime")}}mapInterestsForDisplay(e,t){const n=t.map(e=>({...e,is_followed:e.is_followed,label:e.name}));this.props.onSelectedInterestsChange(n.filter(e=>e.is_followed),!0);const r=new Set(e.map(e=>e.id)),o=n.filter(e=>!r.has(e.id));return e.concat(o)}preselectInterests(){const{numberToFollow:e,onSelectedInterestsChange:t}=this.props,{defaultInterests:n}=this.state,r=e||j.f;t(n.slice(0,r),!0)}contextualUpdateInterests(e){const{defaultInterests:t,defaultInterestsSet:n,addedContextualTopics:r}=this.state,o=[],a=[];let i=!1;t.forEach(t=>{if(o.push(t),n.add(t.id),e.has(t.id)&&!r.has(t.id)){const e=t.contextual_interests.filter(e=>!n.has(e.id));e.length>0&&("InsertionStrategy.INSERT_INPLACE"===t.contextual_insertion_strategy?o.push(...e):"InsertionStrategy.INSERT_AT_THE_END"===t.contextual_insertion_strategy&&a.push(...e),e.forEach(e=>{n.add(e.id)}),i=!0)}}),a.length>0&&o.push(...a),i&&this.setState({addedContextualTopics:new Set([...r,...e]),defaultInterests:o})}renderSidebar(e){const{currentCategory:t,hoverCategory:n}=this.state,r=c.a._("Picked for You","categorizedTopicPicker.PickedForYou","Category title for a collection of personalized topics just for the user");return o.a.createElement(u.d,{display:"flex",direction:"column",width:"33%"},o.a.createElement("div",{className:it()("hoverScrollbar")},o.a.createElement(u.d,{marginBottom:4},[r].concat(e).map(e=>{const a=e===(t||r),i=!a&&e===n?"lightGray":"transparent";return o.a.createElement(u.d,{key:e,margin:1,display:"flex"},o.a.createElement(u.S,{fullWidth:!1,onMouseEnter:()=>this.hoverCategory(!0,e),onMouseLeave:()=>this.hoverCategory(!1,e),onTap:()=>this.onClickCategory(e===r?null:e),rounding:"pill"},o.a.createElement(u.d,{color:a?"darkGray":i,padding:4,rounding:"pill"},o.a.createElement(u.T,{align:"left",size:"lg",color:a?"white":"darkGray",weight:"bold"},e))))}))))}render(){const{handleBottomScroll:e,isRenux:t,pickerType:n,selectedInterests:r}=this.props,{currentCategory:a,numTopicsToShow:i}=this.state,s=this.getInterestsWithUpdatedIsFollowed(),c=a?s.filter(e=>e.category_title===a):s,l=[...new Set(s.map(e=>e.category_title||"").filter(e=>!!e))],d=l.length>0&&n===j.s.SIDEBAR_TOPIC_PICKER,p=o.a.createElement(ft,{key:a,disableScroll:!!i&&i<=5,handleBottomScroll:e,handleInterestClickFn:this.handleInterestClickFn,interests:i?c.slice(0,i):c,isNarrow:d,isRenux:!!t,pickerType:n,selectedInterests:r});return d?o.a.createElement(u.d,{overflow:"hidden",height:"100%",display:"flex",alignContent:"between",justifyContent:"between",paddingX:7},this.renderSidebar(l),o.a.createElement(u.n,null),p):p}}),xt=n("DzJC"),St=n.n(xt),yt=n("vvax"),Ct=n("/5zs");function Ot(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const kt=o.a.createElement(u.d,{dangerouslySetInlineStyle:{__style:{background:"linear-gradient(rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.1))"}},height:20,left:!0,marginTop:-5,position:"absolute",right:!0,top:!0}),Tt=e=>e===j.s.CATEGORY_PICKER?3407:j.p.has(e)?3408:172;var It=Object(U.compose)(ae.e,Object(a.connect)(null,(function(e){return{dispatchSetNuxStepProgress:t=>e(Object(L.a)(t)),dispatchUpdateFollows:t=>e(Object(Y.d)(t,"renux")),dispatchSubmitOrientationContext:t=>e(Object(Y.b)(t)),setNuxPickerProgress:t=>e(Object(Y.a)(j.q,t))}})))(class extends r.Component{constructor(...e){super(...e),Ot(this,"state",{isBottom:!1}),Ot(this,"getButtonAttributes",()=>{const{hideFollowedInterests:e,isRenux:t,pickerType:n,numberToFollow:r,selectedCategories:o,selectedInterests:a}=this.props,{isBottom:s}=this.state;if(n===j.s.CATEGORY_PICKER){const n=o.length,a=Math.max(0,r-n),s=c.a.ngettext("Pick {{ numberLeftToFollow }} category","Pick {{ numberLeftToFollow }} categories",a,"nux.picker.next_button","number of categories left to pick"),l=t&&e?c.a._("Next","go to next step","go to next step"):i.i(s,{numberLeftToFollow:`${a}`});return{text:a>0?l:c.a._("Next","go to next step","go to next step"),isDisabled:a>0}}const l=a.length,u=n===j.s.STANDARD_TOPIC_PICKER&&s&&l>=j.i?0:Math.max(0,r-l),d=c.a.ngettext("Pick {{ numberLeftToFollow }} more","Pick {{ numberLeftToFollow }} more",u,"number of interests left to pick","number of interests left to pick"),p=t&&e?c.a._("Next","go to next step","go to next step"):i.i(d,{numberLeftToFollow:`${u}`});return{text:u>0?p:c.a._("Done"),isDisabled:u>0}}),Ot(this,"handleBottomScroll",e=>this.setState({isBottom:e})),Ot(this,"handleBottomScrollThrottled",St()(this.handleBottomScroll,50)),Ot(this,"handleNextClick",()=>{const{isRenux:e,selectedCategories:t,selectedInterests:n,followedInterests:r,pickerType:o,setNuxPickerProgress:a,dispatchUpdateFollows:i,dispatchSubmitOrientationContext:s,requestContext:c}=this.props;if(o===j.s.CATEGORY_PICKER){const e=Tt(o);return Object(A.a)(101,{component:17,element:96,view:this.viewType,viewParameter:e}),void this.logAndIncrementNuxStep(this.viewType,e)}let l;if(e){const e=t.length>0&&new Ct.c(c,"web_nux_topic_two_step_follow_categories").enabled()?t.reduce((e,t)=>(e[t.id]=t.is_followed,e),{}):{},n=r.reduce((e,t)=>(e[t.id]=t.is_followed,e),{});l=Promise.resolve(i({...e,...n}))}else{const e=[],t=[];n.forEach(n=>{e.push(n.id),t.push(n.log_data?n.log_data:null)});const r={interests:e.join(),log_data:JSON.stringify(t),referrer:"nux",user_behavior_data:Object(ot.a)()};l=Promise.resolve(s(r))}l.then(()=>{e||a(j.a),o!==j.s.STANDARD_TOPIC_PICKER&&Object(A.a)(101,{component:17,element:96,view:this.viewType,viewParameter:Tt(o)}),Object(A.a)(101,{component:17,element:96,view:this.viewType,viewParameter:172}),this.logAndIncrementNuxStep(this.viewType,172)})}),Ot(this,"logAndIncrementNuxStep",(e,t)=>{Object(A.a)(8900,{view:e,viewParameter:t}),this.props.incrementNuxStep()})}componentDidMount(){const{dispatchSetNuxStepProgress:e,isRenux:t,pickerType:n,setNuxPickerProgress:r}=this.props;t||r(j.w),this.viewType=t?213:24,e("topic"),[j.s.CATEGORY_PICKER,j.s.STANDARD_TOPIC_PICKER].includes(n)&&Object(A.a)(13,{view:this.viewType,viewParameter:172}),n!==j.s.STANDARD_TOPIC_PICKER&&Object(A.a)(13,{view:this.viewType,viewParameter:Tt(n)})}render(){const{hideFollowedInterests:e,isRenux:t,isSimpleRenux:n,onSelectedInterestsChange:r,personalizationCopy:{headerText:a,subHeaderText:i},pickerType:s,preselect:l,selectedCategories:d,selectedInterests:p,numberToFollow:h}=this.props,m=this.getButtonAttributes(),g=s===j.s.CATEGORY_PICKER?d:p,f=s===j.s.CATEGORY_PICKER,_=[j.s.CATEGORY_PICKER,j.s.REFINED_TOPIC_PICKER].includes(s),b=t&&!_;return o.a.createElement(u.d,{direction:"column",display:"flex",height:"100%"},o.a.createElement(u.d,{display:"visuallyHidden",role:"alert"},Object(yt.b)(c.a._("{{selectedTopicsCount}} of at least 5 topics selected","accessible label how many topics are selected","accessible label how many topics are selected"),{selectedTopicsCount:g.length})),o.a.createElement(u.d,{marginBottom:8,marginTop:b?8:4,paddingX:8,wrap:!0},o.a.createElement(u.r,{align:"center",size:"md"},a),i&&o.a.createElement(u.d,{marginTop:2},o.a.createElement(u.T,{align:"center"},i))),o.a.createElement(Et,{handleBottomScroll:this.handleBottomScrollThrottled,hideFollowedInterests:e,isRenux:t,isSimpleRenux:n,numberToFollow:h,onSelectedInterestsChange:r,pickerType:s,preselect:l,selectedCategories:d,selectedInterests:g}),o.a.createElement(u.d,{position:"relative"},!f&&kt,o.a.createElement(u.d,{"data-test-id":"nux-picker-done-btn",marginBottom:8,marginTop:8,paddingX:8},o.a.createElement(u.e,{color:"red",disabled:m.isDisabled,onClick:this.handleNextClick,size:"lg",text:m.text,type:"submit"}))))}});var Nt=n("C0mq");function vt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Pt extends r.Component{constructor(...e){super(...e),vt(this,"state",{followedInterests:[],isLoading:!1,nuxStep:this.getNextStepIndex(-1,this.props.steps,!1),selectedCategories:[],selectedInterests:[],userClickedBack:!1}),vt(this,"onComplete",()=>{const{handleComplete:e,isLandingPage:t,isRenux:n,dispatchUpdateFirstHomeFeedRequestAfterNuxFlag:r}=this.props;Object(A.a)(4105,{view:n?213:24,viewParameter:171}),n||r(!0),e(),t&&this.handleNavigate("/")}),vt(this,"mounted",!1),vt(this,"handleNavigate",e=>{const{history:t}=this.props;t.push({pathname:e,state:{completedNux:!0}})}),vt(this,"handleSelectedInterestsChange",(e,t)=>{this.setState(this.isCategoryPickerStep()?(n,r)=>{return{selectedCategories:this.getUpdatedSelectedInterests(n.selectedCategories,e,t)}}:(n,r)=>{const o=this.getUpdatedSelectedInterests(n.selectedInterests,e,t),a=this.getUpdatedFollowInterests(n.followedInterests,e,t),{dispatchSetNuxSelectedInterestImages:i}=r;return i(o.reduce((e,t)=>{if(t&&t.images&&t.images["400x"]){const n={bestPinsImages:t.best_pins_images,height:t.images["400x"].height,width:t.images["400x"].width,url:t.images["400x"].url};e.push(n)}return e},[])),{selectedInterests:o,followedInterests:a}})}),vt(this,"nuxSteps",{NuxWelcomeNameStep:rt,NuxGenderStep:Q,NuxLocaleCountryStep:ce,NuxPicker:It,NuxExtensionUpsell:X,NuxEducationLoader:H}),vt(this,"onPrevStepClickFn",e=>{const{steps:t,isRenux:n}=this.props,r=t[e].moduleName,o=this.getPickerType();return()=>{const t={NuxWelcomeNameStep:259,NuxGenderStep:3120,NuxLocaleCountryStep:3139,NuxPicker:Tt(o)}[r];t&&Object(A.a)(101,{component:17,element:34,view:n?213:24,viewParameter:t}),e>0&&this.setState({nuxStep:e-1,userClickedBack:!0})}})}componentDidMount(){const{isRenux:e,isSimpleRenux:t,requestContext:n}=this.props;e&&!t&&(new Ct.c(n,"web_renux_topic_two_step").enabled(),new Ct.c(n,"web_renux_topic_two_step_row").enabled()),this.mounted=!0,Object(A.a)(4104,{view:e?213:24,viewParameter:170})}componentWillUnmount(){this.mounted=!1}getUpdatedFollowInterests(e,t,n){let r=[...e];return t.forEach(e=>{const t={...e,is_followed:n};let o=!1;r=r.map(e=>e.id===t.id?(o=!0,t):e),o||r.push(t)}),r}getUpdatedSelectedInterests(e,t,n){let r=[...e];return t.forEach(t=>{const o=Object(s.b)(r,t);n&&!o?r.push({...t,is_followed:n}):!n&&o&&(r=e.filter(e=>e.id!==t.id))}),r}getPickerType(){const{steps:e}=this.props,{nuxStep:t}=this.state,n=e[t];return this.getPickerTypeFromStep(n)}getPickerTypeFromStep(e){const t=e.options&&e.options.pickerType;return t&&Object.values(j.s).includes(t)?t:j.s.STANDARD_TOPIC_PICKER}isCategoryPickerStep(){return this.getPickerType()===j.s.CATEGORY_PICKER}isRefinedPickerStep(){return j.p.has(this.getPickerType())}getPickerSubHeaderText(){const{requestContext:e}=this.props,t=new Ct.b(e,"web_nux_picker_subheader");return t.check("variant_0")?c.a._("Pro tip: We use topics you pick here to build your home feed","nux.picker.subheader","message about what a topic is and why users should choose it "):t.check("variant_1")?c.a._("We use the topics you pick to find ideas you like ","nux.picker.subheader","message about what a topic is and why users should choose it "):""}getPersonalizationCopy(e){const{hideFollowedInterests:t,isRenux:n,isSimpleRenux:r,requestContext:o,steps:a}=this.props;let s,l;const u=e.moduleName,d=a.map(e=>e.moduleName).indexOf(u)===a.length-2;switch(u){case"NuxWelcomeNameStep":return{headerText:new Ct.c(o,"web_nux_simplified_welcome").enabledWithNoActivation()?c.a._("Welcome to Pinterest!","nux.welcomeStep.greeting","Nux welcome step heading"):c.a._("Welcome to Pinterest","greeting on welcome name step","greeting on welcome name step"),subHeaderText:c.a._("Your answers to the next few questions will help us find the right ideas for you","header on nux welcome and name editing step","header on nux welcome and name editing step")};case"NuxGenderStep":return s=c.a._("How do you identify?","Header in NUX gender step.","Header in NUX gender step."),l="",n&&(s=c.a._("It’s time to refresh your feed!","Title on the modal asking user's gender","Title on the modal asking user's gender"),l=c.a._("How would you describe yourself?","Subtitle on the modal asking user's gender","Subtitle on the modal asking user's gender")),{headerText:s,subHeaderText:l};case"NuxLocaleCountryStep":return{headerText:c.a._("Pick your language and country/region","Header in NUX locale/country step","Header in NUX locale/country step")};case"NuxPicker":const e=r&&new Ct.c(o,"web_topic_educator_lego").enabledWithNoActivation();return!n&&this.isCategoryPickerStep()?s=i.i(c.a.ngettext("Pick at least {{numCategoriesToSelect}} category you want to explore","Pick at least {{numCategoriesToSelect}} categories you want to explore",j.d,"nux.topicPicker.heading","Header in NUX topic picker step, asking user to select some number of categories"),{numCategoriesToSelect:j.d.toString()}):!n&&this.isRefinedPickerStep()?(s=i.i(c.a.ngettext("Now pick {{numberToFollow}} (or more!) topics to go deeper","Now pick {{numberToFollow}} (or more!) topics to go deeper",j.e,"nux.topicPicker.heading","Header in NUX topic picker step, asking user to select some number of topics"),{numberToFollow:j.e.toString()}),l=this.getPickerSubHeaderText()):n&&this.isCategoryPickerStep()?s=c.a._("Pick the categories you want to explore","nux.topicPicker.heading","Header in NUX topic picker step, asking users to select some categories"):n&&this.isRefinedPickerStep()?s=c.a._("Now pick a few topics to go deeper","nux.topicPicker.heading","Header in NUX topic picker step, asking users to select some topics"):n&&t?(s=c.a._("What are you into these days?","Header in ReNUX topic picker step.","Header in ReNUX topic picker step."),l=c.a._("Pick the topics you want to see in your home feed","Subheader in ReNUX topic picker step.","Subheader in ReNUX topic picker step.")):e?(s=c.a._("Which topics do you want to see more of?","nux.topicPicker.heading","Header in NUX topic picker step for topic education experience."),l=c.a._("Ideas you see in you home feed are based on topics you like","nux.topicPicker.subheading","Subheader in NUX topic picker step for topic education experience.")):(s=d?c.a._("Last step! Tell us what you're interested in","Header in NUX topic picker step.","Header in NUX topic picker step."):c.a._("Tell us what you're interested in","Header in NUX topic picker step.","Header in NUX topic picker step."),l=this.getPickerSubHeaderText()),{headerText:s,subHeaderText:l};case"NuxExtensionUpsell":return{headerText:s=d?c.a._("Last step! Get our handy browser button","Header in NUX browser extension upsell step.","Header in NUX browser extension upsell step."):c.a._("Get our handy browser button","Header in NUX browser extension upsell step.","Header in NUX browser extension upsell step."),subHeaderText:c.a._("Quickly save any idea you find around the web","Subheader in NUX browser extension upsell step","Subheader in NUX browser extension upsell step")};default:return{}}}nuxStepToRender(e,t){const{hideFollowedInterests:n,isRenux:r,isSimpleRenux:a,requestContext:i}=this.props,{followedInterests:s,selectedCategories:c,selectedInterests:l}=this.state,u=e.moduleName,d=this.nuxSteps[u],p=this.hasNuxStep("NuxGenderStep"),h=r&&n?j.u:j.e,m=r?j.t:j.d;return o.a.createElement(d,Object.assign({},e.options,{key:this.getPickerType(),experiments:i.experiments,followedInterests:s,hasGenderStep:p,hideFollowedInterests:n,incrementNuxStep:this.incrementNuxStep(this.state.nuxStep),isRenux:r,isSimpleRenux:a,numberToFollow:this.isCategoryPickerStep()?m:h,onSelectedInterestsChange:this.handleSelectedInterestsChange,personalizationCopy:this.getPersonalizationCopy(e),pickerType:this.getPickerType(),requestContext:i,selectedCategories:c,selectedInterests:l,showTableOfContents:t,toggleLoadingIndicator:e=>this.setState({isLoading:e})}))}getNextStepIndex(e,t,n){const{isRenux:r}=this.props;let o=e+1;if(n)return o;if(!r)for(;o<t.length&&t[o].isCompleted;)o+=1;return o}incrementNuxStep(e){const{steps:t}=this.props,{userClickedBack:n}=this.state,r=this.getNextStepIndex(e,t,n);return r>=t.length?this.onComplete:()=>{(t=>{if(e!==t)this.setState({nuxStep:t})})(r)}}hasNuxStep(e){const{steps:t}=this.props;return t.some(t=>t.moduleName===e)}render(){const{handleDismiss:e,isLandingPage:t,isRenux:n,isSimpleRenux:r,steps:a}=this.props,{isLoading:i,nuxStep:s}=this.state,c=e=>["NuxEducationLoader"].includes(e),l=a.filter(e=>!c(e.moduleName)),u=c(a[s].moduleName)||t,d=a.filter(e=>j.p.has(this.getPickerTypeFromStep(e))).length>0,p=n?!u&&!r&&s>0:!u&&!r&&s>1;return o.a.createElement(Ce,{currentIndex:s,hideDots:(n||r)&&!d||u,isLoading:i,numSteps:l.length,onClose:u||!n&&!r?void 0:e,onPrevStepClick:p?this.onPrevStepClickFn(s):void 0,stepName:a[s].moduleName},this.nuxStepToRender(a[s],!u))}}vt(Pt,"defaultProps",{hideFollowedInterests:!1,isRenux:!1,isSimpleRenux:!1});t.a=Object(U.compose)(ae.e,Object(a.connect)(()=>({}),e=>({dispatchSetNuxSelectedInterestImages:t=>e(function(e){return{type:"SET_NUX_SELECTED_INTEREST_IMAGES",payload:{images:e}}}(t)),dispatchUpdateFirstHomeFeedRequestAfterNuxFlag:t=>e(Object(Y.c)(t))})),Nt.a)(Pt)},UPfj:function(e,t,n){n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"f",(function(){return u})),n.d(t,"b",(function(){return d}));var r=n("gxu6"),o=n("QLqj"),a=n("oZBM");function i(e,t=!1){return t?a.a.tier1:e?(e=e||"",a.f.has(e)?a.a.tier1:a.g.has(e)?a.a.tier2:a.a.tier3):a.a.tier1}function s(){r.b("hasBeenShownLoginModalInOpen","true",a.e)}function c(e){o.b.localStorage.setItem("uoiou",!!e)}function l(){return o.b.localStorage.getItem("uoiou")||!1}function u(){o.b.sessionStorage.setItem(a.d,a.c)}function d(){return l()||o.b.sessionStorage.getItem(a.d)===a.c}},VL22:function(e,t,n){n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return l}));var r=n("17x9"),o=n.n(r),a=n("kmwA");const i={FACEBOOK:"facebook",GOOGLE_ONE_TAP:"google_one_tap",GOOGLE:"google",EMAIL:"email",OTHER:"other"},s=e=>e.facebook_id?i.FACEBOOK:e.google_open_id_token?i.GOOGLE_ONE_TAP:e.gplus_code||e.gplus_id_token?i.GOOGLE:e.email?i.EMAIL:i.OTHER,c=(o.a.shape({credentials:o.a.shape({}),userData:o.a.shape({}),type:o.a.oneOf(Object.values(i))}),(e="")=>e in a.a.settings.MINIMUM_AGE_BY_EU_COUNTRY),l=e=>a.a.settings.EN_COUNTRIES_WITH_MANDATORY_AGE.includes(e)||a.a.settings.LATAM_AGE_COLLECTION.has(e)},dg5e:function(e,t,n){n.r(t);n("bZMm");var r=n("JW66"),o=n("+NLT"),a=n("eOdZ"),i=n("kmwA"),s=n("28DW"),c=n("zwad");const l={_parseJson:function(e){return e.json()},_throwError:function(e){const t=new Error(e.statusText);throw t.response=e,l._reconstructError(t),t},_checkStatus:function(e){return 200===e.status||401===e.status?e:(l._throwError(e),{})},_crossDomainRequest:function(e,t,n){if("GET"!==n&&"POST"!==n)return Promise.resolve({});const a={credentials:"include",mode:"cors"};return"POST"===n&&(a.method="POST",a.body=t,a.headers={"Content-type":"application/x-www-form-urlencoded; charset=UTF-8","X-Pinterest-InstallId":o.a.instance.unauth_id},o.a.instance.unauth_id||Object(s.a)(`unauth.auth_handshake.cross_domain.no_unauth_id.${n}`)),fetch(e,a).then(l._checkStatus).then(l._parseJson).then(e=>"success"===e.status?Promise.resolve(e):e.code===r.a.LOGIN_MFA_REQUIRED?(e.api_error_code=e.code,Promise.reject(e)):(l._throwError(e),{})).catch(e=>{throw e})},_reconstructError:e=>{!e.api_error_code&&e.response&&(e.api_error_code=e.response.code,e.message=e.response.message)},_verifyAndGetToken:function(){const e=i.a.settings.ACCOUNTS_PINTEREST_URL+"/v3/handshake/verify/";return l._crossDomainRequest(e,"","GET")},exchangeTokenAndSetSession:function(e,t=!1){return a.a.create("HandshakeSessionResource",{token:e,isRegistration:t}).callCreate()},verifyLoggedInStatus:function(){l._verifyAndGetToken().then(e=>{if(e&&e.data){const t=e.data;l.exchangeTokenAndSetSession(t).then(e=>{window.location.reload()},e=>{})}},e=>{})},_setUpRegisterParameters:function(e){const t={};if(t.email=e.email||"",t.username=e.username||"",t.password=e.password||"",t.first_name=e.first_name||"",t.last_name=e.last_name||"",t.country=e.country||"",t.locale=o.a.instance.locale,t.referrer=o.a.instance.referrer,e.age){const n=new Date;n.setFullYear(n.getFullYear()-e.age);const r=parseInt(n/1e3,10);t.birthday=r.toString()}if(e.custom_gender&&(t.custom_gender=e.custom_gender),e.gender&&(t.gender=e.gender),e.business_name&&(t.account_type=e.account_type,t.business_name=e.business_name,t.first_name=e.business_name),o.a.instance.invite_code&&(t.invite_code=o.a.instance.invite_code),e.facebook_id){const n=o.a.instance.facebook_token||e.facebook_token||"";t.facebook_id=e.facebook_id,t.facebook_token=n,t.social_username=e.social_username||""}else(e.gplus_code||e.gplus_id_token)&&(t.password=e.password||"",t.one_time_code=e.gplus_code,t.id_token=e.gplus_id_token,t.redirect_uri=e.gplus_redirect_uri);return e.recaptchaV3Token&&(t.recaptcha_v3_token=e.recaptchaV3Token),c.a.getQueryStringFromObject(t)},_setUpLoginParameters:function(e,t){const n={};if(e.username_or_email&&(n.username_or_email=e.username_or_email.trim(),n.password=e.password,n.referrer=o.a.instance.referrer),e.facebook_id){const t=o.a.instance.facebook_token||e.facebook_token||"";n.facebook_id=e.facebook_id,n.facebook_token=t,n.facebook_autologin=e.facebook_autologin||!1}return e.gplus_id_token&&(n.gplus_id_token=e.gplus_id_token,n.gplus_access_token=e.gplus_access_token,n.gplus_expires_at=e.gplus_expires_at,n.gplus_autologin=e.gplus_autologin||!1),e.mfa_token&&(n.mfa_token=e.mfa_token),t&&(n.token=t),c.a.getQueryStringFromObject(n)},_getRegisterRequestUrl:function(e){let t="/v3/register/email/handshake/";return e.facebook_id&&(t="/v3/register/facebook/handshake/"),(e.gplus_code||e.gplus_id_token)&&(t="/v3/register/gplus/handshake/"),e.business_name&&(t="/v3/register/partner/handshake/"),i.a.settings.ACCOUNTS_PINTEREST_URL+t},_getLoginRequestUrl:function(e){let t="/v3/login/handshake/";return e.facebook_id&&(t="/v3/login/facebook/handshake/"),e.gplus_id_token&&(t="/v3/login/gplus/handshake/"),e.mfa_token&&(t="/v3/login/mfa/handshake/"),i.a.settings.ACCOUNTS_PINTEREST_URL+t},registerUser:function(e){const t=l._getRegisterRequestUrl(e),n=l._setUpRegisterParameters(e);return l._crossDomainRequest(t,n,"POST")},loginUser:function(e,t){const n=l._getLoginRequestUrl(e),r=l._setUpLoginParameters(e,t);return l._crossDomainRequest(n,r,"POST")}};t.default=l},iFas:function(e,t,n){t.a={ACCOUNT_SWITCHER_FLYOUT:"account_switcher_flyout",ACCOUNT_SWITCHER_MODAL:"account_switcher_modal",ACCOUNT_RECOVERY:"account_recovery",BOARD_INVITE:"board_invite",CLOSEUP:"closeup",CLOSEUP_BANNER:"closeup_banner",FOLLOW_BUTTON:"followbtn",FLASHLIGHT_GRID:"flashlight_grid",GOOGLE_ONE_TAP:"google_one_tap_modal",LOGIN_PAGE:"login_page",INSPIRED_BANNER:"inspired_banner",MFA_LOGIN_PAGE:"mfa_login_page",HYBRID_CLICKTHROUGH:"hybrid_clickthrough",HYBRID_BANNER:"hybrid_banner",PIN_GRID:"pin_grid",PIN_IMAGE:"pin_image",RESPONSE_FLYOUT:"response_flyout",STORY_PIN_PAGE:"story_pin_page",UNAUTH_BANNER:"unauth_banner",UNAUTH_HEADER:"unauth_header"}},"liz/":function(e,t,n){n.d(t,"a",(function(){return g})),n.d(t,"e",(function(){return f})),n.d(t,"d",(function(){return _})),n.d(t,"c",(function(){return b})),n.d(t,"k",(function(){return w})),n.d(t,"b",(function(){return E})),n.d(t,"j",(function(){return x})),n.d(t,"i",(function(){return S})),n.d(t,"g",(function(){return y})),n.d(t,"f",(function(){return C})),n.d(t,"h",(function(){return O}));var r=n("xAAE"),o=n("JW66"),a=n("iFas"),i=n("0G5S");const s=e=>"undefined"!=typeof window?Object(i.a)(e):null,c=(e,t)=>{"undefined"!=typeof window&&Object(i.c)(e,t)},l={getAccounts:()=>s(o.a.MULTIPLE_ACCOUNTS),getAccountsJSON:()=>l.getAccounts()?JSON.parse(l.getAccounts()):{},getGroupId:()=>{const e=s(o.a.MULTIPLE_ACCOUNTS_GROUP);return e?JSON.parse(e):null},setAccounts:e=>c(o.a.MULTIPLE_ACCOUNTS,e),setGroupId:e=>c(o.a.MULTIPLE_ACCOUNTS_GROUP,JSON.stringify(e))};var u=l,d=n("xk4V"),p=n.n(d),h=n("D2p8"),m=n("28DW");const g=4,f=()=>u.getAccountsJSON(),_=()=>Object.keys(f()).length,b=()=>({[o.a.MULTIPLE_ACCOUNTS]:u.getAccountsJSON(),[o.a.MULTIPLE_ACCOUNTS_GROUP]:u.getGroupId()}),w=(e,t,n)=>{let r=u.getGroupId();r||(r=(()=>{const e=p()();return Object(m.g)("web_account_switcher.utils.group_created",{group_id:e,group_count:_()}),e})(),u.setGroupId(r));const o={group_id:r,group_count:_()};let i="";n&&(i=n===a.a.ACCOUNT_SWITCHER_MODAL?"modal.":"flyout."),Object(m.g)(`web_account_switcher.${i}${e}`,Object.assign({},t,o))},E=(e,t,n)=>{const r=u.getAccountsJSON();r[e.id]=(e=>{const t={id:e.id,username:e.username,email:e.email,fullName:e.fullName||e.full_name,imageMediumUrl:e.imageMediumUrl||e.image_medium_url,imageLargeUrl:e.imageLargeUrl||e.image_large_url};return t.fullName&&t.imageMediumUrl&&t.imageLargeUrl||w("utils.incomplete_user_values"),e.partner&&e.partner.is_create?{...t,partner:{is_create:e.partner.is_create}}:t})(e),u.setAccounts(JSON.stringify(r)),t&&n&&w("new_account_add_success",{method:t,user_added:e.id},n)},x=e=>{const t=u.getAccountsJSON();delete t[e],u.setAccounts(JSON.stringify(t))},S=(e,t)=>{if(!(()=>!!u.getAccounts())()||e&&!(e.id in f())){if(e.partner&&e.partner.is_linked_business&&t)return void E({...e,email:t.partner&&t.partner.is_linked_business?t.partner.biz_ownership_email:""});E(e)}},y=(e,t,n)=>{w("switch_account_success",{destination_user_id:t},n),Object(r.a)(e)},C=(e,t)=>{h.c.resume(h.a),w("switch_account_failure",{destination_user_id:e},t)},O=e=>{h.c.resume(h.b),Object(m.a)(`web.dismiss_account_switcher.${e}`)}},oZBM:function(e,t,n){n.d(t,"a",(function(){return r})),n.d(t,"f",(function(){return o})),n.d(t,"g",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"e",(function(){return s})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return l}));const r={tier1:"tier1",tier2:"tier2",tier3:"tier3"},o=new Set(["AU","US","CA","IE","NZ","GB"]),a=new Set(["AT","BE","CH","CZ","DK","ES","NO","PT","SE","NL"]),i=60,s=12,c="openUnauthType",l="OPEN_UNAUTH"},q23S:function(e,t,n){n.d(t,"a",(function(){return l}));var r=n("q1tI"),o=n.n(r),a=n("Ye/N"),i=n("MKeS"),s=n("n6mq");const c=Object(i.a)({resolved:{},chunkName:()=>"FullPageSignup",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:()=>n.e("FullPageSignup").then(n.bind(null,"pXxl")),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then(e=>(this.resolved[t]=!0,e))},requireSync(e){const t=this.resolve(e);return n(t)},resolve(){return"pXxl"}});function l(e){return o.a.createElement(c,Object.assign({},e,{fallback:o.a.createElement(s.d,{display:"flex",justifyContent:"center",alignItems:"center"},o.a.createElement(s.M,{accessibilityLabel:a.a._("Loading signup form"),show:!0}))}))}},shJ5:function(e,t,n){var r=n("q1tI"),o=n.n(r),a=n("Ye/N"),i=n("n6mq");const s={loadingIndicatorMask:{position:"absolute",backgroundColor:"#fff",top:"0",left:"0",right:"0",bottom:"0",opacity:"0.7",borderRadius:"8px",zIndex:"100"},spinner:{position:"absolute",top:"0",left:"0",right:"0",bottom:"0",opacity:"1",display:"flex",alignItems:"center",justifyContent:"center",zIndex:"101"}};t.a=()=>o.a.createElement("div",null,o.a.createElement("div",{style:s.spinner},o.a.createElement(i.M,{accessibilityLabel:a.a._("Loading"),show:!0})),o.a.createElement("div",{style:s.loadingIndicatorMask}))},vVbV:function(e,t,n){function r(e){return{type:"SET_NUX_PROGRESS",payload:{step:e}}}n.d(t,"a",(function(){return r}))},"x/Ro":function(e,t,n){var r=n("dg5e"),o=n("+NLT"),a=n("eOdZ"),i=n("QLqj"),s=n("kmwA"),c=n("JW66"),l=n("28DW");const u=new Map([[1,"INVALID_PARAMETERS"],[100,"INVALID_NETWORK_ACCESS_TOKEN"],[105,"FACEBOOK_ACCOUNT_NOT_LINKED"],[12,"API_SERVER_ERROR"],[1202,"LOGIN_MFA_TOKEN_INVALID"],[1203,"MFA_CONNECTION_ERROR"],[13,"API_DOWN"],[181,"GPLUS_CONNECTION_ERROR"],[14,"API_SERVER_SPAM_CONTENT"],[16,"API_REQUEST_TIMEOUT"],[50,"API_ERROR_PIN_NOT_FOUND"],[77,"INVALID_PASSWORD_FB_USER"],[78,"INVALID_PASSWORD_ERROR_CODE"],[79,"INVALID_EMAIL_ERROR_CODE"],[80,"INVALID_EMAIL_OR_PASSWORD"],[82,"LOGIN_DEACTIVATED_USER"],[83,"LOGIN_POLICY_VIOLATION_USER"],[85,"AUTO_PASSWORD_RESET_ERROR_CODE"],[86,"LOGIN_PANICKED_USER"],[87,"LOGIN_SOFT_BANNED_USER"],[93,"API_ERROR_UNDERAGE_REGISTER_ATTEMPT"],[99,"LOGIN_PASSWORD_NOT_CREATED"],[8,"API_LIMIT_EXCEEDED_ERROR"],[9,"API_EVENT_BLOCKED_ERROR"],[19,"USER_IN_SAFE_MODE"],[84,"LOGIN_VOLUNTARILY_DEACTIVATED_USER"],[85,"LOGIN_BAD_PASSWORD_ASK_RESET"],[1201,"LOGIN_MFA_REQUIRED"],[30,"LOGIN_USER_NOT_FOUND"],[88,"LOGIN_HARD_BANNED_USER"],[429,"RESPONSE_CODE_TOO_MANY_REQUESTS"]]);function d(e,t,n="unknown_source",r=!1){if(e){const o=e.http_status===c.a.RESPONSE_CODE_TOO_MANY_REQUESTS?c.a.RESPONSE_CODE_TOO_MANY_REQUESTS:e.api_error_code;let a=o;u.has(o)&&(a=u.get(o));const{container:i}=t;r?Object(l.a)(`unauth_web_client_cctld_login_api_error.${String(a)}.${i||"unknow_container"}.${n}`):Object(l.a)(`unauth_web_client_login_api_error.${String(a)}.${i||"unknow_container"}.${n}`)}}var p=n("UPfj"),h=n("VL22"),m=n("53sj");const g=function(e){return e.mfa_token?"mfa_token":e.mfa_resend?"mfa_resend":e.facebook_id?h.a.FACEBOOK:e.google_open_id_token?h.a.GOOGLE_ONE_TAP:e.gplus_id_token?h.a.GOOGLE:e.phone_number?"phone_number":e.username_or_email?h.a.EMAIL:h.a.OTHER},f=function(e,t,n=!1){let r="referrer_unknown";try{const e=document.referrer;r=e?e.indexOf("/t.co/")>-1?"twitter":e.indexOf("google.")>-1?"google":e.indexOf("bing.")>-1?"bing":e.indexOf("facebook.")>-1?"facebook":"other":"direct"}catch(u){}const o=g(e),a=t===Object(t)?t.hybridTier:"tier_unknown",i=t===Object(t)?t.container:"container_unknown";Object(l.a)("login.referrer."+r+"."+o),Object(l.a)("login.container."+i+"."+o),Object(l.a)("login.type."+o);const s=g(e)||"method_unknown",c=t.page||"page_unknown";e.gplus_autologin?n?(Object(l.a)("mweb_autologin.google_success"),Object(l.h)("new_mweb_autologin_google",{page:c,referrer:r,container:i,hybridTier:a})):(Object(l.a)("web_autologin_google"),Object(l.h)("new_web_autologin_google",{page:c,referrer:r,container:i,hybridTier:a})):e.facebook_autologin?(Object(l.a)("web_autologin_facebook"),Object(l.h)("new_web_autologin_facebook",{page:c,referrer:r,container:i,hybridTier:a})):(Object(l.a)(`web_login.${s}.success.${c}.${i}.${r}.${a}`),Object(l.h)(`new_web_login.${s}.success`,{page:c,referrer:r,container:i,hybridTier:a}))},_=(e,t)=>{Object(l.a)(`web_cross_domain_login.${e}.${g(t)}`)};t.a=function(e,t={},n=null,c=!1,l,u,h=!1){if(function(e){return!e.mfa_resend&&!!e.username_or_email}(e)){if(-1!==s.a.settings.CORS_HANDSHAKE_DOMAINS.indexOf(o.a.instance.origin))return function(e,t,n){return _("attempt",e),r.default.loginUser(e,t).then(t=>{if(t&&t.data){_("success_with_token",e);const o=t.data;return r.default.exchangeTokenAndSetSession(o).then(t=>(_("success_token_exchanged",e),f(e,n),Promise.resolve()),t=>{throw _("success_token_not_exchanged",e),t})}throw _("success_without_token",e),new Error},t=>{throw _("failure",e),d(t,n,g(e),!0),t})}(e,u,t)}e.switch_account&&(e.get_user=!!c||e.get_user);const b=c?null:i.b.localStorage.getItem("visitedPagesBeforeLogin"),w={...e,app_type_from_client:7===o.a.instance.app_type?7:5,visited_pages_before_login:b?JSON.stringify(b):null,recaptchaV2Token:l,recaptchaV3Token:u};return a.a.create("UserSessionResource",w).callCreate({showError:!1,async:!0}).then(n=>(f(e,t,h),Object(p.e)(!1),Object(m.a)("login").then(()=>n)),n=>(d(n,t,g(e)),Promise.reject(n)))}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/js/RenuxContainerCommon-9108e432dca69c037738.mjs.map