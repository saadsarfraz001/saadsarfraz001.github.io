(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["PinSaveButtonCommon",13,52],{"0YPa":function(e,t,n){var i=n("q1tI");t.a=(e,t)=>{const n=Object(i.useRef)(()=>{});Object(i.useEffect)(()=>{n.current=e},[e]),Object(i.useEffect)(()=>{if(null===t)return()=>{};const e=setInterval(()=>n.current(),t);return()=>clearInterval(e)},[t])}},"2qKt":function(e,t,n){var i=n("q1tI"),a=n.n(i),o=n("/MKj"),r=(n("17x9"),n("/5zs")),s=n("Vzit"),c=n("vh5K"),l=n("pLLR"),u=n("ANjH");function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const p={shouldUsePlacedExperience:!0,dispatchMountActionDuringSSR:!1};t.a=(e,t={},n)=>i=>{const m=function(e){return t=>{return{experience:t.experiences.eligibleExperiences[e]}}}(e);n=Object.assign({},p,n);const h=function(e,t,n=!0,i=!0,o){var l,u;return u=l=class extends a.a.Component{constructor(e){super(e),d(this,"state",{extraContext:void 0}),d(this,"setExtraContextState",e=>this.setState({extraContext:e}))}componentDidMount(){this.dispatchPlacementMount(!1)}UNSAFE_componentWillUpdate(n,i){const{dispatch:a,experience:o,requestContext:l}=n,u=new r.c(l,"web_bypass_eligible_experience_v2").enabledWithNoActivation();let d=t;if(u&&"function"==typeof t){const o=t(this.props,this.state);d=t(n,i.extraContext||{}),JSON.stringify(o)!==JSON.stringify(d)&&a(Object(s.c)(e,d,u))}else{if("function"==typeof t){const e=i.extraContext||{};d=t(n,e)}if(!Object(c.d)(o)&&"function"==typeof t&&d&&Object.keys(d).length){const n=t(this.props,this.state);JSON.stringify(n)!==JSON.stringify(d)&&a(Object(s.c)(e,d))}}!o||this.props.experience&&o.id===this.props.experience.id||a(Object(s.i)(e,d))}componentWillUnmount(){const{dispatch:t}=this.props;t(Object(s.k)(e))}dispatchPlacementMount(n){const{dispatch:i,requestContext:a}=this.props;let o={};o="function"==typeof t?t(this.props,this.state):Object.assign({},t);const c=!n&&new r.c(a,"web_bypass_eligible_experience_v2").enabled();i(Object(s.j)(e,o,n,c))}render(){const{experience:e}=this.props;return a.a.createElement(o,Object.assign({},this.props,{setPlacementExtraContext:this.setExtraContextState,experience:Object(c.d)(e)?e:null}))}},d(l,"displayName",`withPlacement(${o.displayName||o.name||"Component"})`),u}(e,t,n.shouldUsePlacedExperience,n.dispatchMountActionDuringSSR,i);return Object(u.compose)(l.e,Object(o.connect)(m))(h)}},"3/Bf":function(e,t,n){n.d(t,"a",(function(){return u})),n.d(t,"f",(function(){return d})),n.d(t,"g",(function(){return p})),n.d(t,"e",(function(){return m})),n.d(t,"c",(function(){return h})),n.d(t,"b",(function(){return f})),n.d(t,"d",(function(){return g}));var i=n("7w6Q"),a=n("FZ8N"),o=n("LrH5");const r=Object(o.a)("logPwtStats");let s=null;const c=i.a.getSampleRate(.2);let l=!0;const u=e=>{s=e},d=e=>{s&&(s.historyAction=e)},p=e=>{s&&(s.initialAppLoadSurface=e)},m=(e,t)=>{if(!s)return void i.a.increment("performanceEntries.no_context",c,{name:e});const{deviceType:n,initialAppLoadSurface:o,isBot:r,isSocialBot:l}=s;if(!o)return void i.a.increment("performanceEntries.no_surface",c,{name:e});const u=`performanceEntries.${(l?"socialBot":r&&"bot")||"nonbot"}.${n}.${o}.${e}`;a.c||i.a.timing(u,t,c)},h=(e,t)=>{if(!s)return r("pwt.metrics_quality.no_context"),void i.a.increment("pwt.metrics_quality.no_context",c,{eventName:e});const{browserName:n,browserVersion:o,deviceType:l,isBot:u,isSocialBot:d}=s,p=`pwt.${(d?"socialBot":u&&"bot")||"nonbot"}.metrics_quality.${l}.${e}`,m={...(null==t?void 0:t.tags)||{},browserName:n,browserVersion:(null==o?void 0:o.split(".")[0])||"0"},h=null==t?void 0:t.count;r(`${p}: ${"number"==typeof h?h:1}`),(null==t?void 0:t.tags)&&r(Object.entries(t.tags)),a.c||i.a.count(p,"number"==typeof h?h:1,c,m)},f=(e,t)=>h(`error.${e}`,{tags:t}),g=({appLoadName:e,clientNavName:t},n)=>{if(s){const i="APP_VOLUME.";l?(h(i.concat(e),{tags:{browserSupportsPwtProfiler:!!n}}),l=!1):"PUSH"===s.historyAction&&h(i.concat(t),{tags:{browserSupportsPwtProfiler:!!n}})}else i.a.increment("pwt.metrics_quality.no_context",c,{eventName:e.concat(`.${t}`)})}},"6A0I":function(e,t,n){var i=n("q1tI"),a=n.n(i),o=n("/MKj"),r=n("JW66"),s=n("Sihc"),c=n("Ye/N"),l=n("GBVV"),u=n("n6mq");function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=Object(o.connect)()(class extends a.a.Component{constructor(e){super(e),d(this,"onCreateSection",()=>{const{board:e,dispatch:t,completeCreateSectionAction:n,pinImport:i}=this.props;return this.setState({isSaving:!0}),t(Object(s.a)({boardId:e.id,name:this.state.inputName.trim(),pinImport:i})).then(e=>{this.setState({isSaving:!1}),n(e)}).catch(e=>{this.setState({createError:e.message_detail||e.message,isSaving:!1})})}),d(this,"handleKeyDown",({event:e,value:t})=>{const{createError:n,inputName:i}=this.state;[r.a.KeyCode.ENTER,r.a.KeyCode.NUMPAD_ENTER].includes(e.which)&&!n&&i.trim()&&this.onCreateSection()}),d(this,"handleChangeName",({value:e})=>{this.setState({createError:null,inputName:e})}),d(this,"handleInputRef",e=>{this.setState({inputRef:e})}),this.state={createError:null,inputName:e.initialName||"",inputRef:null,isSaving:!1}}componentDidUpdate(e,t){const{createError:n,inputRef:i}=this.state;!i||t.inputRef&&!n||i.focus()}render(){const{onClearModal:e,showTitle:t,positionRelative:n}=this.props,{createError:i,inputName:o,isSaving:r}=this.state,s=!!o.trim()&&!i;return a.a.createElement(u.d,{display:"flex",direction:"column",color:"white",flex:"grow",top:!0,bottom:!0,right:!0,position:n?"relative":"absolute",rounding:2,width:"100%",dangerouslySetInlineStyle:{__style:{borderLeft:"1px solid #f5f5f5"}}},t&&a.a.createElement(u.d,{marginTop:3,paddingX:6,paddingY:3},a.a.createElement(u.r,{size:"sm"},c.a._("Add section","Title in the add section modal","Title in the add section modal"))),a.a.createElement(u.d,{padding:3},a.a.createElement(u.d,{marginBottom:2},a.a.createElement(u.v,{htmlFor:"sectionEditName"},a.a.createElement(u.T,{size:"md",color:i?"red":"gray"},c.a._("Name","Board section name","Board section name")))),a.a.createElement(u.d,null,a.a.createElement(u.d,{ref:this.handleInputRef},a.a.createElement(u.V,{errorMessage:i||"",id:"sectionEditName",name:"sectionName",onChange:this.handleChangeName,onKeyDown:this.handleKeyDown,placeholder:c.a._('Like "Lighting"',"Placeholder for board section name","Placeholder for board section name"),size:"lg",type:"text",value:o})))),a.a.createElement(u.n,null),a.a.createElement(u.d,{display:"flex",flex:"grow"}),a.a.createElement(u.n,null),a.a.createElement(u.d,{padding:6},a.a.createElement(u.d,{display:"flex",justifyContent:"between"},a.a.createElement(u.e,{onClick:e,text:c.a._("Cancel","cancel section add","cancel section add"),inline:!0}),a.a.createElement(l.b,{disabled:!s||r,onClick:this.onCreateSection,submitting:r,text:c.a._("Add","add a new section","add a new section")}))))}})},FZ8N:function(e,t,n){n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return o}));const i=window.location.search.includes("debug_tracing"),a=window.location.search.includes("debug_lab_tracing"),o=i||a},HMdf:function(e,t,n){n.d(t,"f",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return p})),n.d(t,"e",(function(){return m})),n.d(t,"b",(function(){return h})),n.d(t,"d",(function(){return f}));var i=n("vzKb"),a=n("SyXB");function o(e){var t,n;return(null===(t=window)||void 0===t?void 0:null===(n=t.performance)||void 0===n?void 0:n.getEntriesByType(e))||[]}var r=n("FZ8N"),s=n("3/Bf");let c;function l(){window.performance&&window.performance.clearResourceTimings&&(Object(a.c)("resourceBufferCleared"),r.b&&console.info("Warning: Clearing resource timings in default buffer."),Object(s.c)("resourceBufferSize",{count:o("resource").length}),window.performance.clearResourceTimings())}const u=({size:e})=>{if(window.performance){window.PerformanceObserver?(c=o("resource"),Object(i.a)({entryTypes:["resource"]},t=>{(c=(c||[]).concat(t.getEntries())).length>e&&(c=c.slice(-e))})):(window.addEventListener("popstate",()=>{o("resource").length>e&&l()}),window.performance.setResourceTimingBufferSize&&window.performance.setResourceTimingBufferSize(e));try{window.performance.onresourcetimingbufferfull=()=>{c||l()}}catch(t){}}},d=()=>c||o("resource"),p=()=>{c&&(Object(s.c)("customBufferSize",{count:c.length}),c=[]),l()},m=()=>({customBufferSize:c?c.length:0,defaultBufferSize:o("resource").length}),h=(e,t=!0)=>{let n=0,i=0;const a=(e=>e.length?e.reduce((e,t)=>e+t,0)/e.length:null)(e.filter(e=>t?(e.responseEnd||"img"!==e.initiatorType||(n+=1),e.transferSize||"img"!==e.initiatorType||(i+=1),!!e.responseEnd&&!!e.transferSize&&"img"===e.initiatorType):!!e.responseEnd&&!!e.transferSize).map(e=>{return 8*(e.transferSize||0)/((e.responseEnd-e.responseStart)/1e3)/1e3}));return t&&(n>0&&Object(s.c)("images.downloadSpeed.noResponseEnd",{tags:{count:n}}),i>0&&Object(s.c)("images.downloadSpeed.transferSize",{tags:{count:i}})),a},f=()=>(e=>{if(!e)return"unknown";const t=Math.floor(e/1e3);return t<1?"0-1":t<5?"1-5":t<10?"5-10":t<20?"10-20":t<40?"20-40":t<80?"40-80":"80_or_above"})(h(d()))},LrH5:function(e,t,n){n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));var i=n("FZ8N");const a=(e,t)=>{i.b&&e instanceof HTMLImageElement&&(e.style.outline=`10px solid ${t}`,e.style.outlineOffset="-30px")},o=e=>(t,...n)=>{i.b&&console.log("string"==typeof t?`[PWT:${e}] ${t}`:t,...n)}},PNKV:function(e,t,n){},SyXB:function(e,t,n){n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return l})),n.d(t,"b",(function(){return u}));var i=n("XtwW");const a="masonryPagination";let o={};const r=e=>`ðŸ“Œ ${e}`,s=()=>{const e={};return Object.keys(o).forEach(t=>{(o[t]||[]).slice(0,3).forEach((n,i)=>{e[i?`${t}_${i+1}`:t]=n})}),e},c=(e,t)=>(o[e]||[]).filter(e=>e<t).length,l=(e,t)=>c(e,t)>0,u=()=>{i.a&&Object.keys(o).forEach(e=>((e,t)=>{const n=r(t);e.clearMarks(n),e.clearMeasures(n)})(i.a,e)),o={}};t.c=e=>{i.a&&(o[e]=(o[e]||[]).concat([i.a.now()]),((e,t)=>{const n=r(t);e.mark(n),e.measure(n)})(i.a,e))}},WnNx:function(e,t,n){function i(e){return{type:"SHOW_REPIN_ANIMATION",payload:{pinId:e}}}function a(){return{type:"HIDE_REPIN_ANIMATION"}}n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a}))},XtwW:function(e,t,n){t.a=(e=>e&&e.clearMarks&&e.clearMeasures&&e.clearResourceTimings&&e.getEntries&&e.getEntriesByName&&e.getEntriesByType&&e.mark&&e.measure&&e.now&&e.setResourceTimingBufferSize?e:null)(window.performance)},bNC6:function(e,t,n){n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return u}));const i={id:14,name:"own_profile"},a={id:15,name:"other_profile"},o={initial_app_load:{unauth:{board:{id:114,name:"board_page_interactive"},pin_closeup:{id:113,name:"pin_page_interactive"},other_profile:{id:115,name:"user_page_interactive"},topic:{id:119,name:"topic_page_interactive"},sterling_signup:{id:201,name:"sterling_signup_main_pageload"},sterling_login:{id:202,name:"sterling_login_main_pageload"}},auth:{bizhub:{id:607,name:"bizhub_pinteractive"},homefeed:{id:19,name:"home_feed_pinteractive"},sterling_reporting_details:{id:218,name:"sterling_reporting_details_pageload"},sterling_reporting_overview:{id:219,name:"sterling_reporting_overview_pageload"},sterling_ads_create:{id:221,name:"sterling_adscreate_main_pageload"},sterling_ads_duplicate:{id:206,name:"sterling_adsduplication_main_pageload"},sterling_ads_edit:{id:204,name:"sterling_adsedit_main_pageload"},sterling_billing_profile:{id:203,name:"sterling_billingprofile_main_pageload"},sterling_bulk_editor:{id:205,name:"sterling_bulkeditor_main_pageload"},sterling_pin_builder:{id:222,name:"sterling_adscreate_pinbuilder_pageload"}}},client_route_push:{unauth:{},auth:{bizhub:{id:608,name:"bizhub_page_render"},homefeed:{id:2,name:"home_feed_render"},search:{id:3,name:"search_feed_render"},pin_closeup:{id:13,name:"pin_closeup_details"},own_profile:i,other_profile:a}},client_route_replace:{unauth:{},auth:{own_profile:i,other_profile:a}}},r={client_route_push:{auth:{pin_closeup:{story_pin:{id:700,name:"story_pin_closeup"}}}}},s={board_picker:16,grid_bottom_spinner:12,facebook_autologin:500,google_autologin:501,story_pin_step:701},c=e=>{var t,n;const{navigationType:i,isAuthenticated:a,segment:s,surface:c}=e,l=a?"auth":"unauth",u=null===(t=r[i])||void 0===t?void 0:null===(n=t[l])||void 0===n?void 0:n[c];return s&&u&&u[s]||o[i][l][c]},l=e=>{if("stopwatch"===e.type)return s[e.name]||null;const t=c(e);return t?t.id:null},u=e=>{if("stopwatch"===e.type)return e.name;const{navigationType:t,isAuthenticated:n,segment:i,surface:a}=e,o=n?"auth":"unauth",r=c(e);return r?r.name:`${t}_${o}_${a}${i?"_"+i:""}`}},bZU8:function(e,t,n){n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return s}));const i="pwt-grid-item",a=['div[data-grid-item="true"]',"div.Masonry div.Collection-Item","div.Grid__Item",`div[data-test-id="${i}"]`],o=a.join(","),r=a.map(e=>`${e} img`).join(","),s=a.map(e=>`${e} div[style*=background-image]`).join(",")},dMCU:function(e,t,n){n.d(t,"a",(function(){return c}));var i=n("q1tI"),a=n.n(i),o=n("/MKj"),r=n("v/Q4"),s=n("+PUW");function c(e){const t=t=>{const n=Object(o.useDispatch)(),{isAuth:i,isLimitedLogin:c}=Object(r.a)(),l=!i||c?e=>e=>{e&&e.stopPropagation(),n(s.b)}:e=>e;return a.a.createElement(e,Object.assign({authAction:l,dispatch:n,isAuth:i,isLimitedLogin:c},t))};return t.displayName=`WithAuthenticatedAction(${String(e.displayName||e.name)})`,t}},gg0E:function(e,t,n){n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return E}));var i=n("q1tI"),a=n("SyXB"),o=n("0YPa"),r=n("bNC6"),s=n("HMdf"),c=n("3/Bf"),l=n("y2Ga"),u=n("bZU8");const d=(e,t)=>{const n=(e=>e instanceof HTMLDivElement?e.getBoundingClientRect():e.parentElement instanceof HTMLElement?e.parentElement.getBoundingClientRect():null)(e);return n?!(e instanceof HTMLImageElement&&n.width<100&&n.height<100)&&(({top:e,height:t},{foldY:n,pageYOffset:i})=>{const a=e+i;if(a>=n)return!1;const o=Math.min(t,n-a);return o>.5*t||o>.2*n})(n,t):(Object(c.b)("missing_client_rect"),!1)},p=()=>{const e=(()=>{if(!document.querySelector)return Object(c.b)("missing_document_query_selector"),null;const e=document.querySelectorAll(u.d);return e[e.length-1]||null})();if(!e)return!1;const t=window.innerHeight||0,n=window.pageYOffset||0;return e.getBoundingClientRect().top+n>=t},m=e=>{if(!document.querySelector)return Object(c.b)("missing_document_query_selector"),[];const t={foldY:window.innerHeight||0,pageYOffset:window.pageYOffset||0},n=[u.b,...e?[u.a]:[]].join(",");return[...document.querySelectorAll(n)].reduce((e,n)=>{if((n instanceof HTMLImageElement||n instanceof HTMLDivElement)&&d(n,t)){const t=(e=>{if(e instanceof HTMLImageElement)return e.src;const t=((e.style||{}).backgroundImage||"").match(/^url\(["'](http.*)["']\)$/);return t&&t[1]||null})(n);if(t)return e.concat([{htmlElement:n,url:t}])}return e},[])};var h=n("LrH5");const f=500,g=100,_=6e4,b=6e4,v=Object(h.a)("GridProfiler"),y=()=>!!window.addEventListener&&!!window.removeEventListener&&(()=>"number"==typeof window.innerHeight&&"number"==typeof window.pageYOffset&&!!document.querySelector&&!!document.querySelectorAll)(),S=e=>"LAYOUT"===e.status&&f||"TIMING"===e.status&&g||null,w=(e,t)=>{if(!t){const t=(()=>document.querySelector?document.querySelectorAll(u.d).length:(Object(c.b)("missing_document_query_selector"),0))();if(t===e)return v("No new items, so skip the viewport-fill check."),{complete:!1,numOfItemsChecked:e};if(!p())return v("Viewport may not be filled yet."),{complete:!1,numOfItemsChecked:t}}return{complete:!0}},C=(e,t)=>{const n=()=>{window.removeEventListener(e,n),t()};return window.addEventListener(e,n),()=>window.removeEventListener(e,n)};function E({isAtEndOfFeed:e,includeBackgroundImages:t}){const n=Object(l.c)(),u=null==n?void 0:n.id,d=null==n?void 0:n.setVisuallyCompleteResult,[p,y]=Object(i.useState)({status:"DISABLED"});Object(i.useEffect)(()=>{y(d?{status:"LAYOUT",failedCount:0,numOfItemsChecked:0}:{status:"DISABLED"})},[u,d]),Object(i.useEffect)(()=>{if("DISABLED"!==p.status&&Object(a.c)(`GridVisuallyCompleteProfiler_${p.status}`),v("new status",p),"LAYOUT"===p.status){const e=C("scroll",()=>{Object(a.c)("scrollDuringLayout")});return()=>{e()}}return()=>{}},[p.status]),Object(o.a)(()=>{if(!n||!d)return;const{abort:i,metricId:a}=n;switch(p.status){case"LAYOUT":{const n=w(p.numOfItemsChecked,e);n.complete?y({status:"TIMING",failedCount:0,images:m(t).map(({htmlElement:e,url:t})=>{return{fileName:(t||"").replace(/.*\//,""),element:e}},[])}):p.failedCount*f>_?(Object(c.c)(`images.${Object(r.b)(a)}.visuallyComplete.maxLayoutAttempt`),i("visuallyComplete_layoutTimeout"),y({status:"DISABLED"})):y({...p,failedCount:p.failedCount+1,numOfItemsChecked:n.numOfItemsChecked});break}case"TIMING":{const e=Object(s.c)(),t=p.images.length,n=[];let o=0,l=0,u=0;p.images.forEach(({element:t,fileName:i})=>{const a=e.find(e=>("img"===e.initiatorType||"css"===e.initiatorType)&&e.name.endsWith(i));a?a.responseEnd?(n.push(a),Object(h.b)(t,"green")):(u+=1,Object(h.b)(t,"blue")):t instanceof HTMLImageElement&&t.complete?(l+=1,Object(h.b)(t,"red")):(o+=1,Object(h.b)(t,"greenyellow"))}),o||u?p.failedCount*g>b?(Object(c.c)(`images.${Object(r.b)(a)}.visuallyComplete.maxAttempt`,{tags:{totalImageCount:t,incompleteCount:o,noTimingCount:l,noTimingResponseEndCount:u}}),i("visuallyComplete_timingTimeout"),y({status:"DISABLED"})):y({...p,failedCount:p.failedCount+1}):(v(`All ${n.length} images are fetched`),d({imageTimings:n}),y({status:"DISABLED"}),Object(c.c)(`images.${Object(r.b)(a)}.visuallyComplete.complete`,{tags:{totalImageCount:t,noTimingCount:l}}));break}}},S(p))}},jZhD:function(e,t,n){n.d(t,"a",(function(){return r}));var i=n("q1tI"),a=(n("17x9"),n("pdBG"));function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class r extends i.Component{constructor(...e){super(...e),o(this,"searchCache",Object.create(null)),o(this,"lastSearchedQuery",null),o(this,"search",e=>{this.lastSearchedQuery=e,e in this.searchCache?this.props.onTypeaheadSuggestionsChange(this.searchCache[e],e):this.provider.search(e,({items:t})=>{this.searchCache[e]=t,e===this.lastSearchedQuery&&this.props.onTypeaheadSuggestionsChange(t,e)})})}componentDidMount(){const e=this.props.resourceOptions||{};this.provider=new a.a({resource_name:this.props.resourceName,...e});const{value:t}=this.props;null!=t&&this.props.allowSearchOnMount&&this.search(this.props.value)}componentDidUpdate(e){const{value:t}=this.props;null!=t&&t!==e.value&&this.search(t)}render(){return this.props.children||null}}o(r,"defaultProps",{resourceName:"TypeaheadResource"})},pdBG:function(e,t,n){var i=n("AHhP"),a=n.n(i);const o=function(e,t){this.uid=e,this.item=t,this.next=null,this.prev=null},r=function(e){this._maxNumItems=e||10,this._uidToData={},this._numItems=0,this._firstData=null,this._lastData=null};r.prototype.set=function(e,t){let n=this._uidToData[e];n||(n=new o(e,t),this._uidToData[e]=n,this._numItems+=1),this._moveToFront(n),this._numItems>this._maxNumItems&&this._evict()},r.prototype.get=function(e){const t=this._uidToData[e];return t?(this._moveToFront(t),t.item):null},r.prototype.remove=function(e){const t=this._uidToData[e];t&&(delete this._uidToData[e],this._firstData===t&&(this._firstData=t.next),this._lastData===t&&(this._lastData=t.prev),t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),this._numItems-=1)},r.prototype._moveToFront=function(e){this._firstData!==e&&(this._firstData?(this._lastData===e&&(this._lastData=e.prev),e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),this._firstData.prev=e,e.next=this._firstData,e.prev=null,this._firstData=e):(this._firstData=e,this._lastData=e))},r.prototype._evict=function(){delete this._uidToData[this._lastData.uid],this._firstData===this._lastData?(this._firstData=null,this._lastData=null):(this._lastData=this._lastData.prev,this._lastData.next=null),this._numItems-=1};var s=r,c=n("eOdZ"),l=n("mBfy");const u=function(e){e=e||{},this.tags=e.tags,this.enable_recent_queries=!!e.enable_recent_queries,this.minimum_term_character_length=e.minimum_term_character_length||0,this.bypass_lru_cache=e.bypass_lru_cache;const t={tags:e.tags,pin:e.pin_id},n=e.num_places;n?t.num_places=n:t.count="count"in e?e.count:5,e.exclude_non_followers&&(t.exclude_non_followers=!0),e.field_set_key&&(t.field_set_key=e.field_set_key),e.pin_scope&&(t.pin_scope=e.pin_scope),e.suggestion_type&&(t.suggestion_type=e.suggestion_type);let i="TypeaheadResource";e.resource_name&&(i=e.resource_name),this.searchResource=c.a.create(i,t),this.itemsCache=new s};Object.assign(u.prototype,a.a),Object.assign(u.prototype,{search(e,t){let n;if(!e&&"pinners_and_contacts"===this.tags)return this.abortSearch(),this.publishData(e,[],{},t);if(!e&&l.default.isLimitedLogin())return this.abortSearch(),this.publishData(e,[],{},t);if(!e&&this.enable_recent_queries&&l.default&&l.default.isAuthenticated())n="recent_search";else{const n=this.bypass_lru_cache?{}:this.itemsCache.get(e);if(n){const i=n.items;if(i&&i.length){this.abortSearch();const a=n.hint;return void this.publishData(e,i,a,t)}}}e.length>=this.minimum_term_character_length?this.fetch(e,n,t):this.publishData(e,[],{},t)},getResource(){return this.searchResource},abortSearch(){this.getResource().abort()},publishData(e,t,n,i){const a={term:e,items:t,hint:n};this.trigger("data",a),i&&i(a)},setAutocompleteScope(e){this.getResource().set("autocompleteScope",e)},fetch(e,t,n){const i=this.getResource();if(i.isCalling()){const t=i.get("term");if(e===t)return;this.abortSearch()}""!==this.tags&&(i.set("term",e),i.set("tags",t||this.tags),i.resetBookmark(),i.callGet({showError:!1}).then(t=>{const i=t.resource_response.data,a=i.items,o=i.hint||{},r={hint:o,items:a};this.cacheData(e,r),this.publishData(e,a,o,n)},e=>{this.trigger("fetchError",e)}),this.warm=!0)},removeCacheForTerm(e){this.itemsCache.remove(e)},cacheData(e,t){this.itemsCache.set(e,t)},prefetch(){if(this.warm)return;c.a.create("TypeaheadPrepareResource").callGet({showError:!1}),this.warm=!0}});t.a=u},rO08:function(e,t,n){n.r(t),n.d(t,"PinSaveButton",(function(){return O}));var i=n("q1tI"),a=n.n(i),o=n("/MKj"),r=n("Ye/N"),s=n("TiQD"),c=n("rYoy"),l=n("dMCU"),u=n("2qKt"),d=n("n6mq"),p=n("rm3W"),m=n("XCz/"),h=n("0nTG"),f=n("lm6u"),g=n("y9Ij"),_=n("C0mq"),b=n("B6Tf"),v=n("oTtT"),y=n("ANjH"),S=n("xjIv");function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const C=Object(i.lazy)(()=>n.e("FirstPinCreateCommon").then(n.bind(null,"kj35"))),E=[500639,11022];class O extends i.Component{constructor(e){super(e),w(this,"componentWillUnmount",()=>{this._repinCompletionPromise&&this._repinCompletionPromise.cancel()}),w(this,"setCompletionPromise",e=>{this._repinCompletionPromise=e,this._repinCompletionPromise.promise.then(()=>{this.handleRepinHideAndToggle()})}),w(this,"_repinCompletionPromise",null),w(this,"handleRepinHideAndToggle",()=>{this.setState({isRepinModalOpen:!1});const{onToggleModal:e}=this.props;e&&e(!1)}),w(this,"handleSaveButtonClick",this.props.authAction(e=>{e&&(e.preventDefault(),e.stopPropagation());const{onClickCallback:t,onToggleModal:n,oneTapSave:i,boardPickerStopwatch:a}=this.props;t&&t(),i?i.saved||"function"!=typeof i.save||i.save():(a&&a.start(),n&&n(!0),this.setState({isRepinModalOpen:this.props.isAuth}))})),w(this,"handleUnsaved",()=>{const{unsave:e,pin:t}=this.props;e(t.id)}),w(this,"handleBoardEdited",({boardId:e,title:t,url:n})=>{const{pin:i,save:a}=this.props;a(i.id,e,t,n)}),w(this,"handleSavedButtonClick",()=>{const{history:e,pin:t,pinSavedInfo:n,viewerId:i}=this.props;let a;t.pinner.id===i?a=t.board.url:n&&(a=n.url),a&&e.push(a)}),w(this,"saveButtonRef",Object(i.createRef)()),w(this,"renderPinToBoardRepin",()=>{const{isCloseupPin:e,onToggleModal:t,pin:n}=this.props,{isFPE:i,isRepinModalOpen:o}=this.state;return o&&i?this.renderFPE():i?null:a.a.createElement(f.a,{action:"repin",additionalCreateFields:{is_stl_pin:Object(h.g)(n)},onClose:this.handleRepinHideAndToggle,setCompletionPromise:this.setCompletionPromise,shouldShowToast:!0,onToggleModal:t,pin:n},({dismissModal:i,displaySuccessAnimation:r,handleAbort:s,handleNewBoardAnimationCompletion:c,handleSocialConnectSet:l,handleSaveToBoard:u,newPin:d,updateDescription:p,modalTitle:m,setModalTitle:h})=>a.a.createElement(b.b,{dismissModal:i,displaySuccessAnimation:r,handleSocialConnectSet:l,handleSaveToBoard:u,anchorRef:this.saveButtonRef.current,handleAbort:s,handleNewBoardAnimationCompletion:c,newPin:d,isCloseupPin:e,isInModal:!0,onToggleModal:t,pin:n,pwtAuxData:{pin_create_method:"repin"},modalTitle:m,setModalTitle:h,shouldRenderContent:o,updateDescription:p}))});const{experience:t,showRepinOnInitialRender:n}=e;this.state={isFPE:!!t&&E.includes(t.experience_id),isRepinModalOpen:n||!1}}componentDidMount(){const{onMount:e}=this.props;e&&e()}isFPERemoved(e){const{isFPE:t}=this.state,{experience:n}=e;return t&&(!n||!E.includes(n.experience_id))}renderFPE(){const{completePinSave:e,experience:t,pin:n}=this.props;return a.a.createElement(m.a,{name:"web_fbc_profile_board_to_collection"},({anyEnabled:i})=>a.a.createElement(s.b,{accessibilityModalLabel:i?r.a._("Create collection","createCollection.modal.accessibilityTitle","Accessible create collection education modal label"):r.a._("Create board","Accessible create board education modal label","Accessible create board education modal label"),heading:i?r.a._("Create collection","createCollection.modal.title","Create collection education modal label"):r.a._("Create board","Create board education modal label","Create board education modal label"),onDismiss:this.handleRepinHideAndToggle,size:"lg"},a.a.createElement(d.d,{dangerouslySetInlineStyle:{__style:{marginBottom:64}}},a.a.createElement(c.a,null,a.a.createElement(a.a.StrictMode,null,a.a.createElement(C,{anchorRef:this.saveButtonRef.current,experience:t,inBoardToCollectionsExp:i,isInModal:!0,onClose:this.handleRepinHideAndToggle,onComplete:e,pin:n,pwtAuxData:{pin_create_method:"repin"}}))))))}render(){const{iconOnly:e,isCloseupPin:t,oneTapSave:n,onToggleModal:o,pin:r,renderPinSaveTooltip:s,renderSavedStatus:c,variant:l,viewerId:u,viewParameter:p}=this.props,m=!!(r.pinner.id===u||r.saved||r.savedInfo||"controlled"===(null==n?void 0:n.type)&&n.saved),h="controlled"===(null==n?void 0:n.type)?"controlled":"classic";return a.a.createElement(i.Fragment,null,a.a.createElement(d.d,{ref:this.saveButtonRef},t?a.a.createElement(g.a,{iconOnly:e,isCloseupPin:t,isPulsarDisplayed:!this.state.isRepinModalOpen,onClick:this.handleSaveButtonClick,onSavedClick:this.handleSavedButtonClick,saveButtonType:h,saved:m,variant:l}):a.a.createElement(g.b,{carouselData:r.carousel_data,iconOnly:e,isCloseupPin:t,onBoardUpdated:this.handleBoardEdited,onClick:this.handleSaveButtonClick,onSavedClick:this.handleSavedButtonClick,onToggleModal:o,onUnsaved:this.handleUnsaved,renderSavedStatus:c,saveButtonType:h,saved:m,savedInfo:r.savedInfo,variant:l,viewParameter:p}),this.renderPinToBoardRepin()),!!s&&this.saveButtonRef.current&&s(this.saveButtonRef.current))}}w(O,"defaultProps",{anchorString:""}),t.default=Object(y.compose)(Object(o.connect)((function({pins:e,viewer:t},{pin:n}){return{email:t.isAuth?t.email:void 0,isAuth:t.isAuth,pinSavedInfo:e[n.id]&&e[n.id].savedInfo,viewerId:t.isAuth?t.id:""}}),(function(e){return{completePinSave:()=>e(Object(p.b)()),save:(t,n,i,a)=>e(Object(S.a)(t,n,i,a)),unsave:t=>e(Object(S.b)(t))}})),l.a,Object(u.a)(33),_.a)((function(e){const t=Object(v.b)();return a.a.createElement(O,Object.assign({},e,{boardPickerStopwatch:t}))}))},rm3W:function(e,t,n){function i(e){return{type:"UPDATE_PIN_ACTIONS",payload:e}}function a(){return{type:"COMPLETE_APP_INSTALL"}}function o(){return{type:"COMPLETE_PIN_SAVE"}}n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}))},uyxo:function(e,t,n){n.d(t,"a",(function(){return s}));var i=n("q1tI"),a=n.n(i),o=n("jHGc"),r=n("n6mq");function s(e){const{children:t,currentCarouselIndex:n,onDeleteSavedState:i,onEditSubmit:s,onToggleModal:c,pinId:l,variant:u,viewParameter:d}=e,p="pin"===u?{bgColor:"white",iconColor:"darkGray",size:"sm"}:{bgColor:"transparent",iconColor:"darkGray",size:"sm"};return a.a.createElement(r.d,{display:"flex",direction:"row",alignItems:"center",width:"closeup"===u?"100%":void 0,paddingX:"closeup"===u?2:void 0,marginStart:"pin"===u?-1:void 0,marginEnd:"pin"===u?-1:void 0},t&&a.a.createElement(r.d,{paddingX:1,"data-test-id":"saved-info",flex:"grow"},t),a.a.createElement(r.d,{paddingX:1,flex:"none",marginStart:"auto"},a.a.createElement(o.default,{component:0,onDelete:i,onSubmit:s,pinId:l,onToggleModal:c,viewParameter:d,carouselSlotCurrentIndex:n,style:p,useLegoStyles:"pin"===u})))}},vzKb:function(e,t,n){t.a=(e,t,n)=>{if(window.PerformanceObserver)try{const i=new window.PerformanceObserver(t);i.observe(e),window.addEventListener("beforeunload",()=>{i.disconnect()}),n&&window.addEventListener("popstate",()=>{n()})}catch(i){}}},y2Ga:function(e,t,n){n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return r}));var i=n("1dBE");const{Consumer:a,Provider:o,useHook:r}=Object(i.b)("pwtSurfaceContext")},y9Ij:function(e,t,n){n.d(t,"a",(function(){return m}));var i=n("q1tI"),a=n.n(i),o=(n("PNKV"),n("TSYQ")),r=n.n(o),s=n("Ye/N"),c=n("uyxo"),l=n("n02X"),u=n("0SCs"),d=n("n6mq");const p=Object(i.memo)(Object(i.forwardRef)(({carouselData:e,disabled:t=!1,iconOnly:n,isCloseupPin:i,onBoardUpdated:o,onClick:l,onSavedClick:p,onToggleModal:m,onUnsaved:h,renderSavedStatus:f,saveButtonType:g="classic",saved:_,savedInfo:b,variant:v="classic",viewParameter:y},S)=>{const{anyEnabled:w}=Object(u.c)("web_better_save_after_fbc"),{anyEnabled:C}=Object(u.c)("web_pin_rep_saved_state",!w);return _&&"controlled"===g?a.a.createElement(d.e,{disabled:!0,text:s.a._("Saved"),size:"sm"}):!i&&b&&f&&h&&o&&"classic"===g&&C?a.a.createElement(c.a,{currentCarouselIndex:e&&e.index,onDeleteSavedState:h,onEditSubmit:o,onToggleModal:m,pinId:b.localPinId,variant:"pin",viewParameter:y},f()):_&&"classic"===g&&i?a.a.createElement(d.e,{accessibilityLabel:s.a._("Saved button","saveButton.saved.label","Saved state label on save button"),text:s.a._("Saved!","saveButton.saved","Saved state text on save button"),size:"md",color:"white",onClick:p}):n?a.a.createElement("div",{ref:S,"data-test-id":"SaveButton"},a.a.createElement(d.t,{accessibilityLabel:s.a._("Save","Accessibility label for the save button","Accessibility label for the save button"),bgColor:"white",icon:"pin",onClick:({event:e})=>l(e),iconColor:"darkGray"})):a.a.createElement(d.d,{ref:S,display:i?void 0:"flex",justifyContent:"end"},a.a.createElement("div",{className:r()("SaveButton",t?"SaveButton--disabled":"SaveButton--enabled",{"SaveButton--lego":"lego"===v}),"data-test-id":"SaveButton",onClick:t?void 0:l,onKeyPress:t?void 0:e=>{32!==e.charCode&&13!==e.charCode||(e.preventDefault(),l(e))},role:"button",tabIndex:"0"},a.a.createElement("div",{className:r()("SaveButton__background",t?"SaveButton__background--disabled":"SaveButton__background--enabled",{"SaveButton__background--lego":"lego"===v})},a.a.createElement(d.d,{alignItems:"center",minHeight:40,dangerouslySetInlineStyle:{__style:{padding:"10px 14px"}},display:"flex"},a.a.createElement(d.T,{color:t?"gray":"white",size:"lego"===v?"sm":"md",weight:"bold"},a.a.createElement("span",{className:r()("SaveButton__label",{"SaveButton__label--lego":"lego"===v})},s.a._("Save","Pin save button label","Pin save button label")))))))})),m=Object(l.a)(".PinActionBar .repin.pinActionBarButton")(p);t.b=p}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/js/PinSaveButtonCommon-ab2f398184b592e616f7.mjs.map