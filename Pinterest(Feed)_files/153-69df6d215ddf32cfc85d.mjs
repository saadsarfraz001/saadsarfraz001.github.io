(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[153],{"+HMQ":function(e,t,a){a.d(t,"a",(function(){return o}));var n=a("w70y");function o({board:{id:e,owner:t},children:a}){const{data:o,isLoaded:r}=Object(n.a)({name:"BoardInvitesResource",options:{board_id:e,field_set_key:"boardEdit",status_filters:"new,accepted,contact_request_not_approved",sort:"viewer_first",include_inactive:!0}}),i=t.image_key||t.image_medium_url||t.image_small_url,l=[{name:t.full_name,src:i,href:`/${t.username}/`,isDim:!1}];return r&&o&&o.length>0&&o.forEach(e=>{l.push({name:e&&e.invited_user?e.invited_user.full_name:"",src:e&&e.invited_user?e.invited_user.image_medium_url:"",href:e&&e.invited_user?`/${e.invited_user.username}/`:"",isDim:e&&["new","contact_request_not_approved"].includes(e.status)})}),a(l)}},"+wrf":function(e,t,a){var n=a("q1tI"),o=a.n(n),r=a("/MKj"),i=a("ViqK"),l=a("Ye/N"),s=a("joD6"),d=a("xdpg"),c=a("n6mq");var u=Object(s.a)(class extends o.a.Component{getSubtitleText(e,t,a){const n=this.props.invite.invited_by_user.full_name;return e?l.a._("That's you","subtext for current user who requested to join this board","subtext for current user who requested to join this board"):t?l.a._("Invited by you","subtext for a pending collaborator who was invited by the current viewer","subtext for a pending collaborator who was invited by the current viewer"):a?l.a._("Requested to join","The subtext that identifies a pending collaborator has personally requested to join the board","The subtext that identifies a pending collaborator has personally requested to join the board"):Object(d.c)(l.a._("Invited by {{ user_full_name }}","The subtext that identifies a pending collaborator who was invited to collaborate on the board","The subtext that identifies a pending collaborator who was invited to collaborate on the board"),{user_full_name:n})}getDeclineDeleteText(e,t,a){return e?l.a._("Leave","[button] for a collaborator to leave a group board","[button] for a collaborator to leave a group board"):t&&!a?l.a._("Decline","[button] decline another pinner's request to join board as a collaborator","[button] decline another pinner's request to join board as a collaborator"):l.a._("Remove","[button] remove a collaborator from the board]","[button] remove a collaborator from the board]")}render(){const{onApprove:e,isDim:t,onDelete:a,actionsDisabled:n,viewer:r,invite:{access:s,status:d,invited_by_user:u,invited_user:m}}=this.props,h=m.id===r.id,b=u.id===r.id,g=m.id===u.id,p="accepted"===d,f=s.includes("approve"),v=s.includes("delete"),E=l.a._("Approve","[button] approve another pinner's request to join the board as a collaborator","[button] approve another pinner's request to join the board as a collaborator"),y=this.getDeclineDeleteText(h,g,p),_=v&&!f,C=v&&f,w=`/${m.username}/`;return o.a.createElement(c.d,null,o.a.createElement(i.a,{imageUrl:m.image_medium_url||"",name:m.full_name,title:m.full_name,subtitle:this.getSubtitleText(h,b,g),linkURL:w,isDim:void 0!==t?t:!p,accessory:_&&o.a.createElement(c.e,{inline:!0,disabled:n,onClick:a,text:y,size:"lg"})}),C&&o.a.createElement(c.d,{paddingX:3,marginStart:12,display:"flex",justifyContent:"end"},o.a.createElement(c.d,{paddingX:1,flex:"grow",width:"50%"},o.a.createElement(c.e,{disabled:n,onClick:a,text:y,size:"lg"})),o.a.createElement(c.d,{paddingX:1,flex:"grow",width:"50%"},o.a.createElement(c.e,{color:"red",disabled:n,onClick:e,text:E,size:"lg"}))))}}),m=a("4dcN"),h=a("CvCA"),b=a("ANjH"),g=a("L2iP"),p=a("ZE2w"),f=a("TiQD"),v=a("vvax");function E(e){const{onCancel:t,onRemove:a,useGestaltModal:n}=e,r=l.a._("Are you sure you want to leave this group board and remove it from your profile?"),i=n?c.D:f.b;return o.a.createElement(i,{accessibilityModalLabel:l.a._("Leave board?"),heading:l.a._("Leave board?"),onDismiss:t,size:"sm",footer:o.a.createElement(c.d,{display:"flex",justifyContent:"end"},o.a.createElement(c.d,{paddingX:1},o.a.createElement(c.e,{inline:!0,onClick:t,text:l.a._("Cancel")})),o.a.createElement(c.d,{paddingX:1},o.a.createElement(c.e,{color:"red",inline:!0,onClick:a,text:l.a._("Leave")})))},o.a.createElement(c.d,{padding:5},o.a.createElement(c.T,null,r)))}class y extends n.Component{constructor(...e){var t,a,n;super(...e),n={shouldBlock:!1},(a="state")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n}getBlockDescription(e,t){return"declineRequest"===e?t?Object(v.b)(l.a._("This will decline {{ invited_user_first_name }} from joining this board and block them from subsequent collaboration requests.","decline another pinner's request to join board as a collaborator and block them","decline another pinner's request to join board as a collaborator and block them"),{invited_user_first_name:t}):l.a._("This will decline this person from joining this board and block them from subsequent collaboration requests.","message that explains consequences of declining a request to join board as a collaborator","message that explains consequences of declining a request to join board as a collaborator"):t?Object(v.b)(l.a._("This will remove {{ invited_user_first_name }}, people {{ invited_user_first_name }} invited, and all their Pins."),{invited_user_first_name:t}):l.a._("This will remove this person, people they invited, and all their Pins.","message that explains consequences of removing a collaborator","message that explains consequences of removing a collaborator")}render(){const{removeType:e,firstName:t,fullName:a,onCancel:r,onRemove:i,onRemoveAndBlock:s,useGestaltModal:d}=this.props,u="declineRequest"===e?Object(v.b)(l.a._("Decline {{ invited_user_name }}?","[button] to decline a pinner's request to join a board as a collaborator","[button] to decline a pinner's request to join a board as a collaborator"),{invited_user_name:a}).join(""):Object(v.b)(l.a._("Remove {{ invited_user_name }}?","[button] to remove a pinner as a collaborator from a group board","[button] to remove a pinner as a collaborator from a group board"),{invited_user_name:a}).join(""),m=l.a._("This will keep them from saving Pins to this board. You can also:","decline another pinner's request to join board as collaborator. Ending fragment preceeds checkbox for blocking the user.","decline another pinner's request to join board as collaborator. Ending fragment preceeds checkbox for blocking the user."),h=this.getBlockDescription(e,t),b=this.state.shouldBlock?l.a._("Block","block another pinner after denying their request to collaborate on a board","block another pinner after denying their request to collaborate on a board"):l.a._("Remove","decline another pinner's request to collaborate on a board","decline another pinner's request to collaborate on a board"),g=o.a.createElement(n.Fragment,null,o.a.createElement(c.d,{padding:5},o.a.createElement(c.T,null,m)),o.a.createElement(c.n,null),o.a.createElement(c.d,{padding:5,display:"flex"},o.a.createElement(c.d,{paddingX:1},o.a.createElement(c.i,{checked:this.state.shouldBlock,id:"banUser",name:"ban",onChange:()=>this.setState({shouldBlock:!this.state.shouldBlock})})),o.a.createElement(c.d,{paddingX:1},o.a.createElement(c.v,{htmlFor:"banUser"},o.a.createElement(c.T,{weight:"bold"},Object(v.b)(l.a._("Block {{ name }}"),{name:t||""})),o.a.createElement(c.T,{size:"md"},h))))),p=d?c.D:f.b;return o.a.createElement(p,{accessibilityModalLabel:u,heading:u,onDismiss:r,size:"sm",footer:o.a.createElement(c.d,{display:"flex",justifyContent:"end",marginStart:-1,marginEnd:-1},o.a.createElement(c.d,{paddingX:1},o.a.createElement(c.e,{inline:!0,onClick:r,text:l.a._("Cancel")})),o.a.createElement(c.d,{paddingX:1},o.a.createElement(c.e,{color:"red",inline:!0,onClick:this.state.shouldBlock?s:i,text:b})))},g)}}var _=a("nGHF");function C(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const w="collaborator_decline_invite",S="collaborator_delete_invite",I=3e3;t.a=Object(b.compose)(Object(r.connect)(null,(e,t)=>{const{invite:a,invite:{invited_user:{id:n},board:{id:o}}}=t;return{approveBoardCollabInvite:()=>e(Object(p.a)(o,n)),deleteBoardCollabInvite:(t,n)=>e(Object(p.b)(a,t,n))}}),s.a,_.c)(class extends o.a.Component{constructor(...e){super(...e),C(this,"state",{currentModal:null,loading:!1}),C(this,"showRemoveSuccessToast",()=>{const{toastManagerContext:e}=this.props,t=l.a._("Collaborator removed","BoardCollabInviteCellContainer.toast","Toast for removing a collaborator from a board");e.showOneToast(({onHide:e})=>o.a.createElement(h.a,{color:"darkGray",duration:I,onHide:e,text:t}))}),C(this,"onDelete",()=>{const{onModalOpen:e}=this.props;e&&e(),this.setState({currentModal:"delete"})}),C(this,"onApprove",()=>{const{approveBoardCollabInvite:e,onInviteDidUpdate:t}=this.props;this.setState({loading:!0}),e().then(t).finally(()=>{this.setState({loading:!1})})}),C(this,"deleteBoardInvite",(e=!1)=>{const{deleteBoardCollabInvite:t,onBoardLeave:a,onInviteDidUpdate:n}=this.props,o=this.isViewerInvitedUser,r=o?w:S;m.a.trackEvent(r,"click"),this.setState({currentModal:null,loading:!0}),t(o,e).then(()=>{m.a.trackEvent(r,"success"),n(),this.showRemoveSuccessToast(),o&&a()}).catch(()=>{m.a.trackEvent(r,"error")}).finally(()=>{this.setState({loading:!1})})}),C(this,"handleDeleteBoardInvite",()=>{this.deleteBoardInvite(!1)}),C(this,"handleDeleteBoardInviteAndBan",()=>{this.deleteBoardInvite(!0)}),C(this,"handleHideModal",()=>{this.setState({currentModal:null})})}get isViewerInvitedUser(){const{viewer:e,invite:{invited_user:t}}=this.props;return e.isAuth&&e.id===t.id}get isRequestToJoin(){const{invite:{invited_user:e,invited_by_user:t}}=this.props;return e.id===t.id}renderCurrentModal(){const{invite:{invited_user:e},useGestaltModal:t=!1}=this.props,{currentModal:a}=this.state;return"delete"===a?this.isViewerInvitedUser?o.a.createElement("div",{style:{position:"absolute",zIndex:g.h+1}},o.a.createElement(E,{onCancel:this.handleHideModal,onRemove:this.handleDeleteBoardInvite,useGestaltModal:t})):o.a.createElement("div",{style:{position:"absolute",zIndex:g.h+1}},o.a.createElement(y,{removeType:this.isRequestToJoin?"declineRequest":"removeCollaborator",firstName:e.first_name,fullName:e.full_name,onCancel:this.handleHideModal,onRemove:this.handleDeleteBoardInvite,onRemoveAndBlock:this.handleDeleteBoardInviteAndBan,useGestaltModal:t})):null}render(){const{invite:e,isDim:t}=this.props,{loading:a}=this.state;return o.a.createElement(c.d,null,o.a.createElement(u,{invite:e,isDim:t&&"accepted"!==e.status,onDelete:this.onDelete,onApprove:this.onApprove,actionsDisabled:a}),this.renderCurrentModal())}})},"+zkD":function(e,t,a){a.d(t,"a",(function(){return j}));var n=a("q1tI"),o=a.n(n),r=a("8cMa"),i=a("JW66"),l=a("Ye/N"),s=a("rrvb"),d=a("jdx6"),c=a("n6mq");function u({boards:e,fetchMore:t,selectedBoard:a,onSelect:n,onSearchQueryUpdate:u,searchQuery:m}){return o.a.createElement(s.a,{dropdownValue:a?a.name:l.a._("Pick a board"),fetchMore:t,onSearchQueryUpdate:u,onSelect:n,renderRow:({item:{name:e,privacy:t,is_collaborative:a},hovered:n})=>o.a.createElement(c.d,{color:n?"lightGray":"white",display:"flex",padding:2,rounding:2},o.a.createElement(c.d,{flex:"grow"},o.a.createElement(c.T,{weight:"bold"},Object(d.b)(m,e))),o.a.createElement(c.d,{display:"flex",flex:"none",direction:"row"},t===i.a.BoardPrivacy.SECRET&&o.a.createElement(r.a,{type:"secret"}),a&&o.a.createElement(r.a,{type:"group"}))),searchQuery:m,sections:[{items:e}]})}var m=a("e3GI"),h=a("0BOE"),b=a("qyR9");function g(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const p=e=>e.length<b.a;class f extends o.a.PureComponent{constructor(...e){super(...e),g(this,"state",{query:""}),g(this,"handleQueryChange",e=>this.setState({query:e}))}render(){const{allBoardsResource:e,children:t}=this.props,{query:a}=this.state,n=!p(a);if(!e.isLoaded||!e.data)return t({isLoaded:!1});const o=Array.isArray(e.data)?e.data:e.data.all_boards;return t({isLoaded:!0,results:n?Object(h.a)(o,a):o,fetchMore:void 0,isSearch:n,onQueryChange:this.handleQueryChange,query:a})}}var v=a("sEfC"),E=a.n(v);class y extends o.a.PureComponent{constructor(...e){var t,a,n;super(...e),n={results:[]},(a="state")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n}static getDerivedStateFromProps({results:e},{results:t}){return{results:e||t||[]}}render(){return this.props.children(this.state.results)}}var _=a("zLLH");var C=Object(_.c)({name:"SearchMyBoardsResource",key:"resource",options:({fieldSetKey:e,query:t})=>({field_set_key:e,query:t})},{dangerouslyDisableFetch:({clientResults:e})=>!!e})((function({children:e,clientResults:t,resource:{data:a}}){return o.a.createElement(y,{results:t||a},e)}));function w(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const S=500,I=e=>e.length<b.a;class B extends o.a.PureComponent{constructor(...e){super(...e),w(this,"state",{query:"",debouncedQuery:""}),w(this,"handleQueryChange",e=>{I(e)||this.props.allBoardsResource.isAtEnd?(this.debouncedSetQuery.cancel(),this.setState({query:e,debouncedQuery:e})):(this.setState({query:e}),this.debouncedSetQuery(e))}),w(this,"debouncedSetQuery",E()(e=>this.setState({debouncedQuery:e}),S,{leading:!0,trailing:!0}))}render(){const{children:e,fieldSetKey:t,allBoardsResource:a}=this.props,{query:n,debouncedQuery:r}=this.state;if(!a.isLoaded||!a.data)return e({isLoaded:!1});const i=Array.isArray(a.data)?a.data:a.data.all_boards,l=!I(r);let s,d;return l?a.isAtEnd&&(s=Object(h.a)(i,r)):(s=i,a.isAtEnd||a.isFetching||(d=a.fetchMore)),o.a.createElement(C,{clientResults:s,fieldSetKey:t,query:r},t=>e({isLoaded:!0,isSearch:l,query:n,onQueryChange:this.handleQueryChange,results:t,fetchMore:d}))}}var x=a("XCz/");function O({children:e,...t}){return o.a.createElement(x.a,{name:"web_paginated_boards"},({anyEnabled:a})=>{const n=a?B:f;return o.a.createElement(n,t,e)})}var T=a("w70y");function k(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const M="merge";class D extends o.a.Component{constructor(...e){super(...e),k(this,"state",{selectedTargetBoard:null}),k(this,"handleChange",e=>{this.setState({selectedTargetBoard:e})}),k(this,"handleSubmit",()=>{const{onSubmit:e}=this.props,{selectedTargetBoard:t}=this.state;t&&e(t)}),k(this,"renderModalBody",()=>{const{boardsResource:e,sourceBoardId:t}=this.props,{selectedTargetBoard:a}=this.state,{data:n}=e;if(!n)return o.a.createElement(c.M,{accessibilityLabel:l.a._("Loading board list","spinner accessibility label","spinner accessibility label"),show:!0});const r=n.find(e=>e.id===t);return 0===n.filter(e=>e.id!==t).length?o.a.createElement(c.T,null,l.a._("There is no board to merge this board into.","helper text for selecting merge target board","helper text for selecting merge target board")):o.a.createElement(c.d,null,o.a.createElement(c.d,{paddingY:1},o.a.createElement(O,{fieldSetKey:M,allBoardsResource:e},e=>e.isLoaded?o.a.createElement(u,{boards:e.results.filter(e=>e.id!==t),fetchMore:e.fetchMore,onSearchQueryUpdate:e.onQueryChange,onSelect:this.handleChange,searchQuery:e.query,selectedBoard:a}):null)),a&&r&&o.a.createElement(c.d,{paddingY:2},o.a.createElement(m.a,{sourceBoard:r,targetBoard:a})))})}render(){const{boardsResource:{data:e},onCancel:t}=this.props,{selectedTargetBoard:a}=this.state;return o.a.createElement(c.d,{color:"white",rounding:2,width:440},o.a.createElement(c.d,{display:"flex",justifyContent:"center",paddingY:5,paddingX:3},o.a.createElement(c.r,{size:"md"},a?l.a._("Move Pins and delete board?","title for board merging modal","title for board merging modal"):l.a._("Move all Pins to...","title for board merging modal","title for board merging modal"))),o.a.createElement(c.n,null),o.a.createElement(c.d,{padding:3},this.renderModalBody()),o.a.createElement(c.n,null),o.a.createElement(c.d,{padding:3,display:"flex",justifyContent:"end"},o.a.createElement(c.d,{display:"flex",marginStart:-1,marginEnd:-1},o.a.createElement(c.d,{paddingX:1},o.a.createElement(c.e,{inline:!0,onClick:t,text:l.a._("Cancel")})),!!e&&o.a.createElement(c.d,{paddingX:1},o.a.createElement(c.e,{color:"red",disabled:!a,inline:!0,onClick:this.handleSubmit,text:l.a._("Move Pins and Delete Board","button for merging a board","button for merging a board")})))))}}function j(e){const t=Object(T.a)({name:"BoardsResource",options:{privacy_filter:"all",sort:"alphabetical",field_set_key:M,username:"me"},allowStale:!1});return o.a.createElement(D,Object.assign({},e,{boardsResource:t}))}},"/5qN":function(e,t,a){a.d(t,"a",(function(){return v}));var n=a("q1tI"),o=a.n(n),r=a("Ye/N"),i=a("rYoy"),l=a("CvCA"),s=a("nGHF"),d=a("n6mq");const c=Object(n.lazy)(()=>a.e("ReactCopyToClipboardLibrary").then(a.t.bind(null,"P5Jw",7)));function u({linkURL:e,onDidFocus:t,onDidClickCopyButton:a}){const{showOneToast:n}=Object(s.b)(),u=r.a._("Copy link","[button] copy a URL link shown, to paste in another place","[button] copy a URL link shown, to paste in another place");return o.a.createElement(d.d,{display:"flex",alignItems:"center",paddingX:4},o.a.createElement(d.d,{flex:"grow",marginEnd:2},o.a.createElement(d.V,{id:"copylinkurl",onChange:()=>{},onFocus:t,size:"lg",type:"url",value:e})),o.a.createElement(i.a,{fallback:o.a.createElement(d.e,{inline:!0,text:u,disabled:!0})},o.a.createElement(c,{text:e,onCopy:(e,t)=>{t&&n(({onHide:e})=>o.a.createElement(l.a,{onHide:e,text:r.a._("Link copied to clipboard!","toast message to confirm if users copied the url successfully","toast message to confirm if users copied the url successfully")})),a()}},o.a.createElement(d.e,{inline:!0,text:u,size:"lg"}))))}var m=a("mvLR"),h=a("oVol"),b=a("U4JR"),g=a("udob");const p=e=>({invite_category:4,invite_channel:12,object_type:h.a.BOARD,object_id:e}),f=e=>({component:13305,element:10921,objectId:e,view:5,viewParameter:3059});function v({boardId:e}){const[t,a]=Object(n.useState)(!1),[r,i]=Object(n.useState)(null);Object(n.useEffect)(()=>{if(!r){const t=p(e),{cancel:a,promise:n}=Object(m.a)(g.a.createShareInviteData(t));return n.then(e=>i(e)),()=>{a()}}},[]);const l=r?r.invite_url:"...",s=()=>{null===r||t||(a(!0),g.a.logShareInvite(p(e),r))};return o.a.createElement(u,{linkURL:l,onDidClickCopyButton:()=>{Object(b.a)(101,f(e)),s()},onDidFocus:s})}},"0BOE":function(e,t,a){a.d(t,"a",(function(){return r}));const n={"á":"a","à":"a","â":"a","ä":"a","ã":"a","å":"a","æ":"a","ç":"c","é":"e","è":"e","ê":"e","ë":"e","í":"i","ì":"i","î":"i","ï":"i","ñ":"n","ó":"o","ò":"o","ô":"o","ö":"o","õ":"o","ø":"o","œ":"o","ß":"s","ú":"u","ù":"u","û":"u","ü":"u"},o=e=>{if(!e)return"";let t="";for(let a=0;a<e.length;a+=1)t+=n[e.charAt(a)]||e.charAt(a);return t},r=(e,t,a="name")=>{const n=t.toLowerCase();return e.filter(e=>((e,t)=>{const a=t.split(" "),n=e.split(" ");let r=0;for(let i=0;i<n.length;i+=1){(o(n[i]).includes(a[r])||n[i].includes(a[r]))&&(r+=1)}return r===a.length})(e[a].toLowerCase(),n))}},"0SCs":function(e,t,a){a.d(t,"a",(function(){return r})),a.d(t,"c",(function(){return i})),a.d(t,"b",(function(){return l}));var n=a("l61J"),o=a("pLLR");function r(e,t=!0){const{experiments:a}=Object(o.d)(),{group:r,anyEnabled:i}=Object(n.a)(e,{activate:!0,activateExperiment:e=>{a.v2ActivateExperiment(e)},group:a.v2GetGroup(e)||"",userIsEligible:t});return{group:r,anyEnabled:i}}function i(e,t=!0){const{experiments:a}=Object(o.d)(),{group:r,anyEnabled:i}=Object(n.a)(e,{activate:!1,activateExperiment:()=>{},group:a.v2GetGroup(e)||"",userIsEligible:t});return{group:r,anyEnabled:i}}function l(e,t=!0){const{experiments:a}=Object(o.d)();return Object(n.a)(e,{activate:!1,activateExperiment:e=>{a.v2ActivateExperiment(e)},group:a.v2GetGroup(e)||"",userIsEligible:t})}},"0rqM":function(e,t,a){a.d(t,"a",(function(){return s}));var n=a("q1tI"),o=a.n(n),r=a("Ye/N"),i=a("TiQD"),l=a("n6mq");function s({cancelButtonLabel:e,confirmButtonLabel:t,heading:a,message:n,onCancel:s,onConfirm:d}){const c=a||r.a._("Are you sure?"),u=e||r.a._("Cancel");return o.a.createElement(i.b,{accessibilityModalLabel:c,footer:o.a.createElement(l.d,{marginEnd:-1,marginStart:-1},o.a.createElement(l.d,{"data-test-id":"cancel-button",padding:1},o.a.createElement(l.e,{onClick:s,size:"lg",text:u})),o.a.createElement(l.d,{"data-test-id":"confirm-button",padding:1},o.a.createElement(l.e,{color:"red",onClick:d,size:"lg",text:t}))),heading:c,onDismiss:s,role:"alertdialog"},o.a.createElement(l.d,{padding:4},o.a.createElement(l.T,null,n)))}},"2WXK":function(e,t,a){var n=a("q1tI");let o=null,r=!1,i=0;const l=()=>{o&&clearTimeout(o),r=!0,o=setTimeout(()=>{r=!1},100)};t.a=()=>{const[e,t]=Object(n.useState)(!1),a=Object(n.useRef)(null);Object(n.useEffect)(()=>(0===i&&window.addEventListener("scroll",l),i+=1,()=>{a.current&&clearTimeout(a.current),(i-=1)||window.removeEventListener("scroll",l)}),[]);const o=e=>{a.current&&clearTimeout(a.current),a.current=e&&r?setTimeout(()=>o(!0),100):setTimeout(()=>{t(e)},32)};return{isHovering:e,hoverHandlers:Object(n.useRef)({onMouseOver:()=>o(!0),onMouseLeave:()=>o(!1)}).current}}},"2Y2E":function(e,t,a){a.d(t,"a",(function(){return i}));var n=a("q1tI"),o=a.n(n),r=a("OQKm");function i({board:e,children:t}){const[a,i]=Object(n.useState)(!1);return o.a.createElement(n.Fragment,null,t(()=>i(!0)),a&&o.a.createElement(r.a,{board:e,onDismiss:()=>i(!1)}))}},"3j7w":function(e,t,a){a.d(t,"a",(function(){return r}));var n=a("q1tI"),o=a.n(n);class r extends o.a.PureComponent{constructor(...e){var t,a,n;super(...e),n=()=>{const{isAtEnd:e,isFetching:t,fetchMore:a,scrollBuffer:n,scrollHeight:o,scrollTop:r}=this.props;e||t||r+n>o&&a()},(a="check")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n}componentDidMount(){setTimeout(this.check)}componentDidUpdate(){this.check()}render(){return null}}},"5FNA":function(e,t,a){a.d(t,"c",(function(){return l})),a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return d}));var n=a("qtKf"),o=a("Pqnw"),r=a("Wer7");const i=["alphabetical","last_pinned_to","oldest","newest","group_boards_at_top","custom"],l={name:"BoardsResource",key:"boardsResource",options:({boardOrder:e,filterStories:t,mixPublicSecret:a,username:n})=>({privacy_filter:"all",sort:e||"last_pinned_to",field_set_key:"profile_grid_item",filter_stories:t,username:n,page_size:25,group_by:a?"mix_public_private":"visibility",include_archived:!0,redux_normalize_feed:!0})},s=(e,t,a)=>({privacy_filter:t?"secret":"public",sort:a||"last_pinned_to",field_set_key:"profile_grid_item",username:e}),d=e=>i.reduce((t,a)=>{const i=[Object(o.a)("profileBoards",Object(n.c)(e,a))];return[!0,!1].forEach(t=>{[!0,!1].forEach(n=>{i.push(Object(r.f)(l.name,l.options({username:e,boardOrder:a,mixPublicSecret:t,filterStories:n})))})}),t.concat(i)},[])},"88U9":function(e,t,a){a.d(t,"a",(function(){return o}));const n=3;function o(e,t){const a=t.length>n;return{limitedCollaborators:t.slice(0,a?2:3),overflowNumber:a?e-n+1:0}}},"8Mj5":function(e,t,a){a.d(t,"a",(function(){return v}));var n=a("q1tI"),o=a.n(n),r=a("n6mq");function i({children:e}){return o.a.createElement(r.d,{dangerouslySetInlineStyle:{__style:{boxShadow:"0 0 0 1px #fff"}},rounding:"circle"},e)}var l=a("Ye/N");function s({onClick:e,overlap:t,size:a}){return o.a.createElement(r.d,{marginStart:t},o.a.createElement(i,null,o.a.createElement(r.t,{accessibilityLabel:l.a._("Add","facePile.addButton","Accessibility label for button to add a collaborator"),bgColor:"lightGray",icon:"add",iconColor:"darkGray",onClick:e,size:a})))}function d({style:e}){return o.a.createElement(r.d,{bottom:!0,dangerouslySetInlineStyle:{__style:e||{}},left:!0,position:"absolute",right:!0,rounding:"pill",top:!0})}function c({children:e,hovered:t}){return o.a.createElement(r.d,{position:"relative"},o.a.createElement(d,{style:t?{zIndex:1,backgroundColor:"rgba(0,0,0,0.06)"}:null}),e)}const u=48;function m({addButtonRef:e,hovered:t,overlap:a}){return o.a.createElement(r.d,{dangerouslySetInlineStyle:{__style:{zIndex:1}},key:"addIcon"},o.a.createElement(r.d,{marginStart:a},o.a.createElement(c,{hovered:t},o.a.createElement(i,null,o.a.createElement(r.d,{alignItems:"center",color:"lightGray",display:"flex",height:u,justifyContent:"center",ref:e,rounding:"circle",width:u},o.a.createElement(r.s,{accessibilityLabel:l.a._("Add","ui.Facepile","Accessibility label on icon"),icon:"add",color:"darkGray",size:20}))))))}const h={xs:24,sm:32,md:40,lg:48,xl:56};function b({count:e,size:t}){const a=h[t];return o.a.createElement(i,null,o.a.createElement(r.d,{alignItems:"center",color:"lightGray",display:"flex",height:a,justifyContent:"center",position:"relative",rounding:"circle",width:a},o.a.createElement(r.T,{size:"lg",weight:"bold"},e>99?"99+":e)))}var g=a("7pfs"),p=a("Cufx");function f({isDim:e,name:t,size:a,src:n}){const i=h[a];return o.a.createElement(r.d,{color:"white",height:i,width:i,rounding:"circle"},o.a.createElement(r.d,{dangerouslySetInlineStyle:{__style:{opacity:e?.5:1}}},o.a.createElement(p.a,{name:t,outline:!0,src:n})))}function v({addButtonRef:e,additionalCount:t,faces:a,faceSize:n,onAddClick:i,onClick:l,oneClickTargetFacepile:d,overlap:u,pileRef:h,showAddButton:p}){const v=({apply:e,children:t})=>o.a.createElement(r.d,{marginStart:e?u:void 0},t);return o.a.createElement(g.a,null,({hovered:g,onMouseEnter:E,onMouseLeave:y})=>{const _=a.map(({isDim:e,key:t,name:a,src:r},i)=>o.a.createElement(v,{apply:0!==i,key:`face-${i}`},o.a.createElement(c,{hovered:g&&!!l},o.a.createElement(f,{key:null!=t?t:a,isDim:e,name:a,size:n,src:r}))));t&&_.push(o.a.createElement(r.d,{dangerouslySetInlineStyle:{__style:{zIndex:1}},key:"additionalCount"},o.a.createElement(v,{apply:!0},o.a.createElement(c,{hovered:g&&!!l},o.a.createElement(b,{count:t,size:n}))))),d&&p&&_.push(o.a.createElement(m,{addButtonRef:e,hovered:g&&!!l,overlap:u}));const C=l?o.a.createElement(r.S,{ref:h,onTap:l,rounding:"pill"},o.a.createElement(r.d,{alignItems:"center",display:"flex"},_)):_;return o.a.createElement(r.d,{alignItems:"center",display:"flex",onMouseEnter:E,onMouseLeave:y},C,!d&&p&&i&&o.a.createElement(r.d,{dangerouslySetInlineStyle:{__style:{zIndex:2}},ref:e},o.a.createElement(s,{onClick:i,overlap:u,size:n})))})}},"8cMa":function(e,t,a){var n=a("q1tI"),o=a.n(n),r=a("Ye/N"),i=a("n6mq");t.a=function({type:e}){const t={group:{accessibilityLabel:r.a._("group board","Board picker group board icon","Board picker group board icon"),icon:"people"},protected:{accessibilityLabel:r.a._("protected board","Board picker protected board icon","Board picker protected board icon"),icon:"protect"},secret:{accessibilityLabel:r.a._("secret board","Board picker secret board icon","Board picker secret board icon"),icon:"lock"},sections:{accessibilityLabel:r.a._("board with sections","Board picker board with sections icon","Board picker board with sections icon"),icon:"arrow-forward"},sectionsInline:{accessibilityLabel:r.a._("board with sections","Board picker board with sections icon","Board picker board with sections icon"),icon:"arrow-down"}}[e];return o.a.createElement(i.d,{marginStart:1},o.a.createElement(i.d,{marginStart:2},"sections"===e||"sectionsInline"===e?o.a.createElement(i.s,{accessibilityLabel:t.accessibilityLabel,icon:t.icon,size:"12",color:"darkGray"}):o.a.createElement(i.s,{accessibilityLabel:t.accessibilityLabel,icon:t.icon,size:16,color:"darkGray"})))}},"9QW3":function(e,t,a){a.d(t,"a",(function(){return i}));const n={row:0,section:0},o={row:-1,section:-1},r=()=>void 0;class i{constructor(e){this.index=Object.assign({},n),this.sections=e,this.updateCallback=r,this.selectItem=r}getIndex(){return this.index}isAtStart(){const{row:e,section:t}=this.index;return 0===e&&0===t}isAtEnd(){const{row:e,section:t}=this.index,a=this.sections[t]||[];return this.sections.length===t+1&&a.length===e+1}next(){if(this.isAtEnd())return;const{row:e,section:t}=this.index;e===o.row&&t===o.section?this.index=Object.assign({},n):this.sections[t].length>e+1?this.index.row+=1:(this.index.section+=1,this.index.row=0),this.updateCallback(!0)}prev(){if(this.isAtStart())return;const{row:e,section:t}=this.index;if(e===o.row&&t===o.section)this.index=Object.assign({},n);else if(e>0)this.index.row-=1;else{const e=this.index.section-1;this.index={section:e,row:this.sections[e].length-1}}this.updateCallback(!0)}select(){const{row:e,section:t}=this.index;this.selectItem((this.sections[t]||[])[e])}setInactive(){this.index=Object.assign({},o),this.updateCallback()}setSelectItem(e){this.selectItem=e}setUpdateCallback(e){this.updateCallback=e}updateIndex(e){this.index=e,this.updateCallback()}}},ADns:function(e,t,a){var n=a("q1tI"),o=a.n(n),r=a("/MKj"),i=a("Ye/N"),l=a("oRao"),s=a("vvax"),d=a("n6mq");var c=({followText:e,followerCount:t,userFollowed:a})=>Object(s.b)(i.a._("{{ followCount }} {{ followText }}"),{followCount:o.a.createElement(d.d,{"data-test-id":"followCount",paddingX:1,key:"followCount",opacity:a?void 0:.8},o.a.createElement(d.T,{color:a?"gray":"white"},o.a.createElement(l.a,{value:t,shortform:!0,shortformMaximumFractionDigits:0}))),followText:o.a.createElement(d.d,{"data-test-id":"followText",paddingX:1,key:"followText"},o.a.createElement(d.T,{color:a?"darkGray":"white",weight:"bold"},e))}),u=a("CvCA"),m=a("fc1g"),h=a("U4JR"),b=a("nGHF"),g=a("ANjH"),p=a("ZVOf");function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.a=Object(g.compose)(Object(r.connect)((function({mostRecentPin:e,users:t},{id:a,userFollowed:n}){const o=(t||{})[a];return{followerCount:o?o.follower_count:null,mostRecentPin:e?e.id:null,userFollowed:o?o.explicitly_followed_by_me:n}}),(function(e){return{clearMostRecentPin:()=>e(Object(m.a)(null)),follow:(t,a)=>e(Object(p.a)(t,a)),unfollow:(t,a)=>e(Object(p.b)(t,a))}})),b.c)(class extends n.PureComponent{constructor(...e){super(...e),f(this,"handleButtonClick",({event:e})=>{this.props.shouldStopEventPropagation&&e.stopPropagation(),Object(h.a)(101,{component:13672,element:11951,objectId:this.props.id,view:4,viewParameter:3107}),this.toggleFollowUnfollow()}),f(this,"handleClick",({event:e})=>{this.props.shouldStopEventPropagation&&e.stopPropagation(),this.toggleFollowUnfollow()}),f(this,"toggleFollowUnfollow",()=>{this.props.userFollowed?this.unfollow():(Object(h.a)(45,{objectId:this.props.id,view:4,viewParameter:3107}),this.follow())}),f(this,"follow",()=>{const{follow:e,id:t,onUserFollow:a,mostRecentPin:n,clearMostRecentPin:o}=this.props;e(t,n),this.showConfirmation(),a&&a(!0),o()}),f(this,"showConfirmation",()=>{const{fullName:e,imageUrl:t,profileUrl:a,toastManagerContext:n,suppressToasts:r}=this.props;r||n.showOneToast(({onHide:n})=>o.a.createElement(u.a,{onHide:n,text:o.a.createElement(o.a.Fragment,null,o.a.createElement(d.T,{color:"white"},i.a._("Now following","text that comes before a board/user name in toast","text that comes before a board/user name in toast")),o.a.createElement(d.T,{color:"white",weight:"bold"},e)),href:a,imageUrl:t}))}),f(this,"unfollow",()=>{const{id:e,onUserFollow:t,unfollow:a,mostRecentPin:n,clearMostRecentPin:o}=this.props;a(e,n),t&&t(!1),o()})}renderButton(){const{button:e,followerCount:t,inline:a=!1,isOwnProfile:n,isSecondaryButton:r,size:l,showFollowerCount:s,userFollowed:u}=this.props,m=u?i.a._("Following","User follow button","User follow button"):i.a._("Follow","User follow button","User follow button");if(e)return e({followText:m,onClick:this.handleButtonClick});if(n)return o.a.createElement(d.e,{disabled:!0,text:i.a._("This is you","Button label to note that this is your Profile","Button label to note that this is your Profile")});if(s){const e="number"==typeof t?o.a.createElement(c,{followerCount:t,userFollowed:u,followText:m}):m;return o.a.createElement(d.S,{onTap:this.handleClick},o.a.createElement(d.d,{color:u?"lightGray":"red",rounding:2,paddingX:3,paddingY:3},o.a.createElement(d.d,{display:"flex",alignItems:"center"},e)))}return o.a.createElement(d.d,{display:"inlineBlock","data-test-id":`user-${u?"unfollow":"follow"}-button`},o.a.createElement(d.e,{color:r||u?"gray":"red",selected:r&&!!u,inline:a,onClick:this.handleButtonClick,size:null!=l?l:void 0,text:m}))}render(){const{showPulsar:e,userFollowed:t}=this.props;return o.a.createElement(d.d,{position:"relative",display:"flex"},this.renderButton(),e&&o.a.createElement(d.S,{onTap:this.handleClick},o.a.createElement(d.d,{position:"absolute",display:"inlineBlock",dangerouslySetInlineStyle:{__style:{marginLeft:-86,marginTop:-28}}},o.a.createElement(d.F,{paused:t||!1}))))}})},EwHv:function(e,t,a){a.d(t,"a",(function(){return b}));var n=a("q1tI"),o=a.n(n),r=a("+wrf"),i=a("Ye/N"),l=a("3j7w"),s=a("n6mq");function d(e){const{fetchMore:t,invites:a,isAtEnd:n,isFetching:r,onBoardLeave:d,refreshData:c,scroll:u,renderInvite:m}=e;return o.a.createElement("div",null,u&&o.a.createElement(l.a,{scrollBuffer:3*u.container.clientHeight,scrollHeight:u.container.scrollHeight,scrollTop:u.top,isAtEnd:n,isFetching:r,fetchMore:t}),a.map((e,t)=>e&&e.invited_user&&e.invited_user.id?o.a.createElement(s.d,{key:t},m(e,d,c)):null),r&&!n&&o.a.createElement(s.M,{accessibilityLabel:i.a._("loading board invites","accessibility label for board collaborator invites loading spinner","accessibility label for board collaborator invites loading spinner"),show:!0}))}var c=a("ViqK"),u=a("mEMi"),m=a("w70y");class h extends o.a.Component{constructor(...e){var t,a,n;super(...e),n=()=>{const{invitesPendingApproval:e,invites:t}=this.props;e.refreshData(),t.refreshData()},(a="handleInvitesDidUpdate")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n}shouldComponentUpdate(e){const{invites:{data:t}}=e,{invites:{data:a}}=this.props;return!a||!!t&&a.length!==t.length}render(){const{board:e,invites:t,invitesPendingApproval:a,scrollInfo:n,onBoardLeave:l,onModalOpen:m,renderInvite:h}=this.props,{full_name:b,image_medium_url:g,username:p}=e.owner,f=i.a._("Owner of this board","boardInviteSheet.CollaboratorList.boardOwner.subtitle","The subtext that identifies the owner of a board");return o.a.createElement(o.a.Fragment,null,t.isLoaded||a.isLoaded?o.a.createElement(u.a,{fetchMore:t.fetchMore},({onScroll:i,setRef:u})=>o.a.createElement(s.d,{width:"100%",onScroll:i,ref:u},o.a.createElement(d,{boardId:e.id,fetchMore:a.fetchMore,invites:a.data||[],isAtEnd:a.isAtEnd,isFetching:a.isFetching,onBoardLeave:l,refreshData:this.handleInvitesDidUpdate,scroll:n,renderInvite:h}),(a.data||[]).length>0?o.a.createElement(s.d,{paddingY:3},o.a.createElement(s.n,null)):null,o.a.createElement(s.d,{paddingY:1},o.a.createElement(c.a,{imageUrl:g,linkURL:`/${p}/`,name:b,subtitle:f,title:b}),(t.data||[]).map(e=>e&&e.invited_user&&e.invited_user.id?o.a.createElement(r.a,{invite:e,key:e.invited_user.id,onBoardLeave:l,onModalOpen:m,onInviteDidUpdate:t.refreshData}):null)))):o.a.createElement(s.M,{show:!0,accessibilityLabel:i.a._("Loading","Loading state for showing board collaborators","Loading state for showing board collaborators")}))}}function b(e){const t=Object(m.a)({name:"BoardInvitesResource",options:{board_id:e.board.id,field_set_key:"boardEdit",status_filters:"new,accepted,contact_request_not_approved",sort:"viewer_first",include_inactive:!0,allow_stale:!1}}),a=Object(m.a)({name:"BoardInvitesResource",options:{board_id:e.board.id,field_set_key:"boardEdit",status_filters:"pending_approval",allow_stale:!1}});return o.a.createElement(h,Object.assign({},e,{invites:t,invitesPendingApproval:a}))}},IBrh:function(e,t,a){a.d(t,"a",(function(){return s}));var n=a("q1tI"),o=a.n(n),r=a("mEMi"),i=(a("9QW3"),a("n6mq"));function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class s extends o.a.Component{constructor(e){super(e),l(this,"setSelectedItemRef",e=>{this.selectedItemRef=e}),l(this,"handleIndexUpdate",e=>{const{indexManager:t}=this.props;this.setState({selectedIndex:t.getIndex(),selectionMovedByKeyboard:!!e})}),l(this,"handleSelectItem",e=>()=>{const{disabled:t,onSelectItem:a}=this.props;t||a(e)}),l(this,"handleMouseEnter",e=>()=>{const{disabled:t,indexManager:a}=this.props;t||a.updateIndex(e)}),l(this,"handleMouseLeave",()=>{const{disabled:e,indexManager:t}=this.props;e||t.setInactive()}),l(this,"renderItems",(e,t)=>{const{renderItem:a}=this.props,{selectedIndex:n}=this.state,{row:r,section:l}=n||{},{customProps:s={},items:d,renderItem:c}=e,{isDisabled:u=(e=>!1)}=s,m=t===l,h=c||a;return h&&d.map((e,a)=>{const n=u(e),l={section:t,row:a},d=m&&a===r;return o.a.createElement(i.d,{"data-test-id":"board-selection",key:a,ref:!n&&d?this.setSelectedItemRef:null},n?h({item:e,hovered:d,sectionProps:s}):o.a.createElement(i.S,{fullWidth:!1,onMouseEnter:this.handleMouseEnter(l),onMouseLeave:this.handleMouseLeave,onTap:this.handleSelectItem(e),rounding:2},h({item:e,hovered:d,sectionProps:s})))})}),l(this,"renderSections",()=>{const{renderSectionHeader:e,sections:t}=this.props;return t.map((t,a)=>o.a.createElement(i.d,{key:a},e&&e(t,a),this.renderItems(t,a)))});const{indexManager:t}=this.props;this.state={selectedIndex:t.getIndex(),selectionMovedByKeyboard:!1},t.setUpdateCallback(this.handleIndexUpdate)}componentDidUpdate(e){const{containerRef:t}=this;if(this.selectedItemRef&&this.state.selectionMovedByKeyboard&&t){const e=this.selectedItemRef;if(!(e instanceof HTMLElement))return;const a=e.getBoundingClientRect(),n=a.top,o=a.bottom,r=t.getBoundingClientRect(),i=r.top;o>=r.bottom?e.scrollIntoView(!1):n<=i&&e.scrollIntoView(!0)}e.indexManager!==this.props.indexManager&&this.props.indexManager.setUpdateCallback(this.handleIndexUpdate)}render(){const{grow:e=!1,maxHeight:t,fetchMore:a}=this.props;return o.a.createElement(r.a,{fetchMore:a},({setRef:a,onScroll:n})=>o.a.createElement(i.d,{flex:e?"grow":void 0,height:e?"100%":void 0,maxHeight:t,onScroll:n,overflow:"auto",ref:e=>{this.containerRef=e,a(e)}},this.renderSections()))}}},KEt0:function(e,t,a){a.d(t,"a",(function(){return i}));var n=a("q1tI"),o=a.n(n),r=a("n6mq");function i({size:e}){return o.a.createElement("span",{style:{padding:"0 4px"}},o.a.createElement(r.T,{inline:!0,size:null!=e?e:"md"},"·"))}},KVl1:function(e,t,a){a.d(t,"a",(function(){return u}));var n=a("q1tI"),o=a.n(n),r=a("3gA6"),i=a("n6mq");const l={bubbleOverlay:{backgroundColor:"rgba(0, 0, 0, 0.4)"},hoverOverlay:{backgroundColor:"rgba(0, 0, 0, 0.6)"}};function s({coverImages:e,height:t,storyId:a,width:s,onClick:d,referringSource:c,url:u,text:m,onMouseEnter:h,onMouseLeave:b,isHovered:g}){const[p,f]=Object(n.useState)(!1),v=e&&(e["236x"]||e["280x280"]);return o.a.createElement(i.d,null,o.a.createElement("div",{onMouseEnter:()=>{h?h():f(!0)},onMouseLeave:()=>{b?b():f(!1)}},o.a.createElement(r.b,{onClick:()=>{d&&d()},to:u},o.a.createElement(i.z,{rounding:4},o.a.createElement(i.d,{color:"gray",height:t,width:s||"100%"},v&&o.a.createElement(i.u,{alt:m,fit:"cover",naturalHeight:v.height,naturalWidth:v.width,src:v.url})),o.a.createElement(i.d,{dangerouslySetInlineStyle:{__style:g||p?l.hoverOverlay:v&&l.bubbleOverlay},height:t,left:!0,position:"absolute",top:!0,width:s||"100%"}),o.a.createElement(i.d,{alignItems:"center",display:"flex",height:t,justifyContent:"center",padding:3,position:"absolute",top:!0,width:s||"100%"},o.a.createElement(i.d,{alignItems:"center",color:"lightGray",display:"flex",height:48,padding:3,rounding:"pill"},o.a.createElement(i.T,{align:"center",weight:"bold"},m)))))))}var d=a("gYog"),c=a("U4JR");function u({action:e,items:t,itemHeight:a,itemWidth:r,itemPadding:l,query:u,renderItem:m,slotIndex:h,storyId:b,storyType:g,viewType:p,viewParameter:f}){const[v,E]=Object(n.useState)(0);Object(n.useEffect)(()=>{const e=()=>{E(window.innerWidth)};return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)});const y=r+l,_=Math.floor(v/y)||1,C=t.slice(0,_).map(m);if(e){var w;let n;_>=t.length?n=t[Math.floor(t.length/2)]:(n=t[_-1],C.pop()),C.push(o.a.createElement(s,{key:"actionBubble",coverImages:(null===(w=n.cover_images)||void 0===w?void 0:w[0])||n.images,height:a,onClick:()=>Object(c.a)(101,{view:p,viewParameter:f,story_type:g,story_id:b,entered_query:u}),storyId:b,text:e.text,url:e.url,width:r}))}const S=C.length*y-l;return o.a.createElement(d.a,{componentType:200,contextLogData:{entered_query:u,story_type:g,story_id:b},impressionType:"Story",loggingId:b,slotIndex:h,viewParameter:f,viewType:p},o.a.createElement(i.d,{alignItems:"center",display:"flex",justifyContent:"center",marginBottom:7,marginTop:2},o.a.createElement(i.d,{display:"flex",justifyContent:"between",paddingY:Math.floor(l/4),width:S},C)))}},NdQN:function(e,t,a){var n=a("q1tI"),o=a.n(n),r=a("JW66"),i=a("Ye/N"),l=(a("9QW3"),a("n6mq"));function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.a=class extends n.Component{constructor(...e){super(...e),s(this,"setInputRef",e=>{e&&(this._input=e)}),s(this,"handleKeyDown",e=>{const{disabled:t,indexManager:a}=this.props;if(!t)switch(e.which){case r.a.KeyCode.ENTER:case r.a.KeyCode.NUMPAD_ENTER:e.preventDefault(),a.select();break;case r.a.KeyCode.UP:e.preventDefault(),a.prev();break;case r.a.KeyCode.DOWN:e.preventDefault(),a.next()}})}componentDidMount(){this._input&&this._input.focus()}render(){const{onChange:e,value:t}=this.props;return o.a.createElement("div",{onKeyDown:this.handleKeyDown,style:{width:"100%"}},o.a.createElement(l.J,{accessibilityLabel:"",id:"pickerSearchField",onChange:({value:t})=>e(t),placeholder:i.a._("Search","search bar placeholder text","search bar placeholder text"),ref:this.setInputRef,size:"lg",value:t}))}}},NjDU:function(e,t,a){function n(e){return{type:"UPDATE_USER_PIN_COUNT",payload:e}}function o(e){return{type:"UPDATE_USER_FOLLOWING_COUNT",payload:e}}function r(e){return{type:"UPDATE_USER_SCHEDULED_PIN_COUNT",payload:e}}function i(e,t){return{type:"UPDATE_USER_SOCIAL_NETWORK",payload:{socialNetworkName:e,connected:t}}}a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return o})),a.d(t,"c",(function(){return r})),a.d(t,"d",(function(){return i})),a.d(t,"f",(function(){return l})),a.d(t,"e",(function(){return s}));const l=e=>({type:"USER_DOMAIN_VERIFIED",payload:{verifiedWebsite:e}}),s=e=>({type:"USER_DOMAIN_UNVERIFIED",payload:{verifiedWebsite:e}})},O3d3:function(e,t,a){a.d(t,"a",(function(){return m}));const n="facebook",o="twitter",r="google",i="youtube",l="gplus",s="microsoft",d="etsy",c="instagram",u="dropbox";function m(e){return{[n]:{connected:e.connected_to_facebook||!1},[r]:{connected:e.connected_to_google||!1},[i]:{connected:e.connected_to_youtube||!1},[l]:{connected:!!e.gplus_url,url:e.gplus_url},[s]:{connected:e.connected_to_microsoft||!1},[o]:{connected:!!e.twitter_url,url:e.twitter_url},[d]:{connected:e.connected_to_etsy||!1},[c]:{connected:e.connected_to_instagram||!1},[u]:{connected:e.connected_to_dropbox||!1}}}},OQKm:function(e,t,a){a.d(t,"a",(function(){return I}));var n=a("q1tI"),o=a.n(n),r=a("/5qN"),i=a("+wrf"),l=a("rxSY"),s=a("Ye/N");const d="INVITE_SETTING",c="REQUEST_TO_JOIN_SETTING";var u=a("n6mq");function m({boldHeading:e,setting:t,viewerIsOwner:a}){const n={0:{name:s.a._("Do (almost) everything","save.board.BoardPage.ModalContents.BoardCollabSettings","Heading explaining collaborator permission setting"),description:s.a._("Add, move or delete Pins and sections, comment and react","save.board.BoardPage.ModalContents.BoardCollabSettings","Text explaining collaborator permission setting")},1:{name:s.a._("Save and comment","save.board.BoardPage.ModalContents.BoardCollabSettings","Heading explaining collaborator permission setting"),description:a?s.a._("Save Pins, organize them, comment and react","save.board.BoardPage.ModalContents.BoardCollabSettings","Text explaining collaborator permission setting"):s.a._("Save Pins, organize them, comment, and react. For more permissions, reach out to the board owner!","save.board.BoardPage.ModalContents.BoardCollabSettings.SaveOnly.Collab","Text explaining collaborator permission setting")},[d]:{name:s.a._("Invite other people","save.board.BoardPage.ModalContents.BoardCollabSettings","Heading explaining collaborator permission setting"),description:s.a._("Collaborators can invite others to this board","save.board.BoardPage.ModalContents.BoardCollabSettings","Text explaining collaborator permission setting")},[c]:{name:s.a._("Board requests","save.board.BoardPage.ModalContents.BoardCollabSettings","Heading explaining collaborator permission setting"),description:s.a._("People can request to join this board","save.board.BoardPage.ModalContents.BoardCollabSettings","Text explaining collaborator permission setting")}},r=e?u.r:u.T;return o.a.createElement(o.a.Fragment,null,o.a.createElement(r,{color:"darkGray",size:e?"sm":"lg"},n[t].name),o.a.createElement(u.d,{paddingY:1},o.a.createElement(u.T,{color:"gray",size:"lg"},n[t].description)))}var h=a("EwHv"),b=a("TiQD"),g=a("v/Q4"),p=a("y19s");function f({board:e,currentPermissionLevel:t,navigateToPermissions:a,onDismiss:d}){const c=e.collaborator_count>0,[f,v]=Object(n.useState)(!c),E=Object(g.a)(),{history:y}=Object(p.b)(),_=E.isAuth&&e.owner.id===E.id,C=_||e.collaborator_invites_enabled,w=f&&!c||!f;return o.a.createElement(b.b,{accessibilityModalLabel:f?s.a._("Invite collaborators","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Accessibility label on a modal"):s.a._("Collaborators","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Accessibility label on a modal"),footer:C&&!f?o.a.createElement(u.S,{onTap:()=>v(!0),rounding:8},o.a.createElement(u.d,{display:"flex",alignItems:"center"},o.a.createElement(u.t,{accessibilityLabel:s.a._("Invite collaborators","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","accessibility label on icon button"),icon:"add",bgColor:"red",iconColor:"white"}),o.a.createElement(u.d,{paddingX:3},o.a.createElement(u.T,{size:"lg",weight:"bold"},s.a._("Invite collaborators","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Clickable text to show invite form"))))):null,heading:o.a.createElement(u.d,{padding:8},o.a.createElement(u.r,{align:"center",size:"md"},f?s.a._("Invite collaborators","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Heading for a modal"):s.a._("Collaborators","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Heading for a modal"))),onDismiss:d},o.a.createElement(u.d,{marginBottom:5},w&&o.a.createElement(u.d,{paddingX:6},o.a.createElement(u.d,{paddingY:3},o.a.createElement(u.T,{size:"sm"},_?s.a._("Collaborators can...","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Text before explaining current collaborator permission setting"):s.a._("You can...","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Text before explaining current collaborator permission setting"))),o.a.createElement(u.d,{alignItems:"start",display:"flex",justifyContent:"between",marginBottom:4},o.a.createElement(u.d,{width:"60%"},o.a.createElement(m,{boldHeading:!0,viewerIsOwner:_,setting:t})),_&&o.a.createElement(u.t,{accessibilityLabel:s.a._("Edit board permissions","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Accessibility label on icon button"),icon:"arrow-forward",onClick:a}))),f?o.a.createElement(u.d,{paddingX:2},o.a.createElement(r.a,{boardId:e.id}),o.a.createElement(l.a,{boardId:e.id,boardOwner:e.owner})):o.a.createElement(n.Fragment,null,o.a.createElement(u.d,{paddingX:6,paddingY:5},o.a.createElement(u.T,{size:"sm"},s.a._("Collaborators","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Header before listing collaborators on a group board"))),o.a.createElement(h.a,{board:e,scrollInfo:null,onBoardLeave:()=>{const e=E.isAuth?`/${E.username}`:"/";y.replace(e)},renderInvite:(e,t,a)=>{const n={invite:e,onBoardLeave:t,onInviteDidUpdate:a,useGestaltModal:!0,isDim:!1};return o.a.createElement(i.a,n)}}))))}var v=a("/MKj"),E=a("U4JR"),y=a("pLLR"),_=a("oN2T");const C=0,w=1;function S({board:{collaborator_invites_enabled:e,collaborator_requests_enabled:t,id:a},currentPermissionLevel:r,navigateToCollaborators:i,onDismiss:l}){const[h,g]=Object(n.useState)(r),[p,f]=Object(n.useState)(e),[S,I]=Object(n.useState)(t),[B,x]=Object(n.useState)(!1),O=Object(y.d)(),T=Object(v.useDispatch)();return o.a.createElement(b.b,{accessibilityModalLabel:s.a._("Board permissions","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Accessibility label on a modal"),heading:o.a.createElement(u.d,{paddingY:8,position:"relative"},o.a.createElement(u.d,{position:"absolute",top:!0,left:!O.isRTL,right:O.isRTL,paddingY:8,paddingX:6},o.a.createElement(u.t,{accessibilityLabel:s.a._("Back","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Accessibility label on a button"),icon:"arrow-back",iconColor:"darkGray",onClick:i})),o.a.createElement(u.r,{align:"center",size:"md"},s.a._("Collaborators can...","save.board.BoardPage.ModalContents.BoardCollaboratorsModal","Heading for a modal"))),footer:o.a.createElement(u.d,{display:"flex",justifyContent:"end"},o.a.createElement(u.e,{color:"red",disabled:B||h===r&&p===e&&S===t,inline:!0,onClick:()=>{x(!0);const n={id:a},o={view:5,viewParameter:3472};p!==e&&(n.collaborator_invites_enabled=p,Object(E.a)(p?106:107,{element:11896,...o})),h!==r&&(n.collaborator_permissions_setting=h,Object(E.a)(8841,{...o})),S!==t&&(n.collaborator_requests_enabled=S),T(Object(_.m)(n)).then(()=>l())},size:"lg",text:s.a._("Done","save.board.BoardPage.ModalContents.PermissionsModal","Submit button on a form")})),onDismiss:l},o.a.createElement(u.d,{paddingX:12},o.a.createElement(u.d,{paddingY:3},o.a.createElement(u.T,{size:"sm"},s.a._("Permissions","save.board.BoardPage.ModalContents.PermissionsModal","Heading before listing possible board permissions"))),o.a.createElement(u.d,{alignItems:"center",display:"flex"},o.a.createElement(u.G,{checked:h===C,id:"ALL",onChange:()=>g(C),value:C}),o.a.createElement(u.d,{marginEnd:12,paddingX:2},o.a.createElement(m,{setting:C}))),o.a.createElement(u.d,{display:"flex",paddingY:6},o.a.createElement(u.G,{checked:h===w,id:"SAVE_ONLY",onChange:()=>g(w),value:w}),o.a.createElement(u.d,{marginEnd:12,paddingX:2},o.a.createElement(m,{setting:w}))),o.a.createElement(u.d,{paddingY:3},o.a.createElement(u.T,{size:"sm"},s.a._("Invitations","save.board.BoardPage.ModalContents.PermissionsModal","Heading before group board invitation permission form setting"))),o.a.createElement(u.d,{display:"flex",marginBottom:6},o.a.createElement(u.i,{checked:p,id:"inviteSetting",onChange:({checked:e})=>f(e)}),o.a.createElement(u.d,{marginEnd:12,paddingX:2},o.a.createElement(m,{setting:d}))),o.a.createElement(u.H,null,o.a.createElement(u.i,{checked:S,id:"inviteSetting",onChange:({checked:e})=>I(e)}),o.a.createElement(u.d,{marginEnd:12,paddingX:2},o.a.createElement(m,{setting:c})))))}function I({board:e,onDismiss:t}){const[a,r]=Object(n.useState)("collaboratorsView"),{collaborator_permissions_setting:i}=e;return"collaboratorsView"===a?o.a.createElement(f,{board:e,currentPermissionLevel:i,navigateToPermissions:()=>r("permissionsView"),onDismiss:t}):o.a.createElement(S,{board:e,currentPermissionLevel:i,navigateToCollaborators:()=>r("collaboratorsView"),onDismiss:t})}},OWXb:function(e,t,a){a.d(t,"a",(function(){return o}));var n=a("eOdZ");function o(e){return t=>(function(e){return n.a.create("BoardActionStatusResource",{board_id:e}).callGet({showError:!1}).then(e=>new Promise((t,a)=>{const n=e&&e.resource_response&&e.resource_response.data&&e.resource_response.data.blocking_actions;n?t(n):a(new Error("No blocking actions found in the response"))}))})(e).then(a=>(t(function(e){return{type:"BLOCKING_ACTIONS_UPDATED",payload:e}}({boardId:e,blockingActions:a})),a))}},Pqnw:function(e,t,a){function n(e,t){return{type:"FEED_INVALIDATE",payload:{feedType:e,feedId:t}}}a.d(t,"a",(function(){return n}))},QoKk:function(e,t,a){a.d(t,"a",(function(){return g}));var n=a("q1tI"),o=a.n(n),r=(a("w/op"),a("Ye/N")),i=a("rYoy"),l=a("n6mq");const s=["es-AR","es-BZ","es-BO","pt-BR","en-CA","es-CL","zh-CN","es-CO","es-CR","es-DO","es-EC","es-SV","es-GT","es-HN","zh-HK","he","en-JM","ja","en-KE","zh-MO","es-MX","es-NI","es-PA","es-PE","en-PH","es-PR","en-ZA","ko","zh-TW","en-US","es-VE"];var d=a("pLLR");const c=Object(n.lazy)(()=>a.e("Calendar").then(a.t.bind(null,"sQeT",7))),u=(e,t)=>e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear();function m({onSelectedDate:e,selectedDates:t}){const a=Object(d.d)();return o.a.createElement(i.a,null,o.a.createElement(c,{calendarType:s.includes(a.locale)?"US":"ISO 8601",locale:a.locale||"",className:"DatePicker",enableHistoryView:!1,onClickDay:a=>{1===t.length&&t[0]<a?e([t[0],a]):e([a])},minDetail:"month",nextLabel:o.a.createElement(l.s,{accessibilityLabel:r.a._("Next month","BoardForm.BoardFormExperimentalDatePicker","accessibility label on arrow to go to next calendar month"),icon:"arrow-forward"}),next2Label:null,prevLabel:o.a.createElement(l.s,{icon:"arrow-back",accessibilityLabel:r.a._("Previous month","BoardForm.BoardFormExperimentalDatePicker","accessibility label on arrow to go to previous calendar month")}),prev2Label:null,tileClassName:({date:e})=>{const a=[],[n,o]=t;return n&&u(e,n)?(a.push("start"),o&&a.push("rangeStart")):o&&u(e,o)?a.push("rangeEnd"):2===t.length&&e>=n&&e<=o&&a.push("inRange"),a},tileDisabled:({date:e})=>{return e<=new Date},value:t.length?t:new Date,view:"month"}))}var h=a("TiQD");const b=356;function g({dates:e,onChange:t,onToggleFlyout:a=(()=>{})}){const i=Object(n.useRef)(null),[s,c]=Object(n.useState)(!1),[u,g]=Object(n.useState)(e||[]),p=Object(d.d)(),[f,v]=u||[];let E=f&&f.toLocaleDateString(p.locale)||"";if(v){E+=" - "+u[1].toLocaleDateString(p.locale)}const y=()=>{a(),c(!s)};return o.a.createElement(n.Fragment,null,o.a.createElement("div",{style:{position:"relative"},ref:i},o.a.createElement(l.V,{autoComplete:"off",id:"boardEditDate",onChange:()=>{},onFocus:y,onKeyDown:({event:e})=>{"Backspace"===e.key&&(g([]),t([]))},placeholder:r.a._("Select start and end","BoardForm.BoardFormDateField","placeholder for input field to enter board end and start dates"),size:"lg",value:E}),o.a.createElement(l.d,{dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}},position:"absolute",top:!0,right:!p.isRTL,left:p.isRTL,padding:4},o.a.createElement(l.s,{color:"darkGray",icon:"calendar",accessibilityLabel:r.a._("Select date","BoardForm.BoardFormDateField","accessibility label on calendar icon")}))),s&&o.a.createElement(l.w,null,o.a.createElement(l.d,{position:"absolute",left:p.isRTL,top:!0,zIndex:h.a},o.a.createElement(l.p,{anchor:i.current,idealDirection:"down",onDismiss:y,size:b,positionRelativeToAnchor:!1},o.a.createElement(l.d,{padding:6,width:b},o.a.createElement(m,{onSelectedDate:e=>{g(e),t(e)},selectedDates:u}))))))}},ViqK:function(e,t,a){a.d(t,"a",(function(){return s}));var n=a("q1tI"),o=a.n(n),r=a("Cufx"),i=a("3gA6"),l=a("n6mq");function s(e){const{imageUrl:t,name:a,title:n,subtitle:s,accessory:d,linkURL:c,isDim:u}=e,m={__style:{opacity:u?.5:1}};return o.a.createElement(o.a.Fragment,null,a&&n&&o.a.createElement(l.d,{display:"flex",alignItems:"center",paddingX:4,marginBottom:4},o.a.createElement(l.d,{marginEnd:2,dangerouslySetInlineStyle:m},o.a.createElement(i.b,{to:c||""},o.a.createElement(r.a,{outline:!0,size:"md",name:a,src:t}))),o.a.createElement(l.d,{display:"flex",flex:"grow",alignItems:"stretch",direction:"column",dangerouslySetInlineStyle:m},o.a.createElement(i.b,{to:c||""},o.a.createElement(l.T,{color:"darkGray",size:"lg",truncate:!0,weight:"bold"},n)),o.a.createElement(l.T,{truncate:!0,size:"sm",color:"gray"},s)),d&&o.a.createElement(l.d,{marginStart:4},d)))}},VwDf:function(e,t,a){a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return o}));const n=e=>e.toISOString(),o=({currentEventStartDate:e,currentEventEndDate:t,initialEventStartDate:a,initialEventEndDate:o})=>{let r,i;return e&&t?(r=n(e),i=n(t)):t&&(i=n(t)),o&&!t&&(i=""),a&&!e&&(r=""),o&&n(new Date(o))===t&&(i=null),a&&n(new Date(a))===t&&(r=null),{eventEndDate:i,eventStartDate:r}}},Wrea:function(e,t,a){a.d(t,"e",(function(){return o})),a.d(t,"f",(function(){return r})),a.d(t,"d",(function(){return i})),a.d(t,"c",(function(){return l})),a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return d}));var n=a("Wer7");const o=(e,t)=>a=>a(Object(n.a)("BoardResource",{board_id:e,field_set_key:t})),r=e=>o(e,"pin_count"),i=e=>({type:"BOARD_PIN_COUNT_CHANGED",payload:e}),l=e=>({type:"BOARD_INVITE_ACCEPTED_BY_VIEWER",payload:{boardId:e}}),s=(e,t)=>({type:"BOARD_COVER_IMAGE_UPDATED",payload:{boardId:e,coverPin:t}}),d=e=>({type:"BOARD_DISABLE_MORE_IDEAS_BADGING",payload:{boardId:e}})},ZE2w:function(e,t,a){a.d(t,"c",(function(){return i})),a.d(t,"d",(function(){return l})),a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return d}));var n=a("4dcN"),o=a("eOdZ");const r="collaborator_approve_invite";function i(e,t){return o.a.create("BoardEmailInviteResource",{board_id:e,emails:t}).callCreate()}function l(e,t){return o.a.create("BoardInviteResource",{board_id:e,invited_user_ids:t}).callCreate()}function s(e,t){return a=>{return o.a.create("BoardInviteResource",{board_id:e,invited_user_id:t}).callUpdate().then(()=>{n.a.trackEvent(r,"success")}).catch(()=>n.a.trackEvent(r,"error"))}}function d(e,t,a){return t=>{const{invited_user:n,status:r,board:{id:i}}=e;return o.a.create("accepted"===r?"BoardCollaboratorResource":"BoardInviteResource",{ban:a,board_id:i,field_set_key:"boardEdit",invited_user_id:n.id}).callDelete({showError:!1})}}},e3GI:function(e,t,a){a.d(t,"a",(function(){return u}));var n=a("q1tI"),o=a.n(n),r=a("Ye/N"),i=a("oRao"),l=a("vvax"),s=a("n6mq");function d({boardName:e,collaboratorCount:t}){const a=o.a.createElement(s.T,{inline:!0,key:"board_name",weight:"bold"},e);return o.a.createElement(s.T,null,t?Object(l.b)(r.a._("When you delete {{ boardName }}, you'll lose {{ n_collaborators }} and all followers of that board.","helper text for selecting merge target board","helper text for selecting merge target board"),{boardName:a,n_collaborators:o.a.createElement(s.T,{inline:!0,key:"collaborator_count",weight:"bold"},Object(l.b)(r.a.ngettext("{{ count }} collaborator","{{ count }} collaborators",t,"label for n board collaborator(s)","label for n board collaborator(s)"),{count:o.a.createElement(i.a,{value:t})}))}):Object(l.b)(r.a._("When you delete {{ boardName }}, you'll lose all followers of that board.","helper text for selecting merge target board","helper text for selecting merge target board"),{boardName:a}))}function c({board:{name:e,is_collaborative:t}}){const a=t?r.a._("your {{ boardName }} group board"):r.a._("your {{ boardName }} board");return o.a.createElement(s.T,{inline:!0,key:`yourboard_${e}`},Object(l.b)(a,{boardName:o.a.createElement(s.T,{inline:!0,key:`board_${e}`,weight:"bold"},e)}))}function u({sourceBoard:e,targetBoard:t}){return o.a.createElement(s.d,null,o.a.createElement(s.d,{paddingY:2},o.a.createElement(s.T,null,Object(l.b)(r.a._("You're about to move all the Pins from {{ sourceBoardName }} to a new section in {{ targetBoardName }}.","helper text for selecting merge target board","helper text for selecting merge target board"),{sourceBoardName:o.a.createElement(c,{key:"sourceBoard",board:e}),targetBoardName:o.a.createElement(c,{key:"targetBoard",board:t})}))),o.a.createElement(s.d,{paddingY:2},o.a.createElement(d,{boardName:e.name,collaboratorCount:e.collaborator_count})))}},gONw:function(e,t,a){var n=a("q1tI"),o=a.n(n),r=a("n6mq");function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class l extends n.Component{constructor(...e){super(...e),i(this,"state",{isHovering:!1}),i(this,"onHover",()=>{this.setState({isHovering:!0})}),i(this,"offHover",()=>{this.setState({isHovering:!1})})}render(){const{name:e,selected:t,image:a,inFlyoutExp:n}=this.props;return n?o.a.createElement(r.d,{alignItems:"center",color:this.state.isHovering?"lightGray":"transparent",direction:"row",display:"flex",paddingX:4,paddingY:2,onMouseOver:this.onHover,onMouseOut:this.offHover},o.a.createElement(r.d,null,o.a.createElement(r.z,{height:40,width:40,rounding:2},this.state.isHovering&&a?o.a.createElement(r.u,{alt:"",color:"",fit:"cover",naturalHeight:a.height,naturalWidth:a.width,src:a.url}):o.a.createElement(r.d,{color:"lightGray",height:40,width:40}))),o.a.createElement(r.d,{padding:2},o.a.createElement(r.r,{size:"sm"},e))):o.a.createElement(r.d,{alignItems:"center",color:t?"lightGray":"transparent",direction:"row",display:"flex",paddingX:6,paddingY:2},o.a.createElement(r.d,null,o.a.createElement(r.s,{color:t?"darkGray":"gray",icon:"add",accessibilityLabel:""})),o.a.createElement(r.d,{marginStart:3},o.a.createElement(r.T,{color:t?"darkGray":"gray",weight:"bold"},e)))}}var s=a("Ye/N"),d=a("w70y"),c=a("U4JR"),u=a("oTtT");t.a=({inBoardToCollectionsExp:e,inFlyoutExp:t,inFirstBoardCreateGestaltExp:a,pinId:i,image:m,minHeight:h,onBoardSelected:b})=>{const[g,p]=Object(n.useState)(-1),f=Object(u.b)(),{data:v=[],error:E,isLoaded:y}=Object(d.a)({name:"BoardTitleSuggestionsResource",options:{pin_id:i}}),_=(e=>Object(n.useMemo)(()=>e&&e.length?e.map(e=>e.title):[],[e]))(v);Object(n.useEffect)(()=>{y&&a&&f&&(E?f.error():f.stop())},[y]);const C=()=>{p(-1)},w=(e,a)=>{const n=g===a;return o.a.createElement("li",{key:a},o.a.createElement(r.S,{onMouseEnter:()=>(e=>{p(e)})(a),onMouseLeave:C,onTap:()=>(e=>{b(_[e],!1),Object(c.a)(101,{component:13025,element:23})})(a)},o.a.createElement(l,{selected:n,name:e,inFlyoutExp:t,image:m})))};return y?_&&_.length?t?(()=>o.a.createElement("div",null,o.a.createElement("ul",null,_.map(w))))():a?(()=>o.a.createElement(r.d,null,o.a.createElement(r.d,{marginTop:5,marginStart:6,marginBottom:3},o.a.createElement(r.T,null,e?s.a._("Suggested collection names","collectionSuggestionList.title","text above suggested collection names list"):s.a._("Suggested board names","text above suggested board names list","text above suggested board names list"))),o.a.createElement("ul",null,_.map(w))))():o.a.createElement(r.d,null,o.a.createElement(r.d,{marginTop:2,paddingX:5},o.a.createElement(r.T,null,s.a._("Suggested board names"))),o.a.createElement("ul",null,_.map(w))):null:o.a.createElement(r.d,{alignItems:"center",display:"flex",height:"100%",justifyContent:"center",minHeight:h||""},o.a.createElement(r.M,{accessibilityLabel:s.a._("Loading board suggestions","Accesibility label for loading board suggestions","Accesibility label for loading board suggestions"),show:!0}))}},gdcG:function(e,t,a){a.d(t,"a",(function(){return i}));var n=a("q1tI"),o=a.n(n),r=a("2WXK");function i(e){return function(t){const{isHovering:a,hoverHandlers:n}=Object(r.a)();return o.a.createElement(e,Object.assign({},t,{hoverHandlers:n,isHovering:a}))}}},guDk:function(e,t,a){a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return l}));var n=a("Ye/N");const o=()=>n.a._("We can’t complete this action because you’re in ‘read-only’ mode. Switch to ‘edit mode’ to make changes.","adminMode.writeOnlyAction.errorMessage","A toast message indicating that the user is trying to perform a write action in read-only mode."),r=[25,7],i=e=>!!e&&("string"==typeof e?e===o():!!e.code&&r.includes(e.code)),l=e=>e&&r.includes(e.code)?o():null},iilV:function(e,t,a){a.d(t,"d",(function(){return n})),a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return r})),a.d(t,"f",(function(){return i})),a.d(t,"e",(function(){return l}));const n={zIndex:0},o={padding:"2px 0",fontSize:"18px",fontWeight:"bold",color:"#555555"},r={overflow:"hidden",textOverflow:"ellipsis",width:"100%"},i={border:"2px solid #fff",borderRadius:"50%",position:"absolute",bottom:50,left:8,width:40,height:40},l={fontSize:"14px",color:"#555555",lineHeight:"1.14"};t.c={display:"inline-block",float:"none",verticalAlign:"top"}},jZhD:function(e,t,a){a.d(t,"a",(function(){return i}));var n=a("q1tI"),o=(a("17x9"),a("pdBG"));function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class i extends n.Component{constructor(...e){super(...e),r(this,"searchCache",Object.create(null)),r(this,"lastSearchedQuery",null),r(this,"search",e=>{this.lastSearchedQuery=e,e in this.searchCache?this.props.onTypeaheadSuggestionsChange(this.searchCache[e],e):this.provider.search(e,({items:t})=>{this.searchCache[e]=t,e===this.lastSearchedQuery&&this.props.onTypeaheadSuggestionsChange(t,e)})})}componentDidMount(){const e=this.props.resourceOptions||{};this.provider=new o.a({resource_name:this.props.resourceName,...e});const{value:t}=this.props;null!=t&&this.props.allowSearchOnMount&&this.search(this.props.value)}componentDidUpdate(e){const{value:t}=this.props;null!=t&&t!==e.value&&this.search(t)}render(){return this.props.children||null}}r(i,"defaultProps",{resourceName:"TypeaheadResource"})},jdx6:function(e,t,a){a.d(t,"b",(function(){return d}));var n=a("q1tI"),o=a.n(n),r=a("8cMa"),i=a("JW66"),l=a("Ye/N"),s=a("n6mq");function d(e,t){const a=e&&e.length>1?new RegExp(e,"i"):"";return e&&e.length>1?t.split(a).reduce((a,n,r)=>{if(a.length>0&&e&&e.length){const i=t.toLowerCase().indexOf(e.toLowerCase());return a.concat(o.a.createElement("em",{key:r,style:{borderBottom:"1px solid #333",fontStyle:"normal",paddingBottom:"1px"}},t.substring(i,i+e.length)),n)}return[n]},[]):t}t.a=function(e){const{disabled:t,item:a,isSection:n,isSelectMode:c,isWithinSectionPicker:u,saveState:m,searchQuery:h,selected:b}=e,g=n?null:a,p=n?a:null,f=p&&p.title||g&&g.name||"";let v="",E=!1,y="",_=0;g&&({image_cover_url:v,is_collaborative:E,privacy:y,section_count:_=0}=g);const C=d(h,f),w=y===i.a.BoardPrivacy.SECRET,S=!t&&(b||!!m),I=!u&&_>0,B=_>0?"boardWithSection":"boardWithoutSection",x=c?l.a._("Select","Board select button label","Board select button label"):l.a._("Save","Pin save button label","Pin save button label");return o.a.createElement(s.d,{alignItems:"center",color:S?"lightGray":"white",display:"flex",paddingX:6,paddingY:2,"data-test-id":B},g?o.a.createElement(s.d,{height:36,width:36,color:"lightGray",overflow:"hidden",rounding:2,marginEnd:2,flex:"none"},v?o.a.createElement(s.u,{src:v,alt:f,fit:"cover",naturalWidth:1,naturalHeight:1}):o.a.createElement("span",null)):o.a.createElement(s.d,{paddingX:2}),o.a.createElement(s.d,{alignItems:"center",justifyContent:"between",display:"flex",flex:"grow"},o.a.createElement(s.T,{color:t?"gray":"darkGray",size:"md",truncate:!0,weight:"bold"},C),(I||!S)&&o.a.createElement(s.d,{alignItems:"center",display:"flex"},w&&o.a.createElement(r.a,{type:"secret"}),E&&o.a.createElement(r.a,{type:"group"}),I&&o.a.createElement(r.a,{type:"sections"})),!I&&S&&!m&&o.a.createElement(s.d,{alignItems:"center",color:"red","data-test-id":"BoardPickerSaveButton",display:"flex",flex:"none",paddingX:3,paddingY:2,rounding:4},!c&&o.a.createElement(s.d,{dangerouslySetInlineStyle:{__style:{marginRight:3,marginLeft:-6}}},o.a.createElement(s.s,{accessibilityLabel:"",color:"white",icon:"pin",inline:!0,size:20})),o.a.createElement(s.T,{color:"white",overflow:"normal",size:"md",weight:"bold"},x)),!I&&S&&"loading"===m&&o.a.createElement(s.d,{dangerouslySetInlineStyle:{__style:{transform:"scale(0.7)"}},maxHeight:35},o.a.createElement(s.M,{accessibilityLabel:l.a._("Saving","Accessibility label for saving a pin to a board","Accessibility label for saving a pin to a board"),show:!0}))))}},l61J:function(e,t,a){a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return i}));var n=a("q1tI");function o(e){return e.startsWith("enabled")||e.startsWith("employee")}const r=e=>{Object(n.useEffect)(e,[])};function i(e,{activate:t=!0,activateExperiment:a,group:i,userIsEligible:l=!0}){r(()=>{t&&l&&a(e)});const s=Object(n.useCallback)(()=>{l&&a(e)},[a,l,e]);return{group:l?i:"",anyEnabled:l&&o(i),customActivate:l&&!t?s:()=>{}}}},lUWX:function(e,t,a){a.d(t,"a",(function(){return g}));var n=a("q1tI"),o=a.n(n),r=a("TSYQ"),i=a.n(r),l=a("Ye/N"),s=a("G35+"),d=a("+zF7"),c=a("n6mq");const{FACEBOOK:u,GPLUS:m,YAHOO:h}=s.a,b="40px";function g(e){const t={[u]:l.a._("Find friends from Facebook"),[m]:l.a._("Find friends from Google+"),[h]:l.a._("Find friends from Yahoo")},{network:a}=e;return o.a.createElement(c.S,{onTap:()=>(function(e){d.a.instance().handleConnect(e,!0,{})})(a)},o.a.createElement(c.d,{display:"flex",alignItems:"center",paddingX:3,paddingY:2},o.a.createElement(c.d,{width:b,height:b,marginEnd:4},o.a.createElement("div",{className:"SocialConnectCell"},o.a.createElement("div",{className:i()("icon",`socialConnect-${a}`)},o.a.createElement("em",null)))),o.a.createElement(c.d,{display:"flex",flex:"grow",alignItems:"start",direction:"column"},o.a.createElement(c.T,{color:"darkGray",size:"md",weight:"bold"},t[a]))))}},mEMi:function(e,t,a){a.d(t,"a",(function(){return c}));var n=a("q1tI"),o=a.n(n),r=a("DzJC"),i=a.n(r);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const s=200,d=({scrollTop:e,clientHeight:t,scrollHeight:a},n)=>{return e+t+(n?n(t):2*t)>a};class c extends o.a.PureComponent{constructor(...e){super(...e),l(this,"setContainerRef",e=>{this.containerRef=e}),l(this,"fetchMoreIfNecessary",i()(()=>{const{fetchMore:e,scrollBuffer:t}=this.props;e&&this.containerRef&&d(this.containerRef,t)&&e()},s))}componentDidMount(){setTimeout(this.fetchMoreIfNecessary)}componentDidUpdate(){this.fetchMoreIfNecessary()}render(){const{children:e}=this.props;return e({onScroll:this.fetchMoreIfNecessary,setRef:this.setContainerRef})}}},mLS1:function(e,t,a){var n=a("q1tI"),o=a.n(n),r=a("/MKj"),i=a("Ye/N"),l=a("TiQD"),s=a("eOdZ"),d=a("Wrea"),c=a("xdpg"),u=a("n6mq");function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function h(){return o.a.createElement("div",{className:"ImageCrop"},o.a.createElement("div",{className:"holder"},o.a.createElement(u.d,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,display:"flex",alignItems:"center",justifyContent:"center"},o.a.createElement(u.M,{accessibilityLabel:i.a._("Loading","accessibility label for loading spinner","accessibility label for loading spinner"),show:!0}))))}const b="236x",g=46,p={arrowButton:{border:0,top:120}};class f extends o.a.Component{constructor(...e){super(...e),m(this,"state",{deltaY:0,deltaX:0,holderHeight:0,holderWidth:0,isSpinnerShown:!0,startBgPos:{left:0,top:0}}),m(this,"handleUpdateImage",()=>{const e=this.image;if(!e)return;const t=e.offsetHeight,a=e.offsetWidth;this.setState({isSpinnerShown:!1,startBgPos:{left:-(a-this.state.holderWidth)/2,top:-(t-this.state.holderHeight)/2}})}),m(this,"handleOnMouseUp",()=>{this.isDragging=!1,this.setState({startBgPos:{left:this.getBgLeft(),top:this.getBgTop()},deltaX:0,deltaY:0}),this.props.updateImgCrop(this.getCropData())}),m(this,"isDragging",!1)}componentDidMount(){this.holder&&this.setState({holderHeight:this.holder.offsetHeight,holderWidth:this.holder.offsetWidth}),document.body&&document.body.addEventListener("mouseup",this.handleOnMouseUp,!1)}componentDidUpdate(e){e.pin.id!==this.props.pin.id&&this.setState({isSpinnerShown:!0})}componentWillUnmount(){document.body&&document.body.removeEventListener("mouseup",this.handleOnMouseUp)}getFrameBounds(){const{frameHeight:e,frameWidth:t}=this.props,{holderHeight:a,holderWidth:n}=this.state;return{left:n/2-t/2,width:t,height:e,top:a/2-e/2}}getBgLeft(){const{frameWidth:e}=this.props,t=this.getFrameBounds(),a=this.getImgScale(),n=this._getImageDimensions(),o=n.imgHeight*a,r=n.imgWidth*a;let i=0;return o&&r&&((i=this.state.startBgPos.left+this.state.deltaX)+r-e<t.left&&(i=t.left-r+e),i>t.left&&(i=t.left)),i}getBgTop(){const{frameHeight:e}=this.props,t=this.getFrameBounds(),a=this.getImgScale(),n=this._getImageDimensions(),o=n.imgHeight*a,r=n.imgWidth*a;let i=0;return o&&r&&((i=this.state.startBgPos.top+this.state.deltaY)+o-e<t.top&&(i=t.top-o+e),i>t.top&&(i=t.top)),i}getImgScale(){const{frameHeight:e,frameWidth:t}=this.props,{imgHeight:a,imgWidth:n}=this._getImageDimensions(),o=this.getFrameBounds();if(a&&n){let r=a/n;return r=r>=o.height/o.width?t/n:e/a}return 1}getImageBounds(){const{imgHeight:e,imgWidth:t}=this._getImageDimensions();let a={};if(e&&t){const n=this.getImgScale();a={width:n*t,height:n*e}}return a}getBgBounds(){return{left:this.getBgLeft(),top:this.getBgTop()}}getCropData(){const{frameHeight:e,frameWidth:t}=this.props,a=this.getFrameBounds(),n=this.getBgBounds(),o=this.getImgScale();return{cropX:Math.round(-(n.left-a.left)/o),cropY:Math.round(-(n.top-a.top)/o),height:Math.round(e/o),width:Math.round(t/o),scale:o}}handleOnMouseDown(e){0===e.button&&(e.stopPropagation(),this.isDragging=!0,this.originX=e.pageX,this.originY=e.pageY)}handleOnMouseMove(e){this.isDragging&&this.setState({deltaX:e.pageX-(this.originX||0),deltaY:e.pageY-(this.originY||0)})}_getImageDimensions(){const{pin:e}=this.props,t=e.images[b];return{imgHeight:t.height,imgWidth:t.width}}render(){const{boardName:e,frameHeight:t,frameWidth:a,isFirst:n,isLast:r,pin:l,showNextPin:s,showPrevPin:d}=this.props,{isSpinnerShown:m}=this.state,{imgHeight:h,imgWidth:b}=this._getImageDimensions(),f=this.getFrameBounds(),v=this.getImageBounds(),E=this.getBgBounds();let y="";return h&&b&&(y="in"),o.a.createElement("div",{className:"ImageCrop"},o.a.createElement("div",{className:"holder",ref:e=>{this.holder=e}},o.a.createElement("div",{className:"bg",style:E},o.a.createElement("img",{alt:c.c(i.a._("Board cover for {{ boardName }}"),{boardName:e}),className:y,onLoad:this.handleUpdateImage,ref:e=>{this.image=e},src:l.images["236x"].url,style:v})),o.a.createElement("div",{className:"mask"},o.a.createElement("span",{style:{top:0,left:0,right:0,height:f.top}}),o.a.createElement("span",{style:{top:f.top,left:f.left+a,right:0,height:t}}),o.a.createElement("span",{style:{top:t+f.top,left:0,right:0,bottom:0}}),o.a.createElement("span",{style:{top:f.top,left:0,width:f.left,height:t}})),o.a.createElement("div",{className:"frame",style:f}),o.a.createElement("div",{className:"drag",onMouseDown:e=>{this.handleOnMouseDown(e)},onMouseMove:e=>{this.handleOnMouseMove(e)}}),o.a.createElement("div",{className:"spinner",style:{display:m?"":"none"}})),n?null:o.a.createElement(u.d,{position:"absolute",width:g,height:g,dangerouslySetInlineStyle:{__style:{...p.arrowButton,left:100}}},o.a.createElement(u.t,{icon:"arrow-back",accessibilityLabel:i.a._("Previous","Label for indicating selecting the previous pin","Label for indicating selecting the previous pin"),onClick:d})),r?null:o.a.createElement(u.d,{position:"absolute",width:g,height:g,dangerouslySetInlineStyle:{__style:{...p.arrowButton,right:100}}},o.a.createElement(u.t,{icon:"arrow-forward",accessibilityLabel:i.a._("Next","Label for indicating selecting the previous pin","Label for indicating selecting the previous pin"),onClick:s})))}}m(f,"defaultProps",{frameHeight:236,frameWidth:236});var v=a("w70y");function E(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function y(e){return e.reduce((e,t)=>("pin"===t.type&&e.push(t),e),[])}function _({boardFeedResource:{data:e},coverPinId:t}){return Math.max(0,y(e||[]).findIndex(e=>e.id===t))}const C=5;class w extends o.a.Component{constructor(...e){super(...e),E(this,"state",{coverPinIndex:_(this.props),imgCropData:null,previousBoardFeedResourceData:null}),E(this,"handleSave",()=>{const{boardId:e,dispatch:t}=this.props,{coverPinIndex:a,imgCropData:n}=this.state,o=(this.pins||[])[a];if(!o)return;const r=o.images["236x"],i=r.url,l={board_id:e,url:i,pin_id:o.id,pin_image_url:i,...n?{crop_x:n.cropX,crop_y:n.cropY,height:n.height,width:n.width,scale:n.scale}:{}},c={height:r.height,width:r.width,x:n?n.cropX:0,y:n?n.cropY:0};s.a.create("BoardResource",l).callUpdate().then(()=>{this.props.onSave(i),t(Object(d.a)(e,{custom_cover:!0,scale:n?n.scale:1,pin_id:o.id,crop:c,image_url:i}))})}),E(this,"updateImgCrop",e=>this.setState({imgCropData:e})),E(this,"handleShowNextPin",()=>{const{boardFeedResource:{isAtEnd:e,isFetching:t,fetchMore:a}}=this.props,n=(this.pins||[]).length;n&&this.setState(({coverPinIndex:e})=>({coverPinIndex:(e+1)%n}),()=>{this.pins&&this.state.coverPinIndex+C>=this.pins.length&&!e&&!t&&a()})}),E(this,"handleShowPrevPin",()=>{const e=(this.pins||[]).length;e&&this.setState(({coverPinIndex:t})=>({coverPinIndex:(t||e)-1}))})}static getDerivedStateFromProps(e,t){const a=e.boardFeedResource.data,{previousBoardFeedResourceData:n}=t;return!n&&a?{previousBoardFeedResourceData:a,coverPinIndex:_(e)}:{previousBoardFeedResourceData:a}}componentDidUpdate(e){const t=this.props.boardFeedResource.data,a=e.boardFeedResource.data;(t&&a!==t&&t.length||t&&a&&t.length!==a.length)&&t.forEach(e=>{if("pin"===e.type){(new Image).src=e.url}})}get pins(){const{boardFeedResource:{data:e}}=this.props;return e?y(e):void 0}render(){const{boardName:e,frameHeight:t,frameWidth:a,heading:n,onCancel:r}=this.props,{coverPinIndex:s}=this.state,d=this.pins||[],c=d[s];return o.a.createElement(l.b,{accessibilityModalLabel:i.a._("Change Board Cover","accessible label for modal to change board cover image","accessible label for modal to change board cover image"),size:"lg",heading:n,onDismiss:r},o.a.createElement(u.d,{position:"relative",dangerouslySetInlineStyle:{__style:{userSelect:"none"}}},c?o.a.createElement(f,{boardName:e,frameHeight:t,frameWidth:a,isFirst:!s,isLast:s===d.length-1,pin:c,showNextPin:this.handleShowNextPin,showPrevPin:this.handleShowPrevPin,updateImgCrop:this.updateImgCrop}):o.a.createElement(h,null)),o.a.createElement(u.d,{display:"flex",justifyContent:"end"},o.a.createElement(u.d,{padding:2},o.a.createElement(u.e,{inline:!0,onClick:r,text:i.a._("Cancel")})),o.a.createElement(u.d,{padding:2},o.a.createElement(u.e,{disabled:!c,inline:!0,onClick:this.handleSave,text:i.a._("Save Changes","Button for saving board cover edit","Button for saving board cover edit"),color:"red"}))))}}function S(e){const t=Object(r.useDispatch)(),a=Object(v.a)({name:"BoardFeedResource",options:{board_id:e.boardId,field_set_key:"images_only_item",filter_section_pins:!1,page_size:50}});return o.a.createElement(w,Object.assign({},e,{boardFeedResource:a,dispatch:t}))}var I=a("0rqM");const B=({label:e,labelId:t})=>t?o.a.createElement(u.v,{htmlFor:t},o.a.createElement(u.T,{size:"sm"},e)):o.a.createElement(u.T,{size:"sm"},e);function x(e){const{children:t,label:a,labelId:r}=e;return o.a.createElement(n.Fragment,null,o.a.createElement(u.d,{marginBottom:2},o.a.createElement(B,{label:a,labelId:r})),t)}const O=138;function T({coverPin:e,handleShowBoardCoverEditModal:t}){const[a,r]=Object(n.useState)(!1);return o.a.createElement(x,{label:i.a._("Board cover","BoardForm.BoardFormCoverButton","Form label for updating board cover")},o.a.createElement(u.d,{width:O,position:"relative"},o.a.createElement(u.S,{onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),onTap:t,rounding:4},(null==e?void 0:e.custom_cover)?o.a.createElement(n.Fragment,null,o.a.createElement(u.z,{height:O,rounding:4,width:O},o.a.createElement(u.u,{alt:e.image_url,color:"gray",fit:"cover",naturalHeight:e.size&&e.size[0]||O,naturalWidth:e.size&&e.size[0]||O,src:e.image_url})),o.a.createElement(u.d,{position:"absolute",right:!0,bottom:!0,padding:2},o.a.createElement(u.d,{alignItems:"center",display:"flex",height:44,justifyContent:"center",rounding:"circle",width:44,dangerouslySetInlineStyle:{__style:{background:a?"white":"rgba(255, 255, 255, 0.8)"}}},o.a.createElement(u.s,{accessibilityLabel:i.a._("Edit board cover","BoardForm.BoardFormBoardCoverButton","Accessibility label on icon"),icon:"edit",color:"darkGray",size:16})))):o.a.createElement(u.d,{alignItems:"center",color:a?"darkWash":"lightGray",display:"flex",height:O,justifyContent:"center",rounding:4,width:O},o.a.createElement(u.s,{accessibilityLabel:i.a._("Add cover photo","BoardForm.BoardFormCoverButton","Accessibility label on icon"),color:"darkGray",icon:"add",size:24})))))}function k({categories:e,currentCategory:t,onChange:a}){const n=i.a._("What kind of board is it?");return o.a.createElement(x,{label:i.a._("Category","BoardForm.BoardFormCategoriesDropdown","Form field label"),labelId:"boardEditCategory"},o.a.createElement(u.L,{id:"boardEditCategory",name:"category",onChange:a,options:e.map(({name:e,key:t})=>({label:e,value:t})),placeholder:n,size:"lg",value:t||null}))}function M({children:e,label:t,labelId:a,subtext:r}){return o.a.createElement(n.Fragment,null,o.a.createElement(u.d,{alignItems:"center",display:"flex",justifyContent:"between",paddingY:1},o.a.createElement(u.v,{htmlFor:a},o.a.createElement(u.r,{size:"sm"},t)),e),r)}function D({hasCollabBoardEmail:e,isCollaborative:t,onChange:a}){return t&&o.a.createElement(M,{label:i.a._("Email notifications","BoardForm.BoardFormCollaboratorsEmailCheckbox","Form label"),labelId:"emailNotificationsCheckbox",subtext:o.a.createElement(u.T,{color:"gray",size:"lg"},i.a._("Get an email when someone saves Pins to this board","BoardForm.BoardFormCollaboratorsEmailCheckbox","Text explaing field on board form"))},o.a.createElement(u.d,{alignItems:"center",display:"flex",paddingY:2},o.a.createElement(u.d,{marginEnd:1},o.a.createElement(u.P,{switched:e,id:"emailNotificationsCheckbox",name:"email",onChange:a}))))}var j=a("+HMQ"),P=a("88U9"),L=a("8Mj5"),R=a("zpFB");function A({board:e,onCollaboratorInviteClick:t}){return o.a.createElement(j.a,{board:e},e=>{const{limitedCollaborators:a,overflowNumber:n}=Object(P.a)(e.length,e);return o.a.createElement(u.H,{justifyContent:"between"},o.a.createElement(L.a,{additionalCount:n,faces:a.map(e=>({...e,key:e.name})),faceSize:"lg",overlap:R.a}),o.a.createElement(u.t,{accessibilityLabel:i.a._("Invite collaborators","BoardEdit.BoardCollaboratorsAndInviteSection","Accessibility label on button"),bgColor:"lightGray",icon:"add",iconColor:"darkGray",onClick:t,size:"lg"}))})}var F=a("KEt0"),N=a("kmwA");function H({board:e,currentUserIsOwner:t,handleBoardLeave:a,onCollaboratorInviteClick:n}){const r=o.a.createElement(u.H,null,o.a.createElement(u.T,{size:"sm",inline:!0},i.a._("Collaborators")),o.a.createElement(F.a,null),o.a.createElement(u.T,{inline:!0,size:"sm",weight:"bold"},o.a.createElement(u.y,{inline:!0,target:"blank",href:N.a.settings.HELP_BOARDS_INVITE_URL_SRC_CREATE},i.a._("Learn more"))));return o.a.createElement(x,{alignTop:!0,label:r,labelId:"collaborators"},o.a.createElement(A,{board:e,onCollaboratorInviteClick:n}))}function U({collaboratorInvitesEnabled:e,isCollaborative:t,onChange:a}){return t&&o.a.createElement(M,{label:i.a._("Let collaborators add people","BoardForm.BoardFormCollaboratorsInviteToggle","Form label"),labelId:"collaboratorInvitesEnabledCheckbox"},o.a.createElement(u.d,{paddingY:2},o.a.createElement(u.P,{switched:e,id:"collaboratorInvitesEnabledCheckbox",name:"collaboratorInvitesEnabled",onChange:a})))}var q=a("QoKk");function z({boardDates:e,onChange:t,onToggleFlyout:a}){return o.a.createElement(x,{label:i.a._("Dates · Optional—this can help you plan!","BoardForm.BoardFormDateField","Label next to date picker for adding a date to a board"),labelId:"secret"},o.a.createElement(q.a,{dates:e,onChange:t,onToggleFlyout:a}))}function Y({description:e,descriptionValidatorErrors:t,onChange:a}){const n="boardEditDescription";return o.a.createElement(x,{alignTop:!0,label:i.a._("Description","BoardForm.BoardFormDescription"," Form field label"),labelId:n},o.a.createElement(u.U,{errorMessage:t.join(", "),id:n,name:"description",onChange:a,placeholder:i.a._("What's your board about?"),value:e}))}var W=({children:e})=>o.a.createElement(u.d,{paddingX:8,role:"list"},n.Children.map(e,(t,a)=>t&&o.a.createElement(u.d,{role:"listitem",marginBottom:a===n.Children.count(e)-1?1:8,key:a},t))),G=a("JW66");function X({isProtectedToggler:e,isToggleDisable:t,onChange:a,privacy:r}){if(!0===e)return o.a.createElement(M,{label:i.a._("Protected board (not listed on user's profile)","BoardForm.BoardFormSecretToggle","protected board"),labelId:"protected"},o.a.createElement(u.d,{paddingY:2},o.a.createElement(u.P,{onChange:a,switched:r===G.a.BoardPrivacy.PROTECTED,id:"protected",disabled:t})));if(r!==G.a.BoardPrivacy.PROTECTED){const e=i.a._("Keep this board secret","BoardForm.BoardFormSecretToggle","Caption for board settings to set visibility"),l=o.a.createElement(n.Fragment,null,o.a.createElement(u.T,{color:"gray",size:"lg"},i.a._("So only you and collaborators can see it.","BoardForm.BoardFormSecretToggle","notifying the board owner only they and the collaborators can see the board if it set to secret")," ",o.a.createElement(u.y,{inline:!0,target:"blank",href:N.a.settings.HELP_BOARDS_SECRET_URL_SRC_CREATE},i.a._("Learn more","BoardForm.BoardFormSecretToggle","Link to learn more about secret boards"))));return o.a.createElement(M,{label:e,labelId:"secret",subtext:l},o.a.createElement(u.d,{display:"flex",alignItems:"center"},o.a.createElement(u.P,{switched:r===G.a.BoardPrivacy.SECRET,id:"secret",name:"secret",onChange:a,disabled:t})))}return null}function Q({allowHomefeedRecommendations:e,onChange:t}){return o.a.createElement(M,{label:i.a._("Personalization","BoardForm.BoardFormRecommendationToggle","form label"),labelId:"recommendation",subtext:o.a.createElement(u.T,{color:"gray",size:"lg"},i.a._("Show Pins inspired by this board in your home feed.","BoardForm.BoardFormRecommendationToggle","Caption for board settings to set visibility"))},o.a.createElement(u.P,{switched:e,id:"recommendation",name:"recommendation",onChange:t}))}function V({boardOwnerHasActiveAds:e,hasActiveAds:t,isAdAccountOwner:a,onChange:r,privacy:l,showConfirmation:s}){if(!1===a)return o.a.createElement(M,{label:i.a._("Protected board (not listed on user's profile)","BoardForm.BoardFormSecretToggle","protected board"),labelId:"protected"},o.a.createElement(u.d,{paddingY:2},o.a.createElement(u.P,{onChange:()=>void 0,id:"protected",switched:!0,disabled:!0})));if(l!==G.a.BoardPrivacy.PROTECTED){const a=i.a._("Keep this board secret","BoardForm.BoardFormSecretToggle","Caption for board settings to set visibility"),d=o.a.createElement(n.Fragment,null,o.a.createElement(u.T,{color:"gray",size:"lg"},e?i.a._("Ads from secret boards won’t run.","BoardForm.BoardFormSecretToggle","notifying the board owner ads will not run if the board is set to secret"):i.a._("So only you and collaborators can see it.","BoardForm.BoardFormSecretToggle","notifying the board owner only they and the collaborators can see the board if it set to secret")," ",o.a.createElement(u.y,{inline:!0,target:"blank",href:N.a.settings.HELP_BOARDS_SECRET_URL_SRC_CREATE},i.a._("Learn more","BoardForm.BoardFormSecretToggle","Link to learn more about secret boards"))));return o.a.createElement(M,{label:a,labelId:"secret",subtext:d},o.a.createElement(u.d,{display:"flex",alignItems:"center"},o.a.createElement(u.P,{switched:"secret"===l,id:"secret",name:"secret",onChange:"public"===l&&t?s:r})))}return null}function K({name:e,nameValidatorErrors:t,onChange:a}){return o.a.createElement(x,{label:i.a._("Name","BoardForm.BoardFormTitleInput","Form field label"),labelId:"boardEditName"},o.a.createElement(u.V,{errorMessage:t.join(", "),id:"boardEditName",name:"boardName",onChange:a,placeholder:i.a._('Like "Places to Go" or "Recipes to Make"'),size:"lg",value:e}))}var J=a("4dcN"),$=a("CvCA"),Z=a("XCz/"),ee=a("VwDf"),te=a("vvax"),ae=a("nGHF"),ne=a("guDk"),oe=a("c50B");function re(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const ie=e=>Object(oe.j)({max:e,maxErrorString:Object(c.i)(i.a._("Please enter no more than {{ maxLength }} characters.","Validation error when a string is too long","Validation error when a string is too long"),{maxLength:e})}),le=()=>[ie(G.a.MAX_CHARS_FOR_BOARD_PIN_DESCRIPTION)],se=()=>[Object(oe.o)({message:i.a._("Don't forget to name your board!")}),ie(G.a.MAX_CHARS_FOR_BOARD_TITLE)];class de extends n.Component{constructor(e){super(e),re(this,"handleChangeName",({value:e})=>{const t=Object(oe.r)(se(),e);this.setState({name:e,nameValidatorErrors:t})}),re(this,"handleChangeDescription",({value:e})=>{const t=Object(oe.r)(le(),e);this.setState({description:e,descriptionValidatorErrors:t})}),re(this,"handleChangeBoardDates",e=>{this.setState({boardDates:e})}),re(this,"handleChangeCategory",({value:e})=>{"true"!==e&&this.setState({category:e})}),re(this,"handleChangePrivacyToggle",({value:e})=>{let t="public";e&&(t=this.props.isAdAccount?"protected":"secret"),this.state.privacy!==t&&this.setState({privacy:t})}),re(this,"handleChangePrivateToggle",({value:e})=>{this.setState({privacy:e?"secret":"public"})}),re(this,"handleEnableSecret",()=>{this.setState({privacy:"secret",showSecretConfirmation:!1})}),re(this,"handleShowSecretConfirmation",()=>{this.setState({showSecretConfirmation:!0})}),re(this,"handleHideSecretConfirmation",()=>{this.setState({showSecretConfirmation:!1})}),re(this,"handleChangeRecommendationToggle",({value:e})=>{this.setState({allowHomefeedRecommendations:e})}),re(this,"handleChangeCollabBoardEmail",({value:e})=>{this.setState({collab_board_email:e})}),re(this,"handleChangeCollaboratorInvitesEnabled",({value:e})=>{this.setState({collaboratorInvitesEnabled:e})}),re(this,"handleCancel",()=>{J.a.trackEvent(this.props.gaCategory,"click_cancel"),this.props.onClose()}),re(this,"handleSubmit",e=>{const{board:{event_date:t,event_start_date:a},onSubmit:n,toastManagerContext:r,onClose:l}=this.props,{boardDates:s,category:d,collab_board_email:c,collaboratorInvitesEnabled:u,description:m,name:h,privacy:b,allowHomefeedRecommendations:g}=this.state;if(e.preventDefault&&e.preventDefault(),this.submitDisabled())return;const p=h.trim(),f=m.trim(),{eventEndDate:v,eventStartDate:E}=Object(ee.a)({currentEventStartDate:s.length>1?s[0]:null,currentEventEndDate:s[1]||s[0],initialEventStartDate:a,initialEventEndDate:t});this.setState({submitting:!0,submitError:""}),J.a.trackEvent(this.props.gaCategory,"click_submit"),n({event_start_date:E,event_date:v,name:p,category:d,collab_board_email:c,collaborator_invites_enabled:u,description:f,privacy:b,allow_homefeed_recommendations:g}).then(()=>{this.setState({submitting:!1})}).catch(e=>{let t=i.a._("Uh oh! Something went wrong.");if(e.message){const{message:a,message_detail:n}=e;t=n?`${a} ${n}`:a}else"string"==typeof e&&(t=e);t=Object(ne.a)(e)||t,Object(ne.b)(e)?(r.showOneToast(({onHide:e})=>o.a.createElement($.a,{color:"red",duration:500,onHide:e,text:t})),l()):this.setState({submitting:!1,submitError:t})})}),re(this,"handleShowBoardCoverEditModal",()=>{this.setState({showBoardCoverEdit:!0})}),re(this,"handleHideBoardCoverEditModal",()=>{this.setState({showBoardCoverEdit:!1})}),re(this,"handleSaveBoardCoverEditModal",e=>{this.handleHideBoardCoverEditModal();const{onCropChange:t}=this.props;t&&t(e)});const{board:{category:t,collab_board_email:a,collaborator_invites_enabled:n,description:r,event_date:l,event_start_date:s,name:d,pin_count:c,privacy:u,allow_homefeed_recommendations:m}}=e,h=[];s&&h.push(new Date(s)),l&&h.push(new Date(l)),this.state={boardDates:h,category:t,collab_board_email:a,description:r,name:d,pin_count:c,privacy:u,allowHomefeedRecommendations:m,collaboratorInvitesEnabled:n,nameValidatorErrors:[],descriptionValidatorErrors:[],showBoardCoverEdit:!1,showSecretConfirmation:!1,submitting:!1,previousName:d,previousDescription:r,previousCategory:t,previousPrivacy:u}}static getDerivedStateFromProps(e,t){const a={};return e.board.name!==t.previousName&&(a.previousName=e.board.name,a.nameValidatorErrors=Object(oe.r)(se(),e.board.name)),e.board.description!==t.previousDescription&&(a.previousDescription=e.board.description,a.descriptionValidatorErrors=Object(oe.r)(le(),e.board.description)),void 0===t.category&&(a.category=e.board.category),e.board.category!==t.previousCategory&&(a.previousCategory=e.board.category),e.board.privacy!==t.previousPrivacy&&(a.previousPrivacy=e.board.privacy),a}getFormFooter(){const{board:{archived_by_me_at:e},isArchivable:t,isDeletable:a,onArchiveButtonClick:r,onDeleteButtonClick:l,onMergeButtonClick:s,onUnarchiveButtonClick:d,submitText:c}=this.props,{submitError:m,submitting:h}=this.state;return o.a.createElement(n.Fragment,null,o.a.createElement(u.d,{alignItems:"center",display:"flex",justifyContent:"between",wrap:!0},o.a.createElement(u.d,{alignItems:"center",display:"flex"},a&&o.a.createElement(u.d,{"data-test-id":"deleteBoardButton",paddingX:1},o.a.createElement(u.e,{disabled:h,inline:!0,onClick:l,size:"lg",text:i.a._("Delete","button label during board edit","button label during board edit")})),t&&!e&&o.a.createElement(u.d,{paddingX:1},o.a.createElement(u.e,{disabled:h,inline:!0,onClick:r,size:"lg",text:i.a._("Archive","button label during board edit","button label during board edit")})),e&&o.a.createElement(u.d,{paddingX:1},o.a.createElement(u.e,{disabled:h,inline:!0,onClick:d,size:"lg",text:i.a._("Unarchive","button label during board edit","button label during board edit")})),s&&o.a.createElement(u.d,{paddingX:1},o.a.createElement(u.e,{disabled:h,inline:!0,onClick:s,size:"lg",text:i.a._("Merge","button label during board edit","button label during board edit")}))),o.a.createElement(u.d,null,o.a.createElement(u.d,{display:"flex"},o.a.createElement(u.d,{paddingX:1},o.a.createElement(u.e,{color:"red",disabled:this.submitDisabled(),inline:!0,onClick:this.handleSubmit,size:"lg",text:c,type:"submit"}))))),m&&o.a.createElement(u.d,{paddingX:1},o.a.createElement(u.T,{color:"red"},m)))}submitDisabled(){const{descriptionValidatorErrors:e,name:t,nameValidatorErrors:a,submitting:n}=this.state;return!t||a.length>0||e.length>0||n}render(){const{board:e,board:{archived_by_me_at:t,board_owner_has_active_ads:a,cover_pin:r,has_active_ads:s,id:d,is_collaborative:c,name:m},categories:h,coverImageHeight:b,coverImageWidth:g,currentUserIsOwner:p,handleBoardLeave:f,isAdAccount:v,isAdAccountOwner:E,isEditable:y,isNameAndSecretView:_,onClose:C,onCollaboratorInviteClick:w,onToggleFlyout:B,title:x}=this.props,{allowHomefeedRecommendations:O,boardDates:M,category:j,collab_board_email:P,collaboratorInvitesEnabled:L,description:R,descriptionValidatorErrors:A,name:F,nameValidatorErrors:N,pin_count:q,privacy:G,showBoardCoverEdit:J,showSecretConfirmation:$}=this.state,ee=y&&q>0;let ae=o.a.createElement(W,null,ee&&o.a.createElement(T,{coverPin:r,handleShowBoardCoverEditModal:this.handleShowBoardCoverEditModal}),o.a.createElement(K,{name:F,nameValidatorErrors:N,onChange:this.handleChangeName}),o.a.createElement(Y,{description:R,descriptionValidatorErrors:A,onChange:this.handleChangeDescription}),h&&o.a.createElement(Z.a,{name:"web_remove_board_categories"},({anyEnabled:e})=>!e&&o.a.createElement(k,{categories:h,currentCategory:j||null,onChange:this.handleChangeCategory})),o.a.createElement(z,{boardDates:M,onChange:this.handleChangeBoardDates,onToggleFlyout:B}),p&&!!f&&!!w&&o.a.createElement(H,{board:e,currentUserIsOwner:p,handleBoardLeave:f,onCollaboratorInviteClick:w}),o.a.createElement(u.d,{marginBottom:-7},o.a.createElement(u.T,{size:"sm"},i.a._("Settings","BoardForm.BoardForm","Section heading in board edit form"))),o.a.createElement(Z.a,{name:"sterling_protected_board_by_owner",activate:!0},({anyEnabled:e})=>e?o.a.createElement(X,{isProtectedToggler:!!v,isToggleDisable:!!v&&!E,onChange:this.handleChangePrivacyToggle,privacy:G}):o.a.createElement(V,{boardOwnerHasActiveAds:a,hasActiveAds:s,isAdAccountOwner:E,onChange:this.handleChangePrivateToggle,privacy:G,showConfirmation:this.handleShowSecretConfirmation})),!t&&o.a.createElement(Q,{allowHomefeedRecommendations:O,onChange:this.handleChangeRecommendationToggle}),o.a.createElement(D,{hasCollabBoardEmail:P,isCollaborative:c,onChange:this.handleChangeCollabBoardEmail}),o.a.createElement(U,{collaboratorInvitesEnabled:L,isCollaborative:c,onChange:this.handleChangeCollaboratorInvitesEnabled}));return p?_&&(ae=o.a.createElement(W,null,o.a.createElement(K,{name:F,nameValidatorErrors:N,onChange:this.handleChangeName}),o.a.createElement(z,{onChange:this.handleChangeBoardDates,onToggleFlyout:B}),o.a.createElement(Z.a,{name:"sterling_protected_board_by_owner",activate:!0},({anyEnabled:e})=>e?o.a.createElement(X,{isProtectedToggler:!!v,isToggleDisable:!!v&&!E,onChange:this.handleChangePrivacyToggle,privacy:G}):o.a.createElement(V,{boardOwnerHasActiveAds:a,hasActiveAds:s,isAdAccountOwner:!!E,onChange:this.handleChangePrivateToggle,privacy:G,showConfirmation:this.handleShowSecretConfirmation})))):ae=o.a.createElement(W,null,!!f&&!!w&&o.a.createElement(H,{board:e,currentUserIsOwner:p,handleBoardLeave:f,onCollaboratorInviteClick:w}),o.a.createElement(D,{hasCollabBoardEmail:P,isCollaborative:c,onChange:this.handleChangeCollabBoardEmail}),!t&&o.a.createElement(Q,{allowHomefeedRecommendations:O,onChange:this.handleChangeRecommendationToggle}),o.a.createElement(u.T,{color:"gray",size:"lg"},Object(te.b)(i.a._("Only the board’s owner ({{ boardOwner }}) can manage the rest of its features","BoardForm.CollaboratorPermissionsCopy","Copy on board edit form letting collaborators know of their permissions on a board"),{boardOwner:o.a.createElement(u.T,{color:"gray",inline:!0,size:"lg",weight:"bold"},e.owner.full_name)}))),o.a.createElement(n.Fragment,null,o.a.createElement(l.b,{accessibilityModalLabel:i.a._("Board form","BoardForm.BoardForm","Accessibility label on board form"),size:"sm",onDismiss:C,footer:this.getFormFooter(),heading:x},o.a.createElement(u.d,{marginEnd:"auto",marginStart:"auto",rounding:2},o.a.createElement("form",{method:"post",onSubmit:this.handleSubmit},ae))),J&&o.a.createElement(S,{boardId:d,boardName:F,coverPinId:null==r?void 0:r.pin_id,frameHeight:b,frameWidth:g,heading:`${i.a._("Change Board Cover")}/ ${m}`,onCancel:this.handleHideBoardCoverEditModal,onSave:this.handleSaveBoardCoverEditModal}),$&&o.a.createElement(I.a,{confirmButtonLabel:i.a._("Make secret","Setting the boards visibility to secret","Setting the boards visibility to secret"),heading:i.a._("Are you sure?","Warning label asking users to be sure of their action","Warning label asking users to be sure of their action"),message:i.a._("If you make this board secret, some active ads will stop running","Explicitly warning users of the board visibility action they are doing","Explicitly warning users of the board visibility action they are doing"),onCancel:this.handleHideSecretConfirmation,onConfirm:this.handleEnableSecret}))}}re(de,"defaultProps",{isNameAndSecretView:!1});t.a=Object(ae.c)(de)},mvLR:function(e,t,a){function n(e){let t=!1;return{promise:new Promise((a,n)=>{e.then(e=>t?n({isCanceled:!0}):a(e),e=>n(t?{isCanceled:!0}:e))}),cancel(){t=!0}}}a.d(t,"a",(function(){return n}))},oN2T:function(e,t,a){a.d(t,"c",(function(){return b})),a.d(t,"b",(function(){return g})),a.d(t,"i",(function(){return p})),a.d(t,"g",(function(){return f})),a.d(t,"e",(function(){return v})),a.d(t,"m",(function(){return E})),a.d(t,"h",(function(){return _})),a.d(t,"d",(function(){return C})),a.d(t,"a",(function(){return w})),a.d(t,"l",(function(){return S})),a.d(t,"j",(function(){return I})),a.d(t,"k",(function(){return B})),a.d(t,"f",(function(){return x}));var n=a("4dcN"),o=a("Pqnw"),r=a("7w6Q"),i=a("eOdZ"),l=a("KFEb"),s=a("5FNA"),d=a("NjDU"),c=a("Wer7");const u="board_create",m="board_delete",h="board_edit";function b(e,t){return Object(c.a)("BoardResource",{board_id:e,field_set_key:t})}function g(e={},t,a){return{type:"BOARD_CREATE_COMPLETE",payload:{options:e,board:t},error:a}}function p(){return(e,t)=>{const{viewer:a}=t();a.isAuth&&Object(s.b)(a.username).forEach(t=>{e(t)})}}function f(e,t){const a={...e};return o=>(o({type:"BOARD_CREATE",payload:{board:e}}),i.a.create("BoardResource",a).callCreate().then(e=>{n.a.trackEvent(u,"success");const r=e.resource_response.data;return r&&(o(p()),(null==t?void 0:t.isFBC)||o(g(a,r))),r}).catch(e=>{throw n.a.trackEvent(u,"error"),e}))}function v(e={},t,a){return{type:"BOARD_UPDATE_COMPLETE",payload:{options:e,board:t},error:a}}function E(e){return t=>{const a=void 0===e.collaborator_requests_enabled||null===e.collaborator_requests_enabled?{}:{collaborator_requests_enabled:e.collaborator_requests_enabled},o={board_id:e.id,name:e.name,description:e.description,category:e.category,event_date:e.event_date,event_start_date:e.event_start_date,collaborator_permissions_setting:e.collaborator_permissions_setting,privacy:e.privacy,collab_board_email:e.collab_board_email,collaborator_invites_enabled:e.collaborator_invites_enabled,allow_homefeed_recommendations:e.allow_homefeed_recommendations,...a};return t({type:"BOARD_UPDATE",payload:{boardUpdateOptions:o}}),i.a.create("BoardResource",o).callUpdate().then(a=>{n.a.trackEvent(h,"success");const r=a&&a.resource_response&&a.resource_response.data||e;t(v(o,r))}).catch(e=>{throw n.a.trackEvent(h,"error"),e})}}function y(e,t){return{type:"BOARD_DELETE_COMPLETE",payload:{boardId:e},error:t}}function _(e){return(t,a)=>{const o=a().boards.content[e],{pin_count:r}=o,{id:l}=o.owner;return t({type:"BOARD_DELETE",payload:{boardId:e}}),i.a.create("BoardResource",{board_id:e}).callDelete().then(()=>{n.a.trackEvent(m,"error"),t(y(e)),t(Object(d.b)({userId:l,increment:-r}))}).catch(e=>{throw n.a.trackEvent(m,"error"),e})}}function C(e){return{type:"BOARD_PIN_TO",payload:{board:e}}}function w(e){return t=>(t(function(e){return{type:"BOARD_ARCHIVED",payload:{boardId:e}}}(e)),i.a.create("BoardArchiveResource",{boardId:e}).callUpdate())}function S(e){return t=>(t(function(e){return{type:"BOARD_UNARCHIVED",payload:{boardId:e}}}(e)),i.a.create("BoardArchiveResource",{boardId:e}).callDelete())}function I(e,t){return a=>i.a.create("BoardsMergeResource",{source_board_id:e,target_board_id:t}).callUpdate().then(()=>Promise.all([a(y(e)),a(b(t,"pin_count")),a(Object(o.a)(l.a.BOARD_SECTIONS,t))]))}function B(e,t){return a=>i.a.create("SocialSearchCampaignResource",{boardId:e}).callGet().then(e=>{if(!e||!e.resource_response){return a({type:"SET_SOCIAL_SEASONAL_BOARD",payload:{isSocialSeasonalBoard:!1,socialHeaderBgImage:"",socialHeaderBgColor:"",textIconColor:""}})}const n=e.resource_response.data||{},o=(n.model||{}).custom_properties||{},{campaign_id:i="unknown"}=o,l=n.display_data||{},s={isSocialSeasonalBoard:!!n.display_data,socialHeaderBgImage:l.header_image,socialHeaderBgColor:l.header_background_color,textIconColor:l.text_icon_color};return r.a.increment(`web.seasonal_board.${i}.${t}.land`),a({type:"SET_SOCIAL_SEASONAL_BOARD",payload:s})})}function x(){return e=>{return e({type:"SET_SOCIAL_SEASONAL_BOARD",payload:{isSocialSeasonalBoard:!1,socialHeaderBgImage:"",socialHeaderBgColor:"",textIconColor:""}})}}},qdVQ:function(e,t,a){a.d(t,"a",(function(){return T}));var n=a("q1tI"),o=a.n(n),r=a("/MKj"),i=a("0rqM"),l=a("+zkD"),s=a("1inl"),d=a("4dcN"),c=a("Ye/N"),u=a("SASd"),m=a("eOdZ"),h=a("CvCA"),b=a("vVEi"),g=a("ANjH"),p=a("vvax"),f=a("U4JR"),v=a("mLS1"),E=a("oN2T"),y=a("pLLR"),_=a("nGHF"),C=a("n6mq");function w(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const S="board_edit",I="board_delete";var B=Object(g.compose)(_.c,b.d,y.e,Object(r.connect)(e=>({viewer:e.viewer}),(e,t)=>{const a=e=>()=>{const{board:a,onBoardArchiveChange:n,toastManagerContext:r}=t;n&&n(),r.showToast(({onHide:t})=>o.a.createElement(h.a,{imageUrl:a.image_cover_url,onHide:t,text:Object(p.b)(e?c.a._("Archived {{ boardName }}","Toast text on complete archiving board","Toast text on complete archiving board"):c.a._("Unarchived {{ boardName }}","Toast text on complete unarchiving board","Toast text on complete unarchiving board"),{boardName:a.name}).join("")}))};return{archiveBoard:()=>e(Object(E.a)(t.board.id)).then(a(!0)),deleteBoard:()=>e(Object(E.h)(t.board.id)),mergeToBoard:a=>e(Object(E.j)(t.board.id,a.id)).then(()=>{t.showBlockingActionToast({actionType:"merge",board:a})}).catch(e=>{s.a.showError(e.message||c.a._("Failed to merge boards","Error message when failed to merge boards","Error message when failed to merge boards"))}),updateBoard:t=>e(Object(E.m)(t)),unarchiveBoard:()=>e(Object(E.l)(t.board.id)).then(a(!1))}}))(class extends n.Component{constructor(...e){super(...e),w(this,"state",{editMode:"main"}),w(this,"handleBoardLeave",()=>{const{board:e,onBoardLeave:t,onClose:a}=this.props;a(),t&&t(e.id)}),w(this,"handleArchive",()=>{const{archiveBoard:e,onClose:t}=this.props;e(),this.returnToMainEditMode(),t()}),w(this,"handleUnarchive",()=>{const{onClose:e,unarchiveBoard:t}=this.props;t(),this.returnToMainEditMode(),e()}),w(this,"returnToMainEditMode",()=>this.setState({editMode:"main"})),w(this,"handleShowArchiveModal",()=>this.setState({editMode:"confirmArchive"})),w(this,"handleShowUnarchiveModal",()=>this.setState({editMode:"confirmUnarchive"})),w(this,"handleShowMergeModal",()=>this.setState({editMode:"merge"})),w(this,"handleDelete",()=>{const{board:e,deleteBoard:t,onBoardDelete:a,onClose:n,toastManagerContext:r}=this.props;t().then(()=>{r.showToast(({onHide:e})=>o.a.createElement(h.a,{onHide:e,text:c.a._("Board deleted!","User deleted their board","User deleted their board")}))}),this.returnToMainEditMode(),n(),a&&a(e)}),w(this,"handleMerge",e=>{const{board:t,mergeToBoard:a,onBoardDelete:n,onClose:o}=this.props;Object(f.a)(7172,{objectId:t.id,merge_flow:"menu"}),a(e),o(),n&&n(t)}),w(this,"handleShowDeleteModal",()=>{d.a.trackEvent(I,"open_modal"),this.setState({editMode:"confirmDelete"})}),w(this,"handleSubmit",e=>{const{viewer:t,board:a,updateBoard:n,onBoardPrivacyChange:o,onBoardUpdate:r,onClose:i}=this.props,l=this.props.board.id;if(t.id===a.owner.id){const t={id:l,...e};return n(t).then(()=>{e.event_date||e.event_start_date?Object(f.a)(8624,{component:13304,objectId:t.id}):""!==e.event_date&&""!==e.event_start_date||Object(f.a)(8625,{component:13304,objectId:t.id}),a.privacy!==e.privacy&&o?o():r&&r(l,t),i()})}{const{collab_board_email:t}=e;return m.a.create("BoardSettingsResource",{board_id:l,collab_board_email:t}).callUpdate({showError:!1}).then(e=>i()).catch(e=>{throw e.message})}})}render(){const{board:e,categories:t,viewer:a,onCropChange:r,onClose:s,onCollaboratorInviteClick:d,onToggleFlyout:m}=this.props,{editMode:h}=this.state,b=a.isAuth&&a.id===e.owner.id,g=!!!e.archived_by_me_at&&b;return o.a.createElement(n.Fragment,null,"main"===h&&o.a.createElement(v.a,{board:e,categories:t,currentUserIsOwner:b,gaCategory:S,handleBoardLeave:this.handleBoardLeave,isArchivable:!0,isDeletable:b,isEditable:b,onClose:s,onCropChange:r,onArchiveButtonClick:this.handleShowArchiveModal,onDeleteButtonClick:this.handleShowDeleteModal,onMergeButtonClick:g?this.handleShowMergeModal:void 0,onCollaboratorInviteClick:d,onSubmit:this.handleSubmit,onToggleFlyout:m,onUnarchiveButtonClick:this.handleShowUnarchiveModal,submitText:c.a._("Done","BoardEdit.BoardEdit","Submit button text"),title:o.a.createElement(C.d,{paddingY:8},o.a.createElement(C.r,{align:"center",size:"md"},c.a._("Edit your board")))}),"merge"===h&&o.a.createElement(u.a,{className:"ConfirmDialog"},o.a.createElement(l.a,{onCancel:this.returnToMainEditMode,onSubmit:this.handleMerge,sourceBoardId:e.id})),"confirmDelete"===h&&o.a.createElement(i.a,{confirmButtonLabel:c.a._("Delete forever","Confirms the user wants to permanently delete the board","Confirms the user wants to permanently delete the board"),cancelButtonLabel:c.a._("Cancel"),message:c.a._("Once you delete a board and all its Pins, you can't undo it!"),onConfirm:this.handleDelete,onCancel:this.returnToMainEditMode}),"confirmArchive"===h&&o.a.createElement(i.a,{confirmButtonLabel:c.a._("Archive","button label on confirming board archive","button label on confirming board archive"),heading:c.a._("Archive this board?","modal heading for board archive confirmation","modal heading for board archive confirmation"),message:Object(p.b)(c.a._("If you archive {{ boardName }}, you won’t be able to save Pins to it. We’ll hide it from your profile and stop using it for recommendations. (Don’t worry: You can unarchive your board to undo this!)","BoardEdit","Confirmation message when archiving a board"),{boardName:o.a.createElement(C.T,{inline:!0,key:e.name,weight:"bold"},e.name)}),onCancel:this.returnToMainEditMode,onConfirm:this.handleArchive}),"confirmUnarchive"===h&&o.a.createElement(i.a,{confirmButtonLabel:c.a._("Unarchive","button label on confirming board unarchive","button label on confirming board unarchive"),heading:c.a._("Unarchive this board?","modal heading for board unarchive confirmation","modal heading for board unarchive confirmation"),message:Object(p.b)(c.a._("If you unarchive {{ boardName }}, it will show up on your profile and you'll be able to save new Pins to it."),{boardName:o.a.createElement(C.T,{inline:!0,key:e.name,weight:"bold"},e.name)}),onCancel:this.returnToMainEditMode,onConfirm:this.handleUnarchive}))}}),x=a("TiQD"),O=a("w70y");function T({boardId:e,coverImageHeight:t,coverImageWidth:a,onBoardArchiveChange:i,onBoardPrivacyChange:l,onBoardLeave:s,onBoardDelete:d,onBoardUpdate:u,onClose:m,onCollaboratorInviteClick:h,onCropChange:b}){const[g,p]=Object(n.useState)(!1),{data:f}=Object(O.a)({name:"CategoriesResource",allowStale:!1});Object(O.a)({name:"BoardResource",options:{field_set_key:"edit",board_id:e},allowStale:!1});const v=Object(r.useSelector)(({boards:t})=>t.content[e]);if(!!(!v||!f))return o.a.createElement(x.b,{accessibilityModalLabel:c.a._("Board edit","BoardEdit.BoardEditModal","Accessibility label on modal"),onDismiss:m,size:"sm"},o.a.createElement(C.d,{padding:12},o.a.createElement(C.M,{accessibilityLabel:c.a._("Board edit","BoardEdit.BoardEditModal","Accessibility label on loading spinner"),show:!0})));return o.a.createElement(B,{board:v,categories:f,coverImageHeight:t,coverImageWidth:a,onBoardArchiveChange:i,onBoardPrivacyChange:l,onBoardLeave:s,onBoardDelete:d,onBoardUpdate:u,onClose:()=>{g||m()},onCollaboratorInviteClick:h,onCropChange:b,onToggleFlyout:()=>p(!g)})}},qyR9:function(e,t,a){a.d(t,"a",(function(){return f})),a.d(t,"b",(function(){return E}));var n=a("q1tI"),o=a.n(n),r=a("jdx6"),i=a("gONw"),l=a("Ye/N"),s=a("gdcG"),d=a("n6mq");var c=Object(s.a)((function(e){const{buttonLabel:t,isHovering:a,isRowItem:n,hasHoverState:r,hoverHandlers:i,name:s,onClick:c}=e,u=s||t||l.a._("Create board");return o.a.createElement(d.S,{onMouseEnter:i.onMouseOver,onMouseLeave:i.onMouseLeave,onTap:c},o.a.createElement(d.d,{alignItems:"center",color:r&&a?"lightGray":"white",display:"flex",flex:n?"shrink":"none",height:64,width:"100%"},o.a.createElement(d.d,{marginStart:6,marginEnd:3,"data-test-id":"createBoardButton"},o.a.createElement(d.s,{accessibilityLabel:l.a._("Add a board"),size:"32",icon:"add-circle",color:"red"})),s?o.a.createElement(d.d,{margin:1},o.a.createElement(d.T,{inline:!0,overflow:"normal"}," ",l.a._("Create: ")," ")):null,o.a.createElement(d.T,{align:"center",inline:!0,truncate:!0,weight:"bold"}," ",u," ")))})),u=a("9QW3"),m=a("NdQN"),h=a("IBrh"),b=a("oTtT");function g(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const p="",f=2;class v extends n.Component{constructor(...e){super(...e),g(this,"state",{searchQuery:p}),g(this,"handleSelectItem",e=>{const{onCreate:t,onSelected:a}=this.props;if(!e&&t){const{searchQuery:e}=this.state;t(e)}else e&&a(e);(t||e)&&this.setState({searchQuery:""})}),g(this,"handleSearchQueryInput",e=>{this.setState({searchQuery:e})}),g(this,"renderSectionHeader",(e,t)=>e.title?o.a.createElement(d.d,null,t>0&&o.a.createElement(d.n,null),o.a.createElement(d.d,{paddingX:3,paddingY:1},o.a.createElement(d.T,{size:"md"},e.title))):null),g(this,"renderRow",({item:e,hovered:t,sectionProps:a={}})=>{const{boardSavedTo:n,isSelectMode:i,disabledRowId:l}=this.props,{searchQuery:s}=this.state,{inSectionSelection:d=!1}=a,c=n&&n.board===e.id?n&&n.state:null,u="board_section"===e.type;return o.a.createElement(r.a,{isSelectMode:i,disabled:e.id===l&&d,item:e,isSection:u,isWithinSectionPicker:d,saveState:c,searchQuery:s,selected:t})})}componentDidUpdate(e){if(!e.isLoaded&&this.props.isLoaded){const{boardPickerStopwatch:e,hasLoadError:t}=this.props;e&&(t?e.error():e.stop())}}render(){const{boardSavedTo:e,createButtonLabel:t,hasLowBoardCount:a,getSections:n,isLoaded:r,onCreate:s,pinId:b}=this.props;if(r){const{searchQuery:r}=this.state,l=n(r);return this.indexManager=new u.a(l.map(e=>e.items)),this.indexManager.setSelectItem(this.handleSelectItem),o.a.createElement(d.d,{minHeight:0,flex:"grow",height:"100%",overflow:"auto",display:"flex",direction:"column",dangerouslySetInlineStyle:{__style:{zIndex:0}}},!a&&o.a.createElement(d.d,null,o.a.createElement(d.d,{paddingX:3,marginBottom:4,marginTop:1},o.a.createElement(m.a,{disabled:!!e,indexManager:this.indexManager,onChange:this.handleSearchQueryInput,value:r})),o.a.createElement(d.n,null)),o.a.createElement(h.a,{disabled:!!e,grow:!a&&!r,indexManager:this.indexManager,onSelectItem:this.handleSelectItem,renderItem:this.renderRow,renderSectionHeader:this.renderSectionHeader,sections:l}),o.a.createElement(d.n,null),s&&o.a.createElement(c,{buttonLabel:t,hasHoverState:!0,name:r,onClick:()=>s(r)}),a&&s&&b&&o.a.createElement(i.a,{onBoardSelected:s,pinId:b}))}return o.a.createElement(d.d,{paddingY:5},o.a.createElement(d.M,{accessibilityLabel:l.a._("loading section picker","accessibility label for the loading spinner the repin picker","accessibility label for the loading spinner the repin picker"),show:!0}))}}function E(e){const t=Object(b.b)();return o.a.createElement(v,Object.assign({},e,{boardPickerStopwatch:t}))}},rrvb:function(e,t,a){var n=a("q1tI"),o=a.n(n),r=a("Ye/N"),i=a("9QW3"),l=a("NdQN"),s=a("IBrh"),d=a("gdcG"),c=a("n6mq");function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.a=Object(d.a)(class extends o.a.Component{constructor(...e){super(...e),u(this,"state",{showFlyout:!1}),u(this,"setContainerRef",e=>{this.containerRef=e}),u(this,"handleCreate",()=>{this.hideFlyout();const{onCreate:e}=this.props;e&&e()}),u(this,"handleSelectItem",e=>{this.hideFlyout();const{onSelect:t,onCreate:a}=this.props;e?t(e):a&&a()}),u(this,"handleDropdownTouch",()=>{this.setState(e=>({showFlyout:!e.showFlyout}))}),u(this,"handleHideFlyout",e=>{this.containerRef&&e.target instanceof HTMLElement&&!this.containerRef.contains(e.target)&&this.hideFlyout()}),u(this,"hideFlyout",()=>{const{hoverHandlers:{onMouseLeave:e}}=this.props;e(),this.setState({showFlyout:!1})})}componentDidMount(){document.addEventListener("click",this.handleHideFlyout,{capture:!0})}componentWillUnmount(){document.removeEventListener("click",this.handleHideFlyout,{capture:!0})}render(){const{dropdownValue:e,fetchMore:t,hoverHandlers:{onMouseOver:a,onMouseLeave:n},isHovering:d,isStoryPin:u,onCreate:m,onSearchQueryUpdate:h,renderRow:b,searchQuery:g,sections:p,createBtnDisabled:f}=this.props,{showFlyout:v}=this.state;this.indexManager=new i.a(p.map(e=>e.items)),this.indexManager.setSelectItem(this.handleSelectItem);const E=!g.trim()||!!f;return o.a.createElement("div",{ref:this.setContainerRef,style:{...u?{flex:"grow"}:{}}},o.a.createElement(c.S,{fullWidth:!!u,onMouseEnter:a,onMouseLeave:n,onTap:this.handleDropdownTouch,rounding:2},o.a.createElement(c.d,{alignItems:"center",color:d?"lightWash":"lightGray",direction:"row",display:"flex",flex:"grow",paddingX:4,paddingY:u?4:3,rounding:u?4:2},o.a.createElement(c.d,{display:"flex",flex:"grow"},o.a.createElement(c.T,{weight:"bold"},e)),o.a.createElement(c.s,{accessibilityLabel:"",color:"darkGray",icon:"arrow-down",size:14}))),v&&o.a.createElement(c.d,{position:"relative"},o.a.createElement(c.d,{borderSize:"sm",color:"white",dangerouslySetInlineStyle:{__style:{zIndex:1}},direction:"column",display:"flex",overflow:"hidden",position:"absolute",rounding:u?4:2,width:"100%"},o.a.createElement(c.d,null,o.a.createElement(c.d,{display:"flex",marginStart:-1,marginEnd:-1,padding:2},o.a.createElement(c.d,{display:"flex",flex:"grow",paddingX:1},o.a.createElement(l.a,{hideIcon:!0,indexManager:this.indexManager,onChange:h,value:g})),m&&o.a.createElement(c.d,{paddingX:1},o.a.createElement(c.e,{disabled:E,inline:!0,onClick:this.handleCreate,text:r.a._("Create","board or section dropdown create button","board or section dropdown create button")})))),o.a.createElement(s.a,{fetchMore:t,indexManager:this.indexManager,maxHeight:240,onSelectItem:this.handleSelectItem,renderItem:b,sections:p}))))}})},rxSY:function(e,t,a){a.d(t,"a",(function(){return T}));var n=a("q1tI"),o=a.n(n),r=a("Cufx"),i=a("Ye/N"),l=a("w70y"),s=a("n6mq");function d({boardId:e,invitedUserId:t,isInvited:a,onClick:r,buttonSize:d="sm"}){const c=Object(l.a)({name:"BoardInviteResource",options:{board_id:e,invited_user_id:t}});Object(n.useEffect)(()=>{c.refreshData()},[]);const u={text:i.a._("Invite","[button] invite someone to collaborate on a board","it appears in the list expanded when click invite button at the top of board page"),color:"red",disabled:!1};return c.isFetching&&(u.text=i.a._("Loading","[button] disabled button status text when checking if the user has been invited","it appears in the list expanded when click invite button at the top of board page"),u.color="gray",u.disabled=!0),(a||c.isLoaded&&c.data)&&(u.text=i.a._("Invited","[button] disabled button status text when a user has been invited to a board","it appears in the list expanded when click invite button at the top of board page"),u.color="gray",u.disabled=!0),o.a.createElement(s.e,{color:u.color,size:d,disabled:u.disabled,onClick:r,text:u.text})}var c=a("ViqK"),u=a("xZ6X"),m=a("7w6Q"),h=a("lUWX"),b=a("jZhD"),g=a("joD6"),p=a("TN0d"),f=a("xdpg"),v=a("U4JR"),E=a("O3d3"),y=a("ZE2w");function _(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const C=[],w=364;var S=Object(g.a)(class extends n.Component{constructor(...e){super(...e),_(this,"state",{networks:this.props.viewer.socialNetwork,typeaheadText:"",typeaheadSuggestions:[],invitedIds:{},invitedEmails:{}}),_(this,"handleTypeaheadInputChange",({value:e})=>{this.setState({typeaheadText:e}),Object(v.a)(4113,{component:13029,element:1043,entered_query:e,viewParameter:3059})}),_(this,"handleTypeaheadSuggestionsChange",e=>{m.a.increment("web_contacts_search",1,{source:"board_invite"}),this.setState({typeaheadSuggestions:e})}),_(this,"subscriber",p.b.subscribe("currentUser","socialNetworkUpdated",(e,t,a)=>{this.setState({networks:Object(E.a)(a)})})),_(this,"handleOnEmailInviteClick",()=>{const{boardId:e,onInvitesDidUpdate:t,onInviteDidComplete:a}=this.props,{invitedEmails:n}=this.state,o=this.state.typeaheadText;if(!Object(f.g)(o))return;const r={...n};r[o]=!0,this.setState({invitedEmails:r}),Object(y.c)(e,[o]).then(()=>{a(o,!0),this.setState({typeaheadText:""})}).catch(e=>{a(o,!1,e);const t={...n};t[o]=!1,this.setState({invitedEmails:t})}).finally(t)}),_(this,"logContactSuggestionSelection",(e,t)=>{const{typeaheadText:a}=this.state,n=a?1044:1039;Object(v.a)(101,{component:13029,element:n,entered_query:a,result_index:e+1,rs:t,objectId:this.props.boardId,view:5,viewParameter:3059})}),_(this,"handleUserSuggestionClick",(e,t)=>{const{boardId:a,onInvitesDidUpdate:n,onInviteDidComplete:o}=this.props,{invitedIds:r}=this.state,{id:i,full_name:l,debug_reason:s}=e;let d="";s&&(d=s.reason),this.logContactSuggestionSelection(t,d);const c={...r};c[i]=!0,this.setState({invitedIds:c}),Object(y.d)(a,[i]).then(()=>{o(l,!0)}).catch(e=>{o(l,!1,e);const t={...r};t[i]=!1,this.setState({invitedIds:t})}).finally(n)}),_(this,"isUserIdInvited",e=>{const{invitedIds:t}=this.state;return!!t[e]})}getStaticItems(){return[...this.getSocialItems(this.state.networks)]}getSocialItems(e){return Object.keys(e).filter(e=>C.includes(e)).filter(t=>!1===e[t].connected).map((e,t)=>o.a.createElement(h.a,{key:`socialConnect-${e}`,network:e}))}getContactSubtitle(e){switch(e.type){case"user":case"user_share_suggestion":return e.username||i.a._("On Pinterest","is a user of Pinterest","is a user of Pinterest");case"emailcontact":case"email_share_suggestion":return e.email||i.a._("Email Contact","invited user has an email","invited user has an email")}return""}renderInviteButton(e,t,a){return o.a.createElement(s.e,{color:e?"gray":"red",disabled:!!e,size:a,onClick:t,text:e?i.a._("Invited","[button] disabled button status text when a user has been invited to a board","[button] disabled button status text when a user has been invited to a board"):i.a._("Invite","[button] invite someone to collaborate on a board","[button] invite someone to collaborate on a board")})}render(){const{boardId:e,shareSuggestions:t}=this.props,{typeaheadText:a,typeaheadSuggestions:n}=this.state,l=this.getStaticItems();let m=t;return a&&(m=n),o.a.createElement(s.d,{minHeight:0,display:"flex",direction:"column"},o.a.createElement(s.d,{paddingY:4,flex:"none",display:"flex",alignItems:"center"},o.a.createElement(s.d,{flex:"grow"},o.a.createElement(b.a,{onTypeaheadSuggestionsChange:this.handleTypeaheadSuggestionsChange,resourceName:"ShareSuggestionsTypeaheadResource",resourceOptions:{suggestion_type:"group_board",count:25},value:a},o.a.createElement(s.d,{paddingX:4},o.a.createElement(s.J,{accessibilityLabel:i.a._("Search for a name or email","accessible label for contact search input field","accessible label for contact search input field"),id:"search",onChange:this.handleTypeaheadInputChange,placeholder:i.a._("Search by name or email","search input field prompt for finding contacts","search input field prompt for finding contacts"),size:"lg",value:a}))))),o.a.createElement(s.d,{overflow:"scrollY",maxHeight:50+w},m.map((t,a)=>{const n=t.username?`/${t.username}/`:null;return o.a.createElement(s.d,{key:a},o.a.createElement(c.a,{imageUrl:t.image_medium_url||"",name:t.full_name||t.email,title:t.full_name||t.email,subtitle:this.getContactSubtitle(t),accessory:o.a.createElement(d,{boardId:e,invitedUserId:t.id,isInvited:this.isUserIdInvited(t.id),onClick:()=>this.handleUserSuggestionClick(t,a),buttonSize:"lg"}),linkURL:n}))}),a&&(Object(f.g)(a)?o.a.createElement(c.a,{name:a,title:a,accessory:this.renderInviteButton(!!this.state.invitedEmails[a],this.handleOnEmailInviteClick,"lg")}):o.a.createElement(u.a,{iconNode:o.a.createElement(r.a,{name:a,size:"md"}),title:a,subtitle:i.a._("Keep typing!","boardCollabInviterForm.label","Message for user to keep typing")})),l))}}),I=a("CvCA"),B=a("vvax"),x=a("nGHF");const O=3e3;function T({boardId:e,boardOwner:t}){const a=Object(x.b)(),{refreshData:r}=Object(l.a)({name:"BoardInvitesResource",options:{board_id:e,field_set_key:"boardEdit",status_filters:"new,accepted,contact_request_not_approved",sort:"viewer_first",include_inactive:!0},allowStale:!1}),{refreshData:d}=Object(l.a)({name:"BoardInvitesResource",options:{board_id:e,field_set_key:"boardEdit",status_filters:"pending_approval"},allowStale:!1}),{data:c,isLoaded:u}=Object(l.a)({name:"ShareSuggestionsResource",options:{page_size:5,field_set_key:"default",suggestion_type:"group_board"},allowStale:!1});Object(n.useEffect)(()=>{Object(v.a)(7120,{objectId:e,view:5,viewParameter:3059})},[]),Object(n.useEffect)(()=>{if(u){const e=c&&c.length>0?7511:7512;Object(v.a)(e,{component:13305,element:10592,view:5,viewParameter:3059})}},[u]);const m=(e,t=!1)=>{a.showOneToast(({onHide:a})=>o.a.createElement(I.a,{color:t?"red":"darkGray",duration:O,onHide:a,text:e}))};return u?o.a.createElement(S,{boardId:e,boardOwner:t,onInvitesDidUpdate:()=>{r(),d()},onInviteDidComplete:(e,t,a)=>{t?(e=>{const t=i.a._("Invited {{userIdentifier}} to collaborate","Toast for successfully sending invitation of collaborating a board","Toast for successfully sending invitation of collaborating a board");m(Object(B.b)(t,{userIdentifier:e}).join(""))})(e):((e,t)=>{const a=i.a._("Failed to invite {{userIdentifier}} to collaborate","Toast for failing to send invitation of collaborating a board","Toast for failing to send invitation of collaborating a board");m(t&&t.message?t.message:Object(B.b)(a,{userIdentifier:e}).join(""),!0)})(e,a)},shareSuggestions:c||[]}):o.a.createElement(s.d,{display:"flex",justifyContent:"center",paddingY:12,width:"100%"},o.a.createElement(s.M,{accessibilityLabel:i.a._("Loading contacts","BoardCollab.BoardCollabInviteFormContainer","Accessibility label on loading spinner"),show:!0}))}},"v/Q4":function(e,t,a){a.d(t,"a",(function(){return o}));var n=a("/MKj");function o(){return Object(n.useSelector)(({viewer:e})=>e)}},vVEi:function(e,t,a){a.d(t,"a",(function(){return p})),a.d(t,"b",(function(){return f})),a.d(t,"e",(function(){return E})),a.d(t,"c",(function(){return C})),a.d(t,"f",(function(){return w})),a.d(t,"d",(function(){return S}));var n=a("q1tI"),o=a.n(n),r=a("/MKj"),i=a("OWXb"),l=a("nGHF"),s=a("TSYQ"),d=a.n(s),c=a("Ye/N"),u=a("n6mq");function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function h(){return o.a.createElement(u.d,{display:"flex",justifyContent:"around",overflow:"hidden"},o.a.createElement("div",{className:"boardBlockingActionToastWhiteSpinner"},o.a.createElement(u.s,{accessibilityLabel:c.a._("board action pending","accessibility label for board action toast to indicate pending action","accessibility label for board action toast to indicate pending action"),color:"white",icon:"knoop",size:40})))}const b=2e3;class g extends n.Component{constructor(...e){super(...e),m(this,"state",{hiding:!1,visible:!1}),m(this,"handleHide",()=>{this.setState({hiding:!0}),this.timeout=window.setTimeout(this.props.onHide,200)}),m(this,"handleMouseEnter",()=>{window.clearTimeout(this.timeout)}),m(this,"handleMouseLeave",()=>{this.timeout=window.setTimeout(this.handleHide,this.props.duration||b)})}componentDidMount(){this.firstLine&&(window.setTimeout(()=>{this.setState({visible:!0})},100),this.timeout=window.setTimeout(this.handleHide,this.props.duration||b))}get firstLine(){const{actionType:e,actionStatus:t,location:{isSection:a}}=this.props,n="completed"===t;switch(e){case"create_section":return n?c.a._("Created section","toast text to indicate a section has been created successfully","toast text to indicate a section has been created successfully"):c.a._("Creating section","toast text to indicate a section is being created","toast text to indicate a section is being created");case"delete_pins":return a?n?c.a._("Deleted Pins from","toast text to notify Pins have been deleted from a section","toast text to notify Pins have been deleted from a section"):c.a._("Deleting Pins from","toast text to notify Pins are being deleted from a section","toast text to notify Pins are being deleted from a section"):n?c.a._("Deleted Pins from","toast text to notify Pins have been deleted from a board","toast text to notify Pins have been deleted from a board"):c.a._("Deleting Pins from","toast text to notify Pins are being deleted from a board","toast text to notify Pins are being deleted from a board");case"move_pins":return a?n?c.a._("Moved to","toast text to notify pins have been moved to this section","toast text to notify pins have been moved to this section"):c.a._("Moving to","toast text to notify pins are being moved to this section","toast text to notify pins are being moved to this section"):n?c.a._("Moved to","toast text to notify pins have been moved to this board","toast text to notify pins have been moved to this board"):c.a._("Moving to","toast text to notify pins are being moved to this board","toast text to notify pins are being moved to this board");case"merge":return a?n?c.a._("Moved to","toast text to notify anotehr section has been merged to this section","toast text to notify anotehr section has been merged to this section"):c.a._("Moving to","toast text to notify another section is being merged to this section","toast text to notify another section is being merged to this section"):n?c.a._("Moved to","toast text to notify another board has been merged to this board","toast text to notify another board has been merged to this board"):c.a._("Moving to","toast text to notify another board is being merged to this board","toast text to notify another board is being merged to this board");default:return null}}render(){const{actionStatus:e,location:t}=this.props,{visible:a,hiding:n}=this.state;if(!this.firstLine)return null;const r="inProgress"===e?`${t.name}...`:t.name;return o.a.createElement("div",{className:d()("ToastBase",{visible:a},{hiding:n}),onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},o.a.createElement(u.W,{text:o.a.createElement(o.a.Fragment,null,o.a.createElement(u.T,{color:"white"},this.firstLine),o.a.createElement(u.T,{color:"white",weight:"bold"},r)),thumbnail:"completed"===e?void 0:o.a.createElement(h,null)}))}}const p=2e3,f=5e3;const v=["merge","move_pins","create_section"];function E({blockingActions:e,actionType:t,boardId:a,sectionId:n}){return e.find(e=>!(function(e){switch(e){case 22:return"delete_board";case 7172:case 7173:return"merge";case 900:case 7158:case 7109:return"delete_pins";case 901:case 7108:return"move_pins";case 7100:return"create_section";case 7102:return"delete_section";default:return null}}(e.action_type)!==t||v.includes(e.action_type)&&e.is_origin||e.board_id!==a||(n?n!==e.section_id:e.section_id&&"-1"!==e.section_id)||1===e.progress))}let y=0;const _={};function C({check:e,checkDelay:t,checkInterval:a,onComplete:n}){const o=`timeout${y}`;y+=1;const r=()=>{const t=Date.now();e().then(e=>{const i=Date.now()-t;e?(n(),delete _[o]):_[o]=setTimeout(r,Math.max(1e3,a-i))}).catch(()=>{delete _[o]})};_[o]=setTimeout(r,t)}const w=(e,t,a,n)=>({onHide:r})=>o.a.createElement(g,{actionType:t,actionStatus:e,duration:"inProgress"===e?p:2e3,location:{name:n?n.title:a.name,isSection:!!n},onHide:r});function S(e){function t(t){const a=Object(r.useDispatch)(),{showToast:n}=Object(l.b)();return o.a.createElement(e,Object.assign({},t,{showBlockingActionToast:({actionType:e,board:t,section:o})=>{n(w("inProgress",e,t,o)),C({check:()=>a(Object(i.a)(t.id)).then(a=>!E({blockingActions:a,actionType:e,boardId:t.id,sectionId:o&&o.id})),checkDelay:p,checkInterval:f,onComplete:()=>n(w("completed",e,t,o))})}}))}return t.displayName=`WithShowBlockingActionToasts(${e.displayName||e.name||""})`,t}},"w/op":function(e,t,a){},xZ6X:function(e,t,a){a.d(t,"a",(function(){return i}));var n=a("q1tI"),o=a.n(n),r=a("n6mq");function i(e){const{iconNode:t,title:a,subtitle:n,accessory:i}=e;return o.a.createElement(r.d,{display:"flex",alignItems:"center",paddingX:4,paddingY:2},o.a.createElement(r.d,{marginEnd:2},t),o.a.createElement(r.d,{display:"flex",flex:"grow",alignItems:"start",direction:"column"},o.a.createElement(r.T,{color:"darkGray",size:"lg",truncate:!0,weight:"bold"},a),o.a.createElement(r.T,{truncate:!0,size:"sm",color:"gray"},n)),i&&o.a.createElement(r.d,null,i))}},zpFB:function(e,t,a){a.d(t,"a",(function(){return n}));const n=-4}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/js/153-69df6d215ddf32cfc85d.mjs.map